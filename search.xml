<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>C++çš„STLæ¯”è¾ƒæ–¹æ³•</title>
      <link href="/2025/08/16/C++/C++%E7%9A%84STL%E6%AF%94%E8%BE%83%E5%B8%B8%E8%A7%84%E6%96%B9%E6%B3%95/"/>
      <url>/2025/08/16/C++/C++%E7%9A%84STL%E6%AF%94%E8%BE%83%E5%B8%B8%E8%A7%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å†™ç®—æ³•é¢˜ã€ä½¿ç”¨C++å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦ä½¿ç”¨åˆ°STLæ¥å­˜å–å¤§é‡çš„æœ‰åºæ•°æ®ï¼Œå¹¶ä¸”æ’åºç®—æ³•å¹¶ä¸ä¸€å®šæ˜¯ç®€å•çš„æ¯”å¤§å°ï¼Œéœ€è¦ç”¨æˆ·æ¥è‡ªå®šä¹‰å¤æ‚çš„æ¯”è¾ƒé€»è¾‘ã€‚ç”±äºæœ¬äººåœ¨å†™leetcodeæ—¶å¸¸å¸¸å¿˜è®°æ¯”è¾ƒç®—æ³•ï¼Œå› æ­¤ç‰¹åˆ«è®°å½•ä¸€ä¸‹ã€‚</p><h2 id="åˆ›å»ºæ¯”è¾ƒç±»"><a href="#åˆ›å»ºæ¯”è¾ƒç±»" class="headerlink" title="åˆ›å»ºæ¯”è¾ƒç±»"></a>åˆ›å»ºæ¯”è¾ƒç±»</h2><p>ç¬¬ä¸€ç§æ ‡å‡†åŠæ³•æ˜¯è‡ªå®šä¹‰Comparatorç±»ï¼Œå¹¶ä¸”å®šä¹‰ä¸€ä¸ªoperator()çš„æ¯”è¾ƒæ–¹æ³•ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Comparator</span> &#123;</span><br><span class="line">        <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> ListNode* node1, <span class="type">const</span> ListNode* node2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node1-&gt;val &gt; node2-&gt;val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeKLists</span><span class="params">(vector&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class="line">        ListNode new_head = <span class="built_in">ListNode</span>();</span><br><span class="line">        ListNode* ptr = &amp;new_head;</span><br><span class="line">        priority_queue&lt;ListNode*, vector&lt;ListNode*&gt;, Comparator&gt; pq;</span><br><span class="line">        <span class="type">int</span> k = lists.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(lists[i] != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                pq.<span class="built_in">push</span>(lists[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!pq.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            ListNode* node = pq.<span class="built_in">top</span>();</span><br><span class="line">            ptr-&gt;next = node;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">            pq.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(node-&gt;next) &#123;</span><br><span class="line">                pq.<span class="built_in">push</span>(node-&gt;next);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> new_head.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºlambdaè¡¨è¾¾å¼"><a href="#åˆ›å»ºlambdaè¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºlambdaè¡¨è¾¾å¼"></a>åˆ›å»ºlambdaè¡¨è¾¾å¼</h2><p>ç¬¬äºŒç§åŠæ³•æ˜¯åˆ›å»ºä¸€ä¸ªlambdaè¡¨è¾¾å¼ã€‚ä¸åˆ›å»ºä¸€ä¸ªç±»æœ€ä¸åŒçš„æ˜¯ï¼Œéœ€è¦ä½¿ç”¨decltypeï¼Œå¹¶ä¸”å¦‚æœæ˜¯priority_queue</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeKLists</span><span class="params">(vector&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class="line">        ListNode new_head = <span class="built_in">ListNode</span>();</span><br><span class="line">        ListNode* ptr = &amp;new_head;</span><br><span class="line">        <span class="keyword">auto</span> comp = [](<span class="type">const</span> ListNode* node1, <span class="type">const</span> ListNode* node2) &#123;</span><br><span class="line">            <span class="keyword">return</span> node1-&gt;val &gt; node2-&gt;val;</span><br><span class="line">        &#125;;</span><br><span class="line">        priority_queue&lt;ListNode*, vector&lt;ListNode*&gt;, <span class="keyword">decltype</span>(comp)&gt; <span class="built_in">pq</span>(comp);</span><br><span class="line">        <span class="type">int</span> k = lists.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(lists[i] != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                pq.<span class="built_in">push</span>(lists[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!pq.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            ListNode* node = pq.<span class="built_in">top</span>();</span><br><span class="line">            ptr-&gt;next = node;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">            pq.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(node-&gt;next) &#123;</span><br><span class="line">                pq.<span class="built_in">push</span>(node-&gt;next);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> new_head.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="lambdaè¡¨è¾¾å¼çš„åº•å±‚åˆ†æ"><a href="#lambdaè¡¨è¾¾å¼çš„åº•å±‚åˆ†æ" class="headerlink" title="lambdaè¡¨è¾¾å¼çš„åº•å±‚åˆ†æ"></a>lambdaè¡¨è¾¾å¼çš„åº•å±‚åˆ†æ</h3><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œlambdaè¡¨è¾¾å¼æ¯”èµ·å®šä¹‰ä¸€ä¸ªç±»ï¼Œå†å†™ä¸€ä¸ªoperator()è¿™æ ·çš„å‡½æ•°ä¼šç®€å•ä¸€äº›ã€‚ä½†å®é™…ä¸Šï¼Œlambdaè¡¨è¾¾å¼çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªåŒ¿åç±»ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">__lambda_xxx</span> &#123; </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> ListNode* node1, <span class="type">const</span> ListNode* node2)</span> <span class="type">const</span> </span>&#123; </span><br><span class="line"><span class="keyword">return</span> node1-&gt;val &gt; node2-&gt;val; </span><br><span class="line">&#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>decl(comp)</code>å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªç±»å‹ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨priority_queueä¸­ä½¿ç”¨pq(comp)æ¥ä¼ é€’ä¸€ä¸ªå®ä¾‹ã€‚<br>å½“ç„¶ï¼Œè¿™åªæ˜¯æœ€ç®€å•çš„lambdaè¡¨è¾¾å¼è¡¨ç°æ–¹å¼ã€‚lambdaè¡¨è¾¾å¼å¦ä¸€ä¸ªæ›´æœ‰ç‰¹ç‚¹çš„åœ°æ–¹åœ¨äºå®ƒçš„æ•è·ï¼Œå¯ä»¥è®©lambdaè¡¨è¾¾å¼å†…éƒ¨èƒ½ä¿®æ”¹å¤–é¢çš„å˜é‡ã€‚</p><h4 id="lambdaçš„æ•è·"><a href="#lambdaçš„æ•è·" class="headerlink" title="lambdaçš„æ•è·"></a>lambdaçš„æ•è·</h4><ul><li>æŒ‰å€¼æ•è·</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line">string name = <span class="string">&quot;test&quot;</span>;</span><br><span class="line"><span class="keyword">auto</span> comp = [=](<span class="type">int</span> a) &#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; x &amp;&amp; name.<span class="built_in">length</span>() &gt; <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯æŠŠæ‰€æœ‰çš„å€¼éƒ½æ‹·è´å­˜å‚¨ï¼Œç”Ÿæˆçš„ç±»å°±æ˜¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">__lambda_xxx</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> x;           <span class="comment">// æ‹·è´å­˜å‚¨</span></span><br><span class="line">    string name;     <span class="comment">// æ‹·è´å­˜å‚¨</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    __lambda_xxx(<span class="type">int</span> x_val, <span class="type">const</span> string&amp; name_val) </span><br><span class="line">        : <span class="built_in">x</span>(x_val), <span class="built_in">name</span>(name_val) &#123;&#125;  <span class="comment">// æ‹·è´æ„é€ </span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> a)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; x &amp;&amp; name.<span class="built_in">length</span>() &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æŒ‰å¼•ç”¨æ•è·</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line">string name = <span class="string">&quot;test&quot;</span>;</span><br><span class="line"><span class="keyword">auto</span> comp = [&amp;](<span class="type">int</span> a) &#123;</span><br><span class="line">    x++;  <span class="comment">// å¯ä»¥ä¿®æ”¹åŸå˜é‡</span></span><br><span class="line">    <span class="keyword">return</span> a &gt; x &amp;&amp; name.<span class="built_in">length</span>() &gt; <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">__lambda_xxx</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span>&amp; x;           <span class="comment">// å¼•ç”¨å­˜å‚¨</span></span><br><span class="line">    string&amp; name;     <span class="comment">// å¼•ç”¨å­˜å‚¨</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    __lambda_xxx(<span class="type">int</span>&amp; x_ref, string&amp; name_ref) </span><br><span class="line">        : <span class="built_in">x</span>(x_ref), <span class="built_in">name</span>(name_ref) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> a)</span> <span class="type">const</span> </span>&#123;  <span class="comment">// æ³¨æ„ï¼šå³ä½¿æ˜¯constï¼Œä¹Ÿèƒ½é€šè¿‡å¼•ç”¨ä¿®æ”¹å¤–éƒ¨å˜é‡</span></span><br><span class="line">        x++;  <span class="comment">// ä¿®æ”¹å¤–éƒ¨å˜é‡</span></span><br><span class="line">        <span class="keyword">return</span> a &gt; x &amp;&amp; name.<span class="built_in">length</span>() &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æŒ‰å€¼+æŒ‰å¼•ç”¨é€‰æ‹©æ€§åœ°æ•è·</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> y = <span class="number">10</span>;</span><br><span class="line">string name = <span class="string">&quot;test&quot;</span>;</span><br><span class="line"><span class="keyword">auto</span> comp = [&amp;x, y](<span class="type">int</span> a) &#123;  <span class="comment">// xæŒ‰å¼•ç”¨ï¼ŒyæŒ‰å€¼ï¼Œnameä¸æ•è·</span></span><br><span class="line">    x++;</span><br><span class="line">    <span class="keyword">return</span> a &gt; x + y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾è§‚å¯Ÿåˆ°ï¼Œæ•è·çš„å…ƒç´ è¶Šå¤šï¼Œè¿™ä¸ªåŒ¿åç±»è‚¯å®šå°±è¶Šå¤§ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="type">double</span> y = <span class="number">2.0</span>;</span><br><span class="line">    std::string s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> lambda1 = [](<span class="type">int</span> a) &#123; <span class="keyword">return</span> a &gt; <span class="number">0</span>; &#125;;           <span class="comment">// æ— æ•è·</span></span><br><span class="line">    <span class="keyword">auto</span> lambda2 = [x](<span class="type">int</span> a) &#123; <span class="keyword">return</span> a &gt; x; &#125;;          <span class="comment">// æ•è·int</span></span><br><span class="line">    <span class="keyword">auto</span> lambda3 = [x, y](<span class="type">int</span> a) &#123; <span class="keyword">return</span> a &gt; x + y; &#125;;   <span class="comment">// æ•è·int+double</span></span><br><span class="line">    <span class="keyword">auto</span> lambda4 = [x, y, s](<span class="type">int</span> a) &#123; <span class="keyword">return</span> a &gt; x; &#125;;    <span class="comment">// æ•è·int+double+string</span></span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ— æ•è·: &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(lambda1) &lt;&lt; <span class="string">&quot; bytes\n&quot;</span>;      <span class="comment">// é€šå¸¸æ˜¯1</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ•è·int: &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(lambda2) &lt;&lt; <span class="string">&quot; bytes\n&quot;</span>;     <span class="comment">// 4</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ•è·int+double: &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(lambda3) &lt;&lt; <span class="string">&quot; bytes\n&quot;</span>; <span class="comment">// 16 (å¯¹é½)</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ•è·int+double+string: &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(lambda4) &lt;&lt; <span class="string">&quot; bytes\n&quot;</span>; <span class="comment">// 48+</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>P.S.: ä¹‹å‰é¢å¾®ä¿¡çš„æ—¶å€™é¢è¯•å®˜çœŸçš„é—®äº†lambdaè¡¨è¾¾å¼åº•å±‚æ˜¯ä»€ä¹ˆã€‚å½“æ—¶è¿˜æ²¡æœ‰æ¥å¾—åŠå‡†å¤‡C++å…«è‚¡ï¼Œåªèƒ½é—æ†¾ç¦»åœºäº†ğŸ˜ğŸ˜­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>C++çš„mutex</title>
      <link href="/2025/08/11/C++/C++%E7%9A%84mutex/"/>
      <url>/2025/08/11/C++/C++%E7%9A%84mutex/</url>
      
        <content type="html"><![CDATA[<h2 id="mutexåº•å±‚åŸç†"><a href="#mutexåº•å±‚åŸç†" class="headerlink" title="mutexåº•å±‚åŸç†"></a>mutexåº•å±‚åŸç†</h2><p>mutexï¼Œå³ mutual exclusion çš„ç¼©å†™ï¼Œæ„ä¸ºäº’æ–¥ ã€‚å®ƒç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥è¢«ä¿æŠ¤çš„åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸè¢«ç§°ä¸ºä¸´ç•ŒåŒºã€‚ï¼ˆæ„æ€æ˜¯å…è®¸ä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è¿›å…¥ä¸´ç•ŒåŒºï¼‰</p><table><thead><tr><th>åºå·</th><th>åç§°</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>1</td><td>std::mutex</td><td>æœ€åŸºæœ¬çš„äº’æ–¥é”</td></tr><tr><td>2</td><td>std::recursive_mutex</td><td>åŒä¸€çº¿ç¨‹å¯ä»¥é€’å½’ï¼ˆé‡æ–°è¿›å…¥ï¼‰çš„äº’æ–¥ç±»</td></tr><tr><td>3</td><td>std::timed_mutex</td><td>é¢å¤–æä¾›å¸¦æ—¶é™è¯·æ±‚é”å®šçš„èƒ½åŠ›</td></tr><tr><td>4</td><td>std::recursive_timed_mutex</td><td>åŒä¸€çº¿ç¨‹å¯é€’å½’ä¸”æœ‰æ—¶é™çš„timed_mutex</td></tr></tbody></table><p>ä¸std::threadä¸€æ ·ï¼Œmutexç›¸å…³ç±»ä¸æ”¯æŒæ‹·è´æ„é€ ã€ä¸æ”¯æŒèµ‹å€¼ã€‚åŒæ—¶mutexç±»ä¹Ÿä¸æ”¯æŒmoveè¯­ä¹‰(moveæ„é€ ã€moveèµ‹å€¼)ã€‚ä¸ç”¨æ‹…å¿ƒä¼šè¯¯ç”¨è¿™äº›æ“ä½œï¼ŒçœŸè¦è¿™ä¹ˆåšäº†çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šé˜»æ­¢ä½ çš„ã€‚</p><p>mutexçš„åº•å±‚åŸºäºåŸå­æŠ€æœ¯ã€‚æ¯”å¦‚CASæ˜¯å®ç°mutexçš„é‡è¦åŸå­æ“ä½œä¹‹ä¸€ã€‚CASçš„æ“ä½œå°±æ˜¯ç»™å®šä¸€ä¸ªåœ°å€ï¼Œä¸€ç›´å¾ªç¯å»è¯»å–è¿™ä¸ªå†…å­˜åœ°å€çš„å€¼ã€‚ç›´åˆ°è¯»åˆ°äº†é¢„æœŸçš„å€¼ï¼Œå°±æŠŠè¿™ä¸ªå†…å­˜æ›´æ–°ä¸ºæ–°çš„å€¼ã€‚mutexå°±æ˜¯åŸºäºCASæ¥å»å®ç°çº¿ç¨‹ä¹‹é—´ä¸´ç•ŒåŒºçš„å®‰å…¨æ€§çš„ã€‚CASæ˜¯ä¸€æ¡ç¡¬ä»¶æŒ‡ä»¤ï¼Œåœ¨ç¡¬ä»¶çº§åˆ«å»é”å®šå†…å­˜æ€»çº¿ï¼Œé˜²æ­¢å…¶ä»–çº¿ç¨‹çš„è®¿é—®ã€‚åŒæ—¶ï¼ŒCASè¿˜æœ‰å‰åçš„éšè—å†…å­˜å±éšœï¼Œé˜²æ­¢æŒ‡ä»¤é‡æ’å¯¼è‡´å‡ºç°é¢„æœŸä¹‹å¤–çš„ç»“æœã€‚</p><p>å¦‚æœä¸€ä¸ªçº¿ç¨‹å°è¯•è·å–é”ï¼Œä½†è¯¥é”å·²ç»è¢«å ç”¨äº†ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå°±ä¼šå°†è¯¥çº¿ç¨‹é˜»å¡ï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ã€‚è®©å‡ºCPUèµ„æºï¼Œé¿å…æ— æ•ˆçš„CPUå ç”¨ã€‚åªæœ‰åˆ°è¿™ä¸ªé”å ç”¨ç»“æŸäº†ï¼Œå†ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªæˆ–å¤šä¸ªé”ã€‚åœ¨è¿™ä¸ªæµç¨‹ä¸­ï¼Œä¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¿›å…¥å†…æ ¸ç©ºé—´ï¼Œå­˜å‚¨å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢ã€‚</p><blockquote><p>åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œfutexï¼ˆå¿«é€Ÿç”¨æˆ·ç©ºé—´äº’æ–¥ä½“ï¼‰å°±æ˜¯ä¸ mutex ç´§å¯†ç›¸å…³çš„åº•å±‚æœºåˆ¶ ã€‚futex çš„è®¾è®¡ç†å¿µéå¸¸å·§å¦™ï¼Œå®ƒç»“åˆäº†ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„ä¼˜åŠ¿ ã€‚å½“çº¿ç¨‹å°è¯•è·å–é”æ—¶ï¼Œé¦–å…ˆä¼šåœ¨ç”¨æˆ·ç©ºé—´è¿›è¡Œå¿«é€Ÿæ£€æŸ¥ï¼Œå¦‚æœé”å¯ç”¨ï¼Œç›´æ¥åœ¨ç”¨æˆ·ç©ºé—´è·å–é”ï¼Œé¿å…è¿›å…¥å†…æ ¸ç©ºé—´ï¼Œå¤§å¤§æé«˜äº†æ•ˆç‡ ã€‚</p></blockquote><p>å½“ç„¶ï¼Œfutexçš„è®¾è®¡éå¸¸ç¬¦åˆç›´è§‰ï¼Œä½†è¿™ä¸€ç›´è§‰çš„å‰ææ˜¯åŸºäºmutexçš„åº•å±‚ä½¿ç”¨äº†CASåŸå­å†…å­˜è¯»å†™æ–¹æ³•ã€‚åœ¨futexä¹‹å‰ï¼Œéƒ½æ˜¯åªç”¨ä¿¡å·é‡çš„PVæ“ä½œï¼Œæ¯æ¬¡çš„PVæ“ä½œéƒ½ç›¸å½“äºä¸€æ¬¡å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢ã€‚</p><h2 id="C-çš„å¸¸ç”¨é”"><a href="#C-çš„å¸¸ç”¨é”" class="headerlink" title="C++çš„å¸¸ç”¨é”"></a>C++çš„å¸¸ç”¨é”</h2><p>æœ€ç®€å•ç”¨æ³•ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mutex.lock, mutex.unlock</span><br></pre></td></tr></table></figure><p>åœ¨åœºæ™¯å¤æ‚çš„æƒ…å†µä¸‹ï¼Œç¼–ç¨‹è€…å¸¸å¸¸å¿˜äº†è¦é‡Šæ”¾é”ã€‚æ‰€ä»¥åœ¨å¼€å‘æ•´ï¼Œæ›´æ¨èä½¿ç”¨RAIIåŒ…è£…çš„é”ï¼š<br><code>std::lock_guard&lt;std::mutex&gt; lock(g_mutex);</code>ã€‚èƒ½å¤Ÿåœ¨ææ„çš„æ—¶å€™è‡ªåŠ¨è§£é”ã€‚<br>å¦‚æœéœ€è¦é”å®šå¤šä¸ªäº’æ–¥é‡ï¼Œå¯ä»¥ä½¿ç”¨scoped_lock:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">std::mutex mtx1, mtx2;  </span><br><span class="line">&#123;  </span><br><span class="line">Â  Â  <span class="function">std::scoped_lock <span class="title">lock</span><span class="params">(mtx1, mtx2)</span></span>; <span class="comment">// C++17èµ·æ”¯æŒï¼Œè‡ªåŠ¨è§£å†³å¤šé”æ­»é”é—®é¢˜  </span></span><br><span class="line">Â  Â  <span class="comment">/* ...æ“ä½œ... */</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>scoped_lockæ˜¯ä¸€ç§ç®€å•ä¸ä¼šé€ æˆæ­»é”çš„ä¸ºå¤šä¸ªèµ„æºæä¾›åŒæ—¶ä¿æŠ¤çš„å·¥å…·ã€‚å®ƒçš„åº•å±‚ä¹Ÿæ¯”è¾ƒç›´æ¥ï¼Œå¦‚æœæ— æ³•ä¸€æ¬¡æ€§è·å¾—æ‰€æœ‰çš„é”èµ„æºï¼Œå®ƒä¼šé‡Šæ”¾å…ˆå‰è·å¾—çš„èµ„æºï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´å†æ¬¡å°è¯•ã€‚</p><h2 id="å…¶ä»–é”"><a href="#å…¶ä»–é”" class="headerlink" title="å…¶ä»–é”"></a>å…¶ä»–é”</h2><h3 id="mutexå’Œè‡ªæ—‹é”"><a href="#mutexå’Œè‡ªæ—‹é”" class="headerlink" title="mutexå’Œè‡ªæ—‹é”"></a>mutexå’Œè‡ªæ—‹é”</h3><p>è‡ªæ—‹é”æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒä¸ mutex æœ‰ç€æ˜¾è‘—çš„åŒºåˆ« ã€‚å½“ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å–è‡ªæ—‹é”æ—¶ï¼Œå¦‚æœé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œå®ƒä¸ä¼šåƒ mutex é‚£æ ·å°†çº¿ç¨‹é˜»å¡ï¼Œè€Œæ˜¯è¿›å…¥ä¸€ä¸ªå¾ªç¯ï¼Œä¸æ–­åœ°æ£€æŸ¥é”çš„çŠ¶æ€ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º â€œè‡ªæ—‹â€ ã€‚</p><p>è‡ªæ—‹é”çš„ä¼˜ç‚¹åœ¨äºå“åº”é€Ÿåº¦å¿«ï¼Œå› ä¸ºå®ƒé¿å…äº†çº¿ç¨‹é˜»å¡å’Œå”¤é†’æ‰€å¸¦æ¥çš„å¼€é”€ ã€‚åœ¨é”è¢«å ç”¨æ—¶é—´éå¸¸çŸ­çš„æƒ…å†µä¸‹ï¼Œè‡ªæ—‹ç­‰å¾…æ‰€èŠ±è´¹çš„æ—¶é—´è¿œè¿œå°äºçº¿ç¨‹é˜»å¡çš„å¼€é”€ï¼Œæ­¤æ—¶ä½¿ç”¨è‡ªæ—‹é”å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ ã€‚æ¯”å¦‚ï¼Œåœ¨å¤šæ ¸ CPU ç¯å¢ƒä¸­ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªæ ¸å¿ƒä¸Šè‡ªæ—‹æ—¶ï¼Œä¸ä¼šå½±å“å…¶ä»–æ ¸å¿ƒä¸Šçº¿ç¨‹çš„æ­£å¸¸å·¥ä½œï¼Œè‡ªæ—‹é”èƒ½å‘æŒ¥å‡ºè¾ƒå¥½çš„æ€§èƒ½ ã€‚</p><p>ç„¶è€Œï¼Œè‡ªæ—‹é”ä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ ã€‚ç”±äºçº¿ç¨‹åœ¨è‡ªæ—‹æ—¶ä¼šä¸€ç›´å ç”¨ CPU è¿›è¡Œ â€œç©ºè½¬â€ï¼Œä¸æ–­åœ°æ£€æŸ¥é”çš„çŠ¶æ€ï¼Œè¿™ä¼šæµªè´¹å¤§é‡çš„ CPU èµ„æº ã€‚å¦‚æœé”è¢«å ç”¨çš„æ—¶é—´å¾ˆé•¿ï¼Œè‡ªæ—‹çš„çº¿ç¨‹ä¼šæŒç»­å ç”¨ CPUï¼Œä¸ä»…è‡ªèº«æ— æ³•é«˜æ•ˆå·¥ä½œï¼Œè¿˜å¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹æ²¡æœ‰è¶³å¤Ÿçš„ CPU æ—¶é—´æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç”šè‡³å‡ºç° â€œé¥¿æ­»â€ çš„æƒ…å†µ ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œmutex åœ¨é”è¢«å ç”¨æ—¶ï¼Œä¼šå°†çº¿ç¨‹é˜»å¡ï¼Œä½¿å…¶è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œè®©å‡º CPU èµ„æºï¼Œé¿å…äº†æ— æ•ˆçš„ CPU å ç”¨ ã€‚å½“é”çš„æŒæœ‰æ—¶é—´è¾ƒé•¿æ—¶ï¼Œmutex çš„è¿™ç§æœºåˆ¶å¯ä»¥æœ‰æ•ˆå‡å°‘ CPU çš„æµªè´¹ï¼Œæé«˜ç³»ç»Ÿæ•´ä½“æ€§èƒ½ ã€‚æ‰€ä»¥ï¼Œåœ¨é”æŒæœ‰æ—¶é—´è¾ƒé•¿ã€èµ„æºç«äº‰ä¸é¢‘ç¹çš„åœºæ™¯ä¸‹ï¼Œmutex æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼›è€Œåœ¨é”æŒæœ‰æ—¶é—´æçŸ­ã€å¯¹å“åº”é€Ÿåº¦è¦æ±‚æé«˜ä¸”èµ„æºç«äº‰é¢‘ç¹çš„åœºæ™¯ä¸­ï¼Œè‡ªæ—‹é”åˆ™æ›´å…·ä¼˜åŠ¿ ã€‚</p><p>è‡ªæ—‹é”çš„é€‚ç”¨åœºæ™¯æœ‰é«˜é¢‘äº¤æ˜“ï¼Œå®æ—¶æ¸¸æˆå¼•æ“ï¼Œé«˜æ€§èƒ½ç½‘ç»œè®¾å¤‡ã€‚</p><h3 id="mutexå’Œè¯»å†™é”"><a href="#mutexå’Œè¯»å†™é”" class="headerlink" title="mutexå’Œè¯»å†™é”"></a>mutexå’Œè¯»å†™é”</h3><p>mutexæœ¬èº«ä¸åŒºåˆ†è¯»å†™ï¼Œè¯»å†™é”éå¸¸é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯^^<br>åªç”¨mutexå°±å¯ä»¥å®ç°è¯»å†™é”ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DualMutexRWLock</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">mutable</span> std::mutex read_mtx;    <span class="comment">// ä¿æŠ¤è¯»è€…è®¡æ•°</span></span><br><span class="line">    <span class="keyword">mutable</span> std::mutex write_mtx;   <span class="comment">// å†™è€…äº’æ–¥</span></span><br><span class="line">    <span class="keyword">mutable</span> <span class="type">int</span> readers = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">lock_shared</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        read_mtx.<span class="built_in">lock</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (++readers == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ä¸ªè¯»è€…éœ€è¦é˜»æ­¢å†™è€…</span></span><br><span class="line">            write_mtx.<span class="built_in">lock</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        read_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">unlock_shared</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        read_mtx.<span class="built_in">lock</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (--readers == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æœ€åä¸€ä¸ªè¯»è€…é‡Šæ”¾å†™é”</span></span><br><span class="line">            write_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        read_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">lock</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å†™è€…ç›´æ¥è·å–å†™é”ï¼Œè¿™ä¼šé˜»æ­¢æ–°çš„è¯»è€…</span></span><br><span class="line">        write_mtx.<span class="built_in">lock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">unlock</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        write_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå®ç°æœ‰ä¸ªé—®é¢˜ï¼šå¯èƒ½å¯¼è‡´å†™è€…é¥¥é¥¿</span></span><br><span class="line"><span class="comment">// å› ä¸ºåªè¦æœ‰è¯»è€…æŒç»­åˆ°æ¥ï¼Œå†™è€…å°±æ°¸è¿œæ— æ³•è·å¾—é”</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ThreeMutexRWLock</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">mutable</span> std::mutex read_mtx;     <span class="comment">// ä¿æŠ¤è¯»è€…è®¡æ•°</span></span><br><span class="line">    <span class="keyword">mutable</span> std::mutex write_mtx;    <span class="comment">// å†™è€…äº’æ–¥</span></span><br><span class="line">    <span class="keyword">mutable</span> std::mutex order_mtx;    <span class="comment">// ä¿è¯å…¬å¹³æ€§</span></span><br><span class="line">    <span class="keyword">mutable</span> <span class="type">int</span> readers = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">lock_shared</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        order_mtx.<span class="built_in">lock</span>();  <span class="comment">// ç¡®ä¿è¯»è€…å’Œå†™è€…æŒ‰é¡ºåºè·å–é”</span></span><br><span class="line">        read_mtx.<span class="built_in">lock</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (++readers == <span class="number">1</span>) &#123;</span><br><span class="line">            write_mtx.<span class="built_in">lock</span>();  <span class="comment">// ç¬¬ä¸€ä¸ªè¯»è€…é˜»æ­¢å†™è€…</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        read_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">        order_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">unlock_shared</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        read_mtx.<span class="built_in">lock</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (--readers == <span class="number">0</span>) &#123;</span><br><span class="line">            write_mtx.<span class="built_in">unlock</span>();  <span class="comment">// æœ€åä¸€ä¸ªè¯»è€…å…è®¸å†™è€…</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        read_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">lock</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        order_mtx.<span class="built_in">lock</span>();   <span class="comment">// å†™è€…ä¹Ÿè¦éµå®ˆé¡ºåº</span></span><br><span class="line">        write_mtx.<span class="built_in">lock</span>();   <span class="comment">// è·å–å†™é”</span></span><br><span class="line">        order_mtx.<span class="built_in">unlock</span>(); <span class="comment">// é‡Šæ”¾é¡ºåºé”ï¼Œå…è®¸åç»­æ“ä½œæ’é˜Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">unlock</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        write_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>round126-div2</title>
      <link href="/2025/05/03/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/round126-div2/"/>
      <url>/2025/05/03/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/round126-div2/</url>
      
        <content type="html"><![CDATA[<h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><p>ç§’åˆ‡ï¼Œæ³¨æ„ä½¿ç”¨long longã€‚</p><h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><p><a href="https://codeforces.com/contest/1661/problem/B">é¢˜ç›®é“¾æ¥</a><br>æœ¬é¢˜åœ¨æ¯”èµ›æ—¶å€™å¡äº†å¥½ä¹…â€¦æƒ³çš„æœ‰äº›å¤æ‚äº†â€¦æœ€åç®—å‡ºæ¥çš„æ—¶é—´å¤æ‚åº¦æ¯”ç»™å‡ºçš„ç­”æ¡ˆå°ä¸€äº›ï¼Œä½†ç»™å‡ºçš„ç­”æ¡ˆå†™çš„çœŸçš„å¾ˆç®€å•ã€‚<br>è¯¥é¢˜çš„å…³é”®æ‰¾åˆ°æ“ä½œçš„åŸºæœ¬ç‰¹å¾ï¼šä¸€ä¸ªè¾ƒä¸ºå°çš„æ“ä½œè‚¯å®šä¸ä¼šæœ‰ä»»ä½•ä¸€ä¸ªåŠ æ³•æ“ä½œåœ¨ä¹˜æ³•æ“ä½œä¹‹åã€‚å¯ä»¥é€šè¿‡ç§»ä½æ¥å»ç†è§£è¿™ä¸ªç‰¹ç‚¹ã€‚<br>åé¢ï¼Œæˆ‘æƒ³åˆ°äº†ä¸€ç»„æœ‰æ„ä¹‰çš„åŠ æ³•æ“ä½œï¼ˆèƒ½å¤Ÿæ›´æ¥è¿‘æ­£ç¡®ç­”æ¡ˆçš„ï¼‰åº”è¯¥æ˜¯åŠ ä¸Šå½“å‰æ•°çš„æœ€ä½1çš„æ•°å€¼ï¼Œä¸‹é¢ç»™å‡ºæˆ‘çš„è§£ç­”ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">32768</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">32769</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lowbit</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> level[N];</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"><span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>((<span class="number">1</span> &lt;&lt; j) &amp; i) &#123;</span><br><span class="line">level[i] = j + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(n--) &#123;</span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line"><span class="type">int</span> t = a;</span><br><span class="line"><span class="keyword">if</span>(f[a] != <span class="number">-1</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, f[a]);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> res = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt;= <span class="number">16</span>; a += <span class="built_in">lowbit</span>(a)) &#123;</span><br><span class="line">res = <span class="built_in">min</span>(res, k + <span class="number">16</span> - level[<span class="built_in">lowbit</span>(a)]);</span><br><span class="line">k += <span class="built_in">lowbit</span>(a);</span><br><span class="line">&#125;</span><br><span class="line">f[t] = res;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°åœ¨åŠ ä¸Šä¸€æ¬¡lowbit(x)ä¹‹åè¿˜éœ€è¦ç»§ç»­å»åˆ¤æ–­æ˜¯å¦è¿˜è¦å†åŠ lowbit(x+lowbit(x))ï¼Œå› æ­¤å½“æ—¶ä¸€ç›´WAã€‚<br>å…¶æ¬¡ï¼Œåœ¨åé¢åšçš„æ—¶å€™æˆ‘å¿½ç•¥äº†x&#x3D;0çš„æƒ…å†µï¼Œå¯¼è‡´ä¸€ç›´TLEã€‚<br>è™½ç„¶è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ä¼šè¾ƒä½ä¸€äº›ï¼Œä½†å®é™…ä¸Šç›´æ¥è¿›è¡Œéå†ä¹Ÿä¸ä¼šæœ‰å¾ˆå¤§é—®é¢˜ï¼Œåªæ˜¯å¸¸æ•°ç¨å¤§ä¸€äº›ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> n = readLine()!!.toInt()</span><br><span class="line">    <span class="keyword">val</span> a = readLine()!!.split(<span class="string">&#x27; &#x27;</span>).map &#123; it.toInt() &#125;.toIntArray()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (v <span class="keyword">in</span> a) &#123;</span><br><span class="line">        <span class="keyword">var</span> ans = <span class="number">20</span></span><br><span class="line">        <span class="keyword">for</span> (cntAdd <span class="keyword">in</span> <span class="number">0.</span><span class="number">.15</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (cntMul <span class="keyword">in</span> <span class="number">0.</span><span class="number">.15</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (((v + cntAdd) shl cntMul) % <span class="number">32768</span> == <span class="number">0</span>)</span><br><span class="line">                    ans = minOf(ans, cntAdd + cntMul)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        print(<span class="string">&quot;<span class="variable">$ans</span> &quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»™å¤§ä½¬è·ªäº†â€¦å¤§ä½¬çš„ä»£ç æ°¸è¿œæ˜¯è¿™ä¹ˆä¼˜é›…ã€‚</p><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><p><a href="https://codeforces.com/contest/1661/problem/C">åŸé¢˜é“¾æ¥</a><br>é¦–å…ˆéœ€è¦åˆ¤æ–­çš„é—®é¢˜æ˜¯ï¼šæ˜¯å¦æ ‘æœ€ç»ˆéœ€è¦ç”Ÿé•¿åˆ°æœ€åˆæ‰€æœ‰æ ‘çš„æœ€å¤§é«˜åº¦ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œä¾‹å¦‚$[1,1,1,1,1,2]$ï¼Œå°±æ˜¯ä¸€ä¸ªåä¾‹ï¼Œå› æ­¤åº”è¯¥æŸ¥æ‰¾çš„æ˜¯$\max$å’Œ$\max+1$ä¸¤ç§æƒ…å†µçš„æœ€å°å€¼ã€‚<br>æ‰¾åˆ°ä¸€ä¸ªæœ€å°æ—¶é—´å°±å¯ä»¥ä½¿ç”¨äºŒåˆ†çš„æ–¹æ³•æ¥æŸ¥æ‰¾ã€‚<br>ç»™å‡ºæˆ‘çš„ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">300001</span>;</span><br><span class="line"><span class="type">int</span> a[N], n, t;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line"><span class="keyword">while</span>(t--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n); </span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">LL mx = *<span class="built_in">max_element</span>(a+<span class="number">1</span>, a+<span class="number">1</span>+n);</span><br><span class="line">LL res = <span class="number">1e18</span>+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(LL m = mx; m &lt;= mx + <span class="number">1</span>; ++m) &#123;</span><br><span class="line">LL l = <span class="number">0</span>, r = <span class="number">1e18</span>;</span><br><span class="line"><span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">LL mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="comment">// cnt1 -&gt; even, cnt2 -&gt; odd</span></span><br><span class="line">LL cnt1 = (mid) / <span class="number">2</span>, cnt2 = (mid + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">LL tt = (LL)m - (LL)a[i];</span><br><span class="line"><span class="keyword">if</span>(tt / <span class="number">2</span> &lt;= cnt1) &#123;</span><br><span class="line">cnt1 -= tt / <span class="number">2</span>;</span><br><span class="line">tt = tt % <span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">tt -= cnt1 * <span class="number">2</span>;</span><br><span class="line">cnt1 = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tt &gt; cnt2) &#123;</span><br><span class="line">flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cnt2 -= tt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">l = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">res = <span class="built_in">min</span>(res, l);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="D"><a href="#D" class="headerlink" title="D"></a>D</h2><p>æˆ‘åªèƒ½æƒ³åˆ°$O(nk)$çš„è§£ã€‚ä¸‹é¢ç»™å‡ºå®˜æ–¹ç½‘ç«™ä¸Šçš„é¢˜è§£ã€‚</p><blockquote><p>Letâ€™s solve the problem greedily. But not from the beginning, because if we solve it from the beginning, we canâ€™t be sure what option is more optimal for the next elements (e.g. for the second element it is not clear if we need to add $2$ to it starting our segment from the first position or add $1$ to it starting our segment from the second position). So, letâ€™s solve the problem from right to left, then anything becomes clearer.<br>Actually, letâ€™s operate with the array $b$ and decrease its elements instead of using some other array. Letâ€™s carry some variables: $sum$, $cnt$ and the array $closed$ of length $n$ (along with the answer). The variable $sum$ means the value we need to subtract from the current element from currently existing progressions, $cnt$ is the number of currently existing progressions, and $closed_i$ means the number of progressions that will end at the position $i+1$ (i.e. will not add anything from the position $i$ and further to the left).<br>When we consider the element $i$, firstly letâ€™s fix $sum$ (decrease it by $cnt$). Then, letâ€™s fix $cnt$ (decrease it by $closed_i$). Then, letâ€™s decrease $b_i$ by $sum$, and if it becomes less than or equal to zero, just proceed. Otherwise, the number by which we can decrease the $i$-th element with one progression, equals to $el&#x3D;\min(k,i+1)$ (zero-indexed). Then the number of progressions we need to satisfy this element is $need&#x3D;âŒˆb_i&#x2F;elâŒ‰$. Letâ€™s add this number to the answer, increase $sum$ by $elâ‹…need$, increase $cnt$ by $need$, and if $iâˆ’elâ‰¥0$ then we need to end these progressions somewhere, so letâ€™s add $need$ to $closed_{iâˆ’el}$.</p></blockquote><p>ç¬¬ä¸€æ®µæ¯”è¾ƒå¥½æ‡‚ï¼ŒæŒ‰ä¸‹ä¸è¡¨ã€‚<br>éœ€è¦è®¾ç½®ä¸‰ä¸ªå˜é‡ï¼š$sum$ï¼Œ$cnt$ï¼Œå’Œæ•°ç»„$closed$ã€‚æˆ‘ä»¬æŠŠä¸€æ¬¡ç­‰å·®æ•°åˆ—çš„ç›¸åŠ ç§°ä¸ºâ€ä¸€æ¬¡è½¬åŒ–â€œã€‚<br>$sum$è¡¨ç¤ºçš„æ˜¯åœ¨å½“å‰å·²ç»å¢åŠ çš„è½¬åŒ–æ“ä½œä¸­ï¼Œå½“å‰å…ƒç´ éœ€è¦å‡å»çš„å€¼ã€‚<br>$cnt$è¡¨ç¤ºçš„æ˜¯å¾ªç¯åˆ°è¯¥å˜é‡ï¼Œè®¡ç®—å‡ºçš„éœ€è¦è½¬æ¢çš„æ¬¡æ•°ã€‚é‚£ä¹ˆå¯¹äºå‰ä¸€ä¸ªå˜é‡æ¥è¯´ï¼Œè€ƒè™‘æ–°åŠ å…¥çš„è½¬åŒ–ä¹‹å‰ï¼Œéœ€è¦è€ƒè™‘å‰é¢æ‰€æœ‰è½¬åŒ–å¯¼è‡´ä»–å˜åŒ–çš„å€¼ï¼Œä¹Ÿå°±æ˜¯$sum-cnt$ï¼ˆå› ä¸ºæ˜¯ç­‰å·®æ•°åˆ—ï¼‰ã€‚<br>$closed_i$è¡¨ç¤ºçš„æ˜¯åœ¨$i+1$æ—¶ä»ç„¶ä½œç”¨çš„è½¬åŒ–ï¼Œå¹¶åœ¨$i$å¤„æ— æ³•ä½œç”¨çš„è½¬åŒ–æ•°é‡ã€‚è¿™ä¸ªæ˜¯ç”¨äºæ›´æ–°å½“å‰çš„$cnt$å€¼ï¼Œä¹Ÿæ­£æ˜¯ç”±äºè¯¥æ•°ç»„ï¼Œå¯ä»¥è®©åŸæœ¬çš„$O(nk)$é™è‡³$O(n)$ï¼Œæ˜¯å…¸å‹çš„ç©ºé—´æ¢æ—¶é—´ã€‚<br>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line"><span class="comment">//  freopen(&quot;output.txt&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">b</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;it : b) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;it);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">closed</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> sum = <span class="number">0</span>, cnt = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        sum -= cnt;</span><br><span class="line">        cnt -= closed[i];</span><br><span class="line">        b[i] -= sum;</span><br><span class="line">        <span class="keyword">if</span> (b[i] &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> el = <span class="built_in">min</span>(i + <span class="number">1</span>, k);</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> need = (b[i] + el - <span class="number">1</span>) / el;</span><br><span class="line">        sum += need * el;</span><br><span class="line">        cnt += need;</span><br><span class="line">        ans += need;</span><br><span class="line">        <span class="keyword">if</span> (i - el &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            closed[i - el] += need;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> codeforces </category>
          
          <category> div2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> codeforces </tag>
            
            <tag> div2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤æ—©gem5æºç å­¦ä¹ </title>
      <link href="/2025/05/03/gem5/%E5%8F%A4%E6%97%A9gem5%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/05/03/gem5/%E5%8F%A4%E6%97%A9gem5%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>ä¸»è¦æ˜¯å…³äºgem5çš„å†…å­˜éƒ¨åˆ†çš„å­¦ä¹ è®°å½•ï¼Œè®°å½•æ¯”è¾ƒç²—ç³™ï¼Œè¯·å‹¿åœ¨æ„ã€‚</p><p><code>MemoryObject</code>ç»§æ‰¿äº†<code>ClockedObject</code>ï¼Œ<code>ClockedObject</code>ç»§æ‰¿äº†<code>SimObject</code>ã€‚<code>SimObject</code>æ˜¯æœ€ä¸Šå±‚çš„æŠ½è±¡ç±»ï¼Œå¯ä»¥ä»£è¡¨æ‰€æœ‰çš„ç‰©ç†éƒ¨ä»¶ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚</p><blockquote><p>SimObject initialization is controlled by the instantiate method in src&#x2F;python&#x2F;m5&#x2F;simulate.py. There are slightly different initialization paths when starting the simulation afresh and when loading from a checkpoint.  After instantiation and connecting ports, simulate.py initializes the object using the following call sequence:</p><ol><li>SimObject::init()<li>SimObject::regStats()<li><ul><li>SimObject::initState() if starting afresh.<li>SimObject::loadState() if restoring from a checkpoint.</ul><li>SimObject::resetStats()<li>SimObject::startup()<li>Drainable::drainResume() if resuming from a checkpoint.</ol></blockquote><p><code>ClockedObject</code>å¢åŠ äº†æ—¶é’Ÿå’Œä¸è®¡æ—¶æœ‰å…³çš„ç»§æ‰¿å‡½æ•°ï¼Œèƒ½å¤Ÿè®°å½•å¯¹è±¡çš„å‘¨æœŸã€‚</p><p>è€Œ<code>MemObject</code>åˆ™æ˜¯ä¸€ä¸ªæä¾›äº†è·å–<code>master</code>å’Œ<code>slave</code>ç«¯å£çš„ï¼ŒåŒæ—¶æœ‰æ—¶é’Ÿå‘¨æœŸçš„å¯¹è±¡ã€‚å½“ç„¶ï¼Œ<code>MemObject</code>æœ¬èº«å°±æ˜¯ä¸€ä¸ªéå¸¸æŠ½è±¡çš„ç±»ï¼Œä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ã€‚</p><p><code>AbstractMemory</code>ç»§æ‰¿äº†<code>MemObject</code>ï¼Œå®ƒæ˜¯ä¸åŒå†…å­˜å®ç°çš„æœ€è¿‘çš„çˆ¶ç±»ã€‚å®ƒä»£è¡¨äº†è¿ç»­çš„ç‰©ç†å†…å­˜å¿«ï¼Œæœ‰ç›¸å…³è”çš„åœ°å€èŒƒå›´ï¼Œæä¾›äº†åŸºæœ¬çš„è¯»å†™å†…å­˜åŠŸèƒ½ã€‚å®ƒè‡³å°‘æœ‰ä¸€ä¸ª<code>slave</code>ç«¯å£ã€‚å…¶ä¸­æœ‰ä¸¤ä¸ªè·å–å†…å­˜çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯<code>access</code>ä¸€ä¸ªæ˜¯<code>functionalAccess</code>ï¼Œå‰è€…éœ€è¦æ ¹æ®å¯¹åº”çš„åœ°å€æ›´æ–°å†…å­˜çš„çŠ¶æ€ï¼Œåè€…å¹¶ä¸ä¼šæ”¹å˜å†…å­˜æœ¬èº«ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šç»Ÿè®¡è¿™ä¸€æ–¹æ³•çš„æ•°æ®ã€‚æ˜¾ç„¶ï¼Œ<code>access</code>æ˜¯æ›´ä¸ºå¤æ‚çš„æ–¹æ³•ã€‚ä¸‹é¢ä»‹ç»<code>access</code>çš„åŸºæœ¬æ€è·¯ï¼š</p><ol><li><code>access</code>ä¼ å…¥ä¸€ä¸ªç±»å‹ä¸º<code>PacketPtr</code>çš„æ•°æ®åŒ…æŒ‡é’ˆï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰å¿…é¡»çš„è¯·æ±‚å†…å®¹ã€‚</li><li>æ£€æŸ¥è¯¥è¯·æ±‚ä½œç”¨çš„åœ°å€èŒƒå›´æ˜¯å¦æ˜¯è¯¥å†…å­˜çš„å­é›†ã€‚</li><li>æ£€æŸ¥è¯¥æ•°æ®åŒ…çš„<code>MEM_INHIBIT</code>ä½æ˜¯å¦ä¸º1ï¼Œè‹¥ä¸º0ï¼Œåˆ™æ— æ³•ä½¿ç”¨<code>access</code>æ–¹æ³•è¿›è¡Œæ“ä½œã€‚</li><li><code>hostAddr</code>è®¡ç®—äº†éœ€è¦ä½œç”¨å†…å­˜çš„ç‰©ç†åœ°å€ã€‚</li><li>æ•°æ®åŒ…å¯èƒ½æœ‰å››ç§æƒ…å†µï¼Œå…¶ä¸­ä¸‰ç§æƒ…å†µæ˜¯æœ‰æ•ˆçš„ï¼š<ol><li>è‹¥è¯·æ±‚æ•°æ®åŒ…çš„ç±»å‹æ˜¯<code>MemCmd::SwapReq</code>ï¼Œä¸€ä¸ªæ•°æ®äº¤æ¢çš„è¯·æ±‚ã€‚å°†å¯¹åº”ç‰©ç†åœ°å€å‚¨å­˜çš„æ•°æ®æ”¾å…¥æ•°æ®åŒ…ä¸­ï¼Œå°†æ•°æ®åŒ…ä¸­å‚¨å­˜çš„æ•°æ®æ”¾å…¥ä¸´æ—¶å˜é‡<code>overwrite_val</code>ä¸­ã€‚åœ¨äº¤æ¢æ•°æ®ä¸­ï¼Œè¿˜æœ‰ä¸¤ç§åŒºåˆ«ã€‚ä¸€ç§æ˜¯ç›´æ¥äº¤æ¢ï¼Œä¸€ç§æ˜¯å¦‚æœå†…å­˜å¯¹åº”ä½ç½®çš„æ•°æ®å¦‚æœå’Œ<code>condition_val</code>ç›¸åŒï¼Œæ‰è¿›è¡Œäº¤æ¢ã€‚äº¤æ¢æ“ä½œç»“æŸåï¼Œä¼šæ£€æŸ¥è¯¥è¯·æ±‚ä¸æ˜¯è·å–æŒ‡ä»¤çš„è¯·æ±‚ã€‚å¹¶æ ¹æ®è¯·æ±‚çš„<code>masterId</code>å°†<code>numOther</code>å¯¹åº”çš„è®¡æ•°å™¨è‡ªå¢1ã€‚</li><li>è‹¥è¯·æ±‚æ•°æ®åŒ…çš„ç±»å‹æ˜¯è¯»è¯·æ±‚ï¼Œé¦–å…ˆåˆ¤æ–­è¯¥è¯·æ±‚ä¸æ˜¯å†™è¯·æ±‚ã€‚è‹¥è¯¥æ•°æ®åŒ…æ˜¯LLSCç±»å‹çš„ï¼Œè¿˜éœ€è¦è°ƒç”¨<code>trackLoadLocked</code>æ–¹æ³•ï¼Œå°†è¯¥è¯·æ±‚åŠ å…¥<code>lockedAddrList</code>ä¸­ã€‚ç„¶åå°†å¯¹åº”åœ°å€å‚¨å­˜çš„æ•°æ®å†™å…¥æ•°æ®åŒ…ä¸­ï¼Œå°†<code>numReads</code>å¯¹åº”çš„<code>masterId</code>è‡ªå¢1ï¼Œå¹¶è®°å½•è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦‚æœæ˜¯è·å–æŒ‡ä»¤çš„è¯·æ±‚ï¼Œè¿˜éœ€è¦å¢åŠ è·å–æŒ‡ä»¤çš„å­—èŠ‚æ•°ã€‚</li><li>å¦‚æœè¯·æ±‚æ•°æ®åŒ…æ˜¯å†™è¯·æ±‚ï¼Œé¦–å…ˆæŸ¥çœ‹æ˜¯å¦å¯ä»¥è¿›è¡Œå†™æ“ä½œï¼ˆè¯¥è¯·æ±‚æ˜¯å¦åœ¨<code>lockedAddrList</code>ä¸­ï¼Œå¦‚æœåœ¨åˆ—è¡¨ä¸­æ˜¯å¦åˆèƒ½å†™å…¥ï¼‰ï¼Œå†™å…¥å®Œæˆåå†è¿›è¡ŒåŒä¸Šçš„æ•°æ®è®°å½•ã€‚</li></ol></li><li>å¦‚æœè¿™ä¸ªæ•°æ®åŒ…éœ€è¦å›å¤ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¡«å…¥å›å¤æ•°æ®çš„å†…å®¹ã€‚</li></ol><p>ç°åœ¨ï¼Œè¿™ä¸€éƒ¨åˆ†çš„å†…å®¹å³å°†ä¸¢å¼ƒï¼</p><h2 id="Full-Systemæ¶æ„è§£æ"><a href="#Full-Systemæ¶æ„è§£æ" class="headerlink" title="Full Systemæ¶æ„è§£æ"></a>Full Systemæ¶æ„è§£æ</h2><p>æˆ‘å³å°†å¼€å§‹é˜…è¯»fs.pyçš„ä»£ç ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add options</span></span><br><span class="line">parser = optparse.OptionParser()</span><br><span class="line">Options.addCommonOptions(parser)</span><br><span class="line">Options.addFSOptions(parser)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add the ruby specific and protocol specific options</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;--ruby&#x27;</span> <span class="keyword">in</span> sys.argv:</span><br><span class="line">    Ruby.define_options(parser)</span><br><span class="line">    </span><br><span class="line">(options, args) = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> args:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: script doesn&#x27;t take any positional arguments&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>åˆ›å»ºäº†ä¸€ä¸ªparserç±»ï¼Œæ·»åŠ äº†gem5åŸºæœ¬çš„é…ç½®ä»¥åŠFSæ¨¡å¼ä¸‹é…ç½®çš„æ‰€æœ‰é€‰é¡¹ã€‚å¦‚æœåœ¨æ„å»ºç³»ç»Ÿæ—¶éœ€è¦ä½¿ç”¨rubyï¼Œè¿˜éœ€è¦åœ¨Rubyç±»ä¸­æ·»åŠ é¢„å®šä¹‰çš„é€‰é¡¹ã€‚ç„¶åä½¿ç”¨<code>parse_args</code>æ–¹æ³•è¿”å›å¯¹åº”çš„optionså’Œargsã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># system under test can be any CPU</span></span><br><span class="line">(TestCPUClass, test_mem_mode, FutureClass) = Simulation.setCPUClass(options)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Match the memories with the CPUs, based on the options for the test system</span></span><br><span class="line">TestMemClass = Simulation.setMemClass(options)</span><br></pre></td></tr></table></figure><p><code>setCPUClass</code>ä¼šè¿”å›ä¸¤ä¸ªCPUç±»å‹ï¼Œä¸€ä¸ªæ˜¯TestCPUClassï¼Œä¸€ä¸ªæ˜¯FutureClassã€‚å¦‚æœåœ¨optionsä¸­æœ‰è®¾ç½®äº†<code>checkpoint_restore</code>æˆ–è€…<code>fast_forward</code>ï¼Œä¼šå°†optionsä¸­æŒ‡å®šçš„<code>cpu_type</code>å­˜å…¥<code>FutureClass</code>ä¸­ï¼Œ<code>TestCPUClass</code>ä¸ºå¯¹åº”çš„é€‰é¡¹æŒ‡å®šçš„ç±»å‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>test_mem_mode</code>çš„ç±»å‹ä¸<code>TestCPUClass</code>ç›¸å¯¹åº”ã€‚</p><p><code>setMemClass</code>è¿”å›äº†ä¸€ä¸ªå†…å­˜æ§åˆ¶å™¨ç±»å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> options.benchmark:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        bm = Benchmarks[options.benchmark]</span><br><span class="line">    <span class="keyword">except</span> KeyError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Error benchmark %s has not been defined.&quot;</span> % options.benchmark)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Valid benchmarks are: %s&quot;</span> % DefinedBenchmarks)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> options.dual:</span><br><span class="line">        bm = [SysConfig(disks=options.disk_image, rootdev=options.root_device,</span><br><span class="line">                        mem=options.mem_size, os_type=options.os_type),</span><br><span class="line">              SysConfig(disks=options.disk_image, rootdev=options.root_device,</span><br><span class="line">                        mem=options.mem_size, os_type=options.os_type)]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        bm = [SysConfig(disks=options.disk_image, rootdev=options.root_device,</span><br><span class="line">                        mem=options.mem_size, os_type=options.os_type)]</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>options</code>ä¸­å¸¦æœ‰<code>benchmark</code>ï¼Œåˆ™å¯»æ‰¾å¯¹åº”çš„æµ‹è¯•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆç›´æ¥åˆ›å»ºé»˜è®¤çš„benchmarkã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np = options.num_cpus</span><br><span class="line"></span><br><span class="line">test_sys = build_test_system(np)</span><br></pre></td></tr></table></figure><p>æ ¹æ®æŒ‡å®šçš„cpuæ•°é‡åˆ›å»ºå¯¹åº”çš„æµ‹è¯•ç³»ç»Ÿã€‚</p><p>ä¸‹é¢ä»‹ç»<code>build_test_system</code>å‡½æ•°ã€‚å®ƒæ ¹æ®<code>options</code>æ„å»ºäº†å¯¹åº”çš„æµ‹è¯•ç³»ç»Ÿã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">build_test_system</span>(<span class="params">np</span>):</span><br><span class="line">    cmdline = cmd_line_template()</span><br><span class="line">    <span class="keyword">if</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] == <span class="string">&quot;mips&quot;</span>:</span><br><span class="line">        test_sys = makeLinuxMipsSystem(test_mem_mode, bm[<span class="number">0</span>], cmdline=cmdline)</span><br><span class="line">    <span class="keyword">elif</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] == <span class="string">&quot;sparc&quot;</span>:</span><br><span class="line">        test_sys = makeSparcSystem(test_mem_mode, bm[<span class="number">0</span>], cmdline=cmdline)</span><br><span class="line">    <span class="keyword">elif</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] == <span class="string">&quot;riscv&quot;</span>:</span><br><span class="line">        test_sys = makeBareMetalRiscvSystem(test_mem_mode, bm[<span class="number">0</span>],</span><br><span class="line">                                            cmdline=cmdline)</span><br><span class="line">    <span class="keyword">elif</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] == <span class="string">&quot;x86&quot;</span>:</span><br><span class="line">        test_sys = makeLinuxX86System(test_mem_mode, np, bm[<span class="number">0</span>], options.ruby,</span><br><span class="line">                                      cmdline=cmdline)</span><br><span class="line">    <span class="keyword">elif</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] == <span class="string">&quot;arm&quot;</span>:</span><br><span class="line">        test_sys = makeArmSystem(</span><br><span class="line">            test_mem_mode,</span><br><span class="line">            options.machine_type,</span><br><span class="line">            np,</span><br><span class="line">            bm[<span class="number">0</span>],</span><br><span class="line">            options.dtb_filename,</span><br><span class="line">            bare_metal=options.bare_metal,</span><br><span class="line">            cmdline=cmdline,</span><br><span class="line">            external_memory=options.external_memory_system,</span><br><span class="line">            ruby=options.ruby,</span><br><span class="line">            security=options.enable_security_extensions,</span><br><span class="line">            vio_9p=options.vio_9p,</span><br><span class="line">            bootloader=options.bootloader,</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> options.enable_context_switch_stats_dump:</span><br><span class="line">            test_sys.enable_context_switch_stats_dump = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fatal(<span class="string">&quot;Incapable of building %s full system!&quot;</span>, buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>])</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œæ ¹æ®<code>buildEnv</code>æ„å»ºæŒ‡å®šçš„æ¶æ„ç³»ç»Ÿã€‚ç”±äºæˆ‘éœ€è¦æ„å»ºçš„æ˜¯x86ç³»ç»Ÿï¼Œæ‰€ä»¥å†æ¥æŸ¥çœ‹<code>makeLinuxX86System</code>å‡½æ•°ã€‚ç”±äºåœ¨<code>makeLinuxX86System</code>ä¸­é¦–å…ˆè°ƒç”¨äº†<code>makeX86System</code>ï¼Œæ‰€ä»¥é¦–å…ˆå…ˆä»‹ç»è¯¥å‡½æ•°ã€‚ç”±äºåœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œ<code>workload</code>æŒ‡å®šä¸ºç”±<code>x86FSLinux</code>äº§ç”Ÿçš„ï¼Œå¦‚æœworkloadä¸ºç©ºï¼Œåˆ™ç›´æ¥ä½¿ç”¨<code>X86FSWorkload</code>ç”Ÿæˆï¼›å¦‚æœ<code>mdesc</code>ä¸ºç©ºï¼Œé‚£ä¹ˆè°ƒç”¨<code>SysConfig</code>æ„å»ºåŸºæœ¬çš„ç³»ç»Ÿé…ç½®ï¼ˆå½“ç„¶åœ¨full systemçš„è®¾ç½®ä¸­å·²ç»æŒ‡å®šå¥½äº†ç³»ç»Ÿé…ç½®ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">makeX86System</span>(<span class="params">mem_mode, numCPUs=<span class="number">1</span>, mdesc=<span class="literal">None</span>, workload=<span class="literal">None</span>, Ruby=<span class="literal">False</span></span>):</span><br><span class="line">    self = System()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> workload <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        workload = X86FsWorkload()</span><br><span class="line">    self.workload = workload</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> mdesc:</span><br><span class="line">        <span class="comment"># generic system</span></span><br><span class="line">        mdesc = SysConfig()</span><br><span class="line">    self.readfile = mdesc.script()</span><br><span class="line"></span><br><span class="line">    self.mem_mode = mem_mode</span><br></pre></td></tr></table></figure><p>ç”±äºåœ¨X86å¹³å°ä¸Šå†…å­˜çš„[0xC0000000, 0xFFFFFFFF]åŒºé—´å°†ä¼šé¢„ç•™ç»™è®¾å¤‡ä½¿ç”¨ï¼Œå› æ­¤å½“ç‰©ç†å†…å­˜å¤§äº3GBæ—¶ï¼Œå°†ä¼šå°†ç‰©ç†å†…å­˜æ°›å›´ä¸¤éƒ¨åˆ†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Physical memory</span></span><br><span class="line"><span class="comment"># On the PC platform, the memory region 0xC0000000-0xFFFFFFFF is reserved</span></span><br><span class="line"><span class="comment"># for various devices.  Hence, if the physical memory size is greater than</span></span><br><span class="line"><span class="comment"># 3GB, we need to split it into two parts.</span></span><br><span class="line">excess_mem_size = \</span><br><span class="line">    convert.toMemorySize(mdesc.mem()) - convert.toMemorySize(<span class="string">&#x27;3GB&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> excess_mem_size &lt;= <span class="number">0</span>:</span><br><span class="line">    self.mem_ranges = [AddrRange(mdesc.mem())]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    warn(<span class="string">&quot;Physical memory size specified is %s which is greater than &quot;</span> \</span><br><span class="line">         <span class="string">&quot;3GB.  Twice the number of memory controllers would be &quot;</span> \</span><br><span class="line">         <span class="string">&quot;created.&quot;</span>  % (mdesc.mem()))</span><br><span class="line"></span><br><span class="line">    self.mem_ranges = [AddrRange(<span class="string">&#x27;3GB&#x27;</span>),</span><br><span class="line">        AddrRange(Addr(<span class="string">&#x27;4GB&#x27;</span>), size = excess_mem_size)]</span><br></pre></td></tr></table></figure><p>Pc()æ˜¯åœ¨x86æ¶æ„ä¸­platformï¼Œå…¶ä¸­åŒ…å«äº†æŒ‡å‘ç³»ç»Ÿçš„æŒ‡é’ˆï¼Œä»¥åŠä¸€ä¸ªå—æ¡¥æŒ‡é’ˆã€‚é¡ºå¸¦ä¸€æï¼Œåœ¨src&#x2F;dev&#x2F;x86ä¸­æœ‰x86å¿…è¦çš„å‡ ä¸ªèŠ¯ç‰‡å®ç°ã€‚å—æ¡¥æ¨¡å—å°†è¿™äº›èŠ¯ç‰‡è¿æ¥èµ·æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Platform</span></span><br><span class="line">self.pc = Pc()</span><br></pre></td></tr></table></figure><h3 id="å†…å­˜ç³»ç»Ÿåˆ›å»º"><a href="#å†…å­˜ç³»ç»Ÿåˆ›å»º" class="headerlink" title="å†…å­˜ç³»ç»Ÿåˆ›å»º"></a>å†…å­˜ç³»ç»Ÿåˆ›å»º</h3><p>ç„¶åå¦‚æœè®¾ç½®äº†Rubyï¼Œåˆ™ä¼šåˆ›å»ºå¸¦æœ‰Rubyçš„X86å†…å­˜ç³»ç»Ÿã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œå°±ä¼šåˆ›å»ºä¼ ç»Ÿçš„X86å†…å­˜ç³»ç»Ÿã€‚è¿™é‡Œé¦–å…ˆæ¥çœ‹ä¼ ç»Ÿå†…å­˜ç³»ç»Ÿã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create and connect the busses required by each memory system</span></span><br><span class="line"><span class="keyword">if</span> Ruby:</span><br><span class="line">    connectX86RubySystem(self)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    connectX86ClassicSystem(self, numCPUs)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåŸºæœ¬X86ç³»ç»Ÿçš„å¤§è‡´æ¶æ„ã€‚IOåœ°å€ç©ºé—´ä»0x8000000000000000èµ·ï¼Œpcié…ç½®åœ°å€ç©ºé—´ç”±0xc000000000000000èµ·ï¼Œä¸­æ–­åœ°å€ç©ºé—´ç”±0xa000000000000000èµ·ã€‚ç„¶ååˆ›å»ºæœ‰å…³x86ç³»ç»Ÿçš„å†…å­˜æ€»çº¿ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œæ•°æ®ä¿¡æ¯çš„ä¼ è¾“è¿‡ç¨‹æ˜¯membus-&gt;bridge-&gt;ious,iobusçš„masterï¼ˆmem_side_portsï¼‰ç«¯å£ä¸å¾ˆå¤šè®¾å¤‡ç›¸è¿ï¼ŒåŒæ—¶ä¹Ÿä¼šå®šäº†bridgeèƒ½å¤Ÿæ¥å—çš„åœ°å€èŒƒå›´ã€‚ç„¶ååˆåœ¨ç³»ç»Ÿä¸­åˆ›å»ºäº†apicbrigeï¼Œæ”¯æŒæ•°æ®ä»iobus-&gt;apicbridge-&gt;membusçš„æµç¨‹ï¼Œè¯¥æ¡¥åªèƒ½æ”¯æŒä¸­æ–­åŸºåœ°å€åˆ°cpuæ•°ä¹˜APICèŒƒå›´çš„æ”¯æŒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">connectX86ClassicSystem</span>(<span class="params">x86_sys, numCPUs</span>):</span><br><span class="line">    <span class="comment"># Constants similar to x86_traits.hh</span></span><br><span class="line">    IO_address_space_base = <span class="number">0x8000000000000000</span></span><br><span class="line">    pci_config_address_space_base = <span class="number">0xc000000000000000</span></span><br><span class="line">    interrupts_address_space_base = <span class="number">0xa000000000000000</span></span><br><span class="line">    APIC_range_size = <span class="number">1</span> &lt;&lt; <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line">    x86_sys.membus = MemBus()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># North Bridge</span></span><br><span class="line">    x86_sys.iobus = IOXBar()</span><br><span class="line">    x86_sys.bridge = Bridge(delay=<span class="string">&#x27;50ns&#x27;</span>)</span><br><span class="line">    x86_sys.bridge.mem_side_port = x86_sys.iobus.cpu_side_ports</span><br><span class="line">    x86_sys.bridge.cpu_side_port = x86_sys.membus.mem_side_ports</span><br><span class="line">    <span class="comment"># Allow the bridge to pass through:</span></span><br><span class="line">    <span class="comment">#  1) kernel configured PCI device memory map address: address range</span></span><br><span class="line">    <span class="comment">#     [0xC0000000, 0xFFFF0000). (The upper 64kB are reserved for m5ops.)</span></span><br><span class="line">    <span class="comment">#  2) the bridge to pass through the IO APIC (two pages, already contained in 1),</span></span><br><span class="line">    <span class="comment">#  3) everything in the IO address range up to the local APIC, and</span></span><br><span class="line">    <span class="comment">#  4) then the entire PCI address space and beyond.</span></span><br><span class="line">    x86_sys.bridge.ranges = \</span><br><span class="line">        [</span><br><span class="line">        AddrRange(<span class="number">0xC0000000</span>, <span class="number">0xFFFF0000</span>),</span><br><span class="line">        AddrRange(IO_address_space_base,</span><br><span class="line">                  interrupts_address_space_base - <span class="number">1</span>),</span><br><span class="line">        AddrRange(pci_config_address_space_base,</span><br><span class="line">                  Addr.<span class="built_in">max</span>)</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create a bridge from the IO bus to the memory bus to allow access to</span></span><br><span class="line">    <span class="comment"># the local APIC (two pages)</span></span><br><span class="line">    x86_sys.apicbridge = Bridge(delay=<span class="string">&#x27;50ns&#x27;</span>)</span><br><span class="line">    x86_sys.apicbridge.cpu_side_port = x86_sys.iobus.mem_side_ports</span><br><span class="line">    x86_sys.apicbridge.mem_side_port = x86_sys.membus.cpu_side_ports</span><br><span class="line">    x86_sys.apicbridge.ranges = [AddrRange(interrupts_address_space_base,</span><br><span class="line">                                           interrupts_address_space_base +</span><br><span class="line">                                           numCPUs * APIC_range_size</span><br><span class="line">                                           - <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># connect the io bus</span></span><br><span class="line">    x86_sys.pc.attachIO(x86_sys.iobus)</span><br><span class="line"></span><br><span class="line">    x86_sys.system_port = x86_sys.membus.cpu_side_ports</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.intrctrl = IntrControl() <span class="comment"># æœ€æ–°çš„gem5å·²ç»åˆ é™¤</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Disks</span></span><br><span class="line">disks = makeCowDisks(mdesc.disks())</span><br><span class="line">self.pc.south_bridge.ide.disks = disks</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add in a Bios information structure.</span></span><br><span class="line">structures = [X86SMBiosBiosInformation()]</span><br><span class="line">workload.smbios_table.structures = structures</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set up the Intel MP table</span></span><br><span class="line">base_entries = []</span><br><span class="line">ext_entries = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numCPUs):</span><br><span class="line">    bp = X86IntelMPProcessor(</span><br><span class="line">            local_apic_id = i,</span><br><span class="line">            local_apic_version = <span class="number">0x14</span>,</span><br><span class="line">            enable = <span class="literal">True</span>,</span><br><span class="line">            bootstrap = (i == <span class="number">0</span>))</span><br><span class="line">    base_entries.append(bp)</span><br><span class="line">io_apic = X86IntelMPIOAPIC(</span><br><span class="line">        <span class="built_in">id</span> = numCPUs,</span><br><span class="line">        version = <span class="number">0x11</span>,</span><br><span class="line">        enable = <span class="literal">True</span>,</span><br><span class="line">        address = <span class="number">0xfec00000</span>)</span><br><span class="line">self.pc.south_bridge.io_apic.apic_id = io_apic.<span class="built_in">id</span></span><br><span class="line">base_entries.append(io_apic)</span><br><span class="line"><span class="comment"># In gem5 Pc::calcPciConfigAddr(), it required &quot;assert(bus==0)&quot;,</span></span><br><span class="line"><span class="comment"># but linux kernel cannot config PCI device if it was not connected to</span></span><br><span class="line"><span class="comment"># PCI bus, so we fix PCI bus id to 0, and ISA bus id to 1.</span></span><br><span class="line">pci_bus = X86IntelMPBus(bus_id = <span class="number">0</span>, bus_type=<span class="string">&#x27;PCI   &#x27;</span>)</span><br><span class="line">base_entries.append(pci_bus)</span><br><span class="line">isa_bus = X86IntelMPBus(bus_id = <span class="number">1</span>, bus_type=<span class="string">&#x27;ISA   &#x27;</span>)</span><br><span class="line">base_entries.append(isa_bus)</span><br><span class="line">connect_busses = X86IntelMPBusHierarchy(bus_id=<span class="number">1</span>,</span><br><span class="line">        subtractive_decode=<span class="literal">True</span>, parent_bus=<span class="number">0</span>)</span><br><span class="line">ext_entries.append(connect_busses)</span><br><span class="line">pci_dev4_inta = X86IntelMPIOIntAssignment(</span><br><span class="line">        interrupt_type = <span class="string">&#x27;INT&#x27;</span>,</span><br><span class="line">        polarity = <span class="string">&#x27;ConformPolarity&#x27;</span>,</span><br><span class="line">        trigger = <span class="string">&#x27;ConformTrigger&#x27;</span>,</span><br><span class="line">        source_bus_id = <span class="number">0</span>,</span><br><span class="line">        source_bus_irq = <span class="number">0</span> + (<span class="number">4</span> &lt;&lt; <span class="number">2</span>),</span><br><span class="line">        dest_io_apic_id = io_apic.<span class="built_in">id</span>,</span><br><span class="line">        dest_io_apic_intin = <span class="number">16</span>)</span><br><span class="line">base_entries.append(pci_dev4_inta)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">assignISAInt</span>(<span class="params">irq, apicPin</span>):</span><br><span class="line">    assign_8259_to_apic = X86IntelMPIOIntAssignment(</span><br><span class="line">            interrupt_type = <span class="string">&#x27;ExtInt&#x27;</span>,</span><br><span class="line">            polarity = <span class="string">&#x27;ConformPolarity&#x27;</span>,</span><br><span class="line">            trigger = <span class="string">&#x27;ConformTrigger&#x27;</span>,</span><br><span class="line">            source_bus_id = <span class="number">1</span>,</span><br><span class="line">            source_bus_irq = irq,</span><br><span class="line">            dest_io_apic_id = io_apic.<span class="built_in">id</span>,</span><br><span class="line">            dest_io_apic_intin = <span class="number">0</span>)</span><br><span class="line">    base_entries.append(assign_8259_to_apic)</span><br><span class="line">    assign_to_apic = X86IntelMPIOIntAssignment(</span><br><span class="line">            interrupt_type = <span class="string">&#x27;INT&#x27;</span>,</span><br><span class="line">            polarity = <span class="string">&#x27;ConformPolarity&#x27;</span>,</span><br><span class="line">            trigger = <span class="string">&#x27;ConformTrigger&#x27;</span>,</span><br><span class="line">            source_bus_id = <span class="number">1</span>,</span><br><span class="line">            source_bus_irq = irq,</span><br><span class="line">            dest_io_apic_id = io_apic.<span class="built_in">id</span>,</span><br><span class="line">            dest_io_apic_intin = apicPin)</span><br><span class="line">    base_entries.append(assign_to_apic)</span><br><span class="line">assignISAInt(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">assignISAInt(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>, <span class="number">15</span>):</span><br><span class="line">    assignISAInt(i, i)</span><br><span class="line">workload.intel_mp_table.base_entries = base_entries</span><br><span class="line">workload.intel_mp_table.ext_entries = ext_entries</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> self</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">makeLinuxX86System</span>(<span class="params">mem_mode, numCPUs=<span class="number">1</span>, mdesc=<span class="literal">None</span>, Ruby=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">                       cmdline=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment"># Build up the x86 system and then specialize it for Linux</span></span><br><span class="line">    self = makeX86System(mem_mode, numCPUs, mdesc, X86FsLinux(), Ruby)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># We assume below that there&#x27;s at least 1MB of memory. We&#x27;ll require 2</span></span><br><span class="line">    <span class="comment"># just to avoid corner cases.</span></span><br><span class="line">    phys_mem_size = <span class="built_in">sum</span>([r.size() <span class="keyword">for</span> r <span class="keyword">in</span> self.mem_ranges])</span><br><span class="line">    <span class="keyword">assert</span>(phys_mem_size &gt;= <span class="number">0x200000</span>)</span><br><span class="line">    <span class="keyword">assert</span>(<span class="built_in">len</span>(self.mem_ranges) &lt;= <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    entries = \</span><br><span class="line">       [</span><br><span class="line">        <span class="comment"># Mark the first megabyte of memory as reserved</span></span><br><span class="line">        X86E820Entry(addr = <span class="number">0</span>, size = <span class="string">&#x27;639kB&#x27;</span>, range_type = <span class="number">1</span>),</span><br><span class="line">        X86E820Entry(addr = <span class="number">0x9fc00</span>, size = <span class="string">&#x27;385kB&#x27;</span>, range_type = <span class="number">2</span>),</span><br><span class="line">        <span class="comment"># Mark the rest of physical memory as available</span></span><br><span class="line">        X86E820Entry(addr = <span class="number">0x100000</span>,</span><br><span class="line">                size = <span class="string">&#x27;%dB&#x27;</span> % (self.mem_ranges[<span class="number">0</span>].size() - <span class="number">0x100000</span>),</span><br><span class="line">                range_type = <span class="number">1</span>),</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Mark [mem_size, 3GB) as reserved if memory less than 3GB, which force</span></span><br><span class="line">    <span class="comment"># IO devices to be mapped to [0xC0000000, 0xFFFF0000). Requests to this</span></span><br><span class="line">    <span class="comment"># specific range can pass though bridge to iobus.</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(self.mem_ranges) == <span class="number">1</span>:</span><br><span class="line">        entries.append(X86E820Entry(addr = self.mem_ranges[<span class="number">0</span>].size(),</span><br><span class="line">            size=<span class="string">&#x27;%dB&#x27;</span> % (<span class="number">0xC0000000</span> - self.mem_ranges[<span class="number">0</span>].size()),</span><br><span class="line">            range_type=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Reserve the last 16kB of the 32-bit address space for the m5op interface</span></span><br><span class="line">    entries.append(X86E820Entry(addr=<span class="number">0xFFFF0000</span>, size=<span class="string">&#x27;64kB&#x27;</span>, range_type=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># In case the physical memory is greater than 3GB, we split it into two</span></span><br><span class="line">    <span class="comment"># parts and add a separate e820 entry for the second part.  This entry</span></span><br><span class="line">    <span class="comment"># starts at 0x100000000,  which is the first address after the space</span></span><br><span class="line">    <span class="comment"># reserved for devices.</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(self.mem_ranges) == <span class="number">2</span>:</span><br><span class="line">        entries.append(X86E820Entry(addr = <span class="number">0x100000000</span>,</span><br><span class="line">            size = <span class="string">&#x27;%dB&#x27;</span> % (self.mem_ranges[<span class="number">1</span>].size()), range_type = <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    self.workload.e820_table.entries = entries</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Command line</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> cmdline:</span><br><span class="line">        cmdline = <span class="string">&#x27;earlyprintk=ttyS0 console=ttyS0 lpj=7999923 root=/dev/hda1&#x27;</span></span><br><span class="line">    self.workload.command_line = fillInCmdline(mdesc, cmdline)</span><br><span class="line">    <span class="keyword">return</span> self</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set the cache line size for the entire system</span></span><br><span class="line">test_sys.cache_line_size = options.cacheline_size</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a top-level voltage domain</span></span><br><span class="line">test_sys.voltage_domain = VoltageDomain(voltage = options.sys_voltage)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a source clock for the system and set the clock period</span></span><br><span class="line">test_sys.clk_domain = SrcClockDomain(clock =  options.sys_clock,</span><br><span class="line">        voltage_domain = test_sys.voltage_domain)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a CPU voltage domain</span></span><br><span class="line">test_sys.cpu_voltage_domain = VoltageDomain()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a source clock for the CPUs and set the clock period</span></span><br><span class="line">test_sys.cpu_clk_domain = SrcClockDomain(clock = options.cpu_clock,</span><br><span class="line">                                         voltage_domain =</span><br><span class="line">                                         test_sys.cpu_voltage_domain)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] == <span class="string">&#x27;riscv&#x27;</span>:</span><br><span class="line">    test_sys.workload.bootloader = options.kernel</span><br><span class="line"><span class="keyword">elif</span> options.kernel <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    test_sys.workload.object_file = binary(options.kernel)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> options.script <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    test_sys.readfile = options.script</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> options.lpae:</span><br><span class="line">    test_sys.have_lpae = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> options.virtualisation:</span><br><span class="line">    test_sys.have_virtualization = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">test_sys.init_param = options.init_param</span><br><span class="line"></span><br><span class="line"><span class="comment"># For now, assign all the CPUs to the same clock domain</span></span><br><span class="line">test_sys.cpu = [TestCPUClass(clk_domain=test_sys.cpu_clk_domain, cpu_id=i)</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(np)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ObjectList.is_kvm_cpu(TestCPUClass) <span class="keyword">or</span> \</span><br><span class="line">    ObjectList.is_kvm_cpu(FutureClass):</span><br><span class="line">    test_sys.kvm_vm = KvmVM()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> options.ruby:</span><br><span class="line">    bootmem = <span class="built_in">getattr</span>(test_sys, <span class="string">&#x27;_bootmem&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">    Ruby.create_system(options, <span class="literal">True</span>, test_sys, test_sys.iobus,</span><br><span class="line">                       test_sys._dma_ports, bootmem)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Create a seperate clock domain for Ruby</span></span><br><span class="line">    test_sys.ruby.clk_domain = SrcClockDomain(clock = options.ruby_clock,</span><br><span class="line">                                    voltage_domain = test_sys.voltage_domain)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Connect the ruby io port to the PIO bus,</span></span><br><span class="line">    <span class="comment"># assuming that there is just one such port.</span></span><br><span class="line">    test_sys.iobus.master = test_sys.ruby._io_port.slave</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i, cpu) <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_sys.cpu):</span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment"># Tie the cpu ports to the correct ruby system ports</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        cpu.clk_domain = test_sys.cpu_clk_domain</span><br><span class="line">        cpu.createThreads()</span><br><span class="line">        cpu.createInterruptController()</span><br><span class="line"></span><br><span class="line">        cpu.icache_port = test_sys.ruby._cpu_ports[i].slave</span><br><span class="line">        cpu.dcache_port = test_sys.ruby._cpu_ports[i].slave</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] <span class="keyword">in</span> (<span class="string">&quot;x86&quot;</span>, <span class="string">&quot;arm&quot;</span>):</span><br><span class="line">            cpu.itb.walker.port = test_sys.ruby._cpu_ports[i].slave</span><br><span class="line">            cpu.dtb.walker.port = test_sys.ruby._cpu_ports[i].slave</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> buildEnv[<span class="string">&#x27;TARGET_ISA&#x27;</span>] <span class="keyword">in</span> <span class="string">&quot;x86&quot;</span>:</span><br><span class="line">            cpu.interrupts[<span class="number">0</span>].pio = test_sys.ruby._cpu_ports[i].master</span><br><span class="line">            cpu.interrupts[<span class="number">0</span>].int_master = test_sys.ruby._cpu_ports[i].slave</span><br><span class="line">            cpu.interrupts[<span class="number">0</span>].int_slave = test_sys.ruby._cpu_ports[i].master</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> options.caches <span class="keyword">or</span> options.l2cache:</span><br><span class="line">        <span class="comment"># By default the IOCache runs at the system clock</span></span><br><span class="line">        test_sys.iocache = IOCache(addr_ranges = test_sys.mem_ranges)</span><br><span class="line">        test_sys.iocache.cpu_side = test_sys.iobus.master</span><br><span class="line">        test_sys.iocache.mem_side = test_sys.membus.slave</span><br><span class="line">    <span class="keyword">elif</span> <span class="keyword">not</span> options.external_memory_system:</span><br><span class="line">        test_sys.iobridge = Bridge(delay=<span class="string">&#x27;50ns&#x27;</span>, ranges = test_sys.mem_ranges)</span><br><span class="line">        test_sys.iobridge.slave = test_sys.iobus.master</span><br><span class="line">        test_sys.iobridge.master = test_sys.membus.slave</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Sanity check</span></span><br><span class="line">    <span class="keyword">if</span> options.simpoint_profile:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ObjectList.is_noncaching_cpu(TestCPUClass):</span><br><span class="line">            fatal(<span class="string">&quot;SimPoint generation should be done with atomic cpu&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> np &gt; <span class="number">1</span>:</span><br><span class="line">            fatal(<span class="string">&quot;SimPoint generation not supported with more than one CPUs&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(np):</span><br><span class="line">        <span class="keyword">if</span> options.simpoint_profile:</span><br><span class="line">            test_sys.cpu[i].addSimPointProbe(options.simpoint_interval)</span><br><span class="line">        <span class="keyword">if</span> options.checker:</span><br><span class="line">            test_sys.cpu[i].addCheckerCpu()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ObjectList.is_kvm_cpu(TestCPUClass):</span><br><span class="line">            <span class="keyword">if</span> options.bp_type:</span><br><span class="line">                bpClass = ObjectList.bp_list.get(options.bp_type)</span><br><span class="line">                test_sys.cpu[i].branchPred = bpClass()</span><br><span class="line">            <span class="keyword">if</span> options.indirect_bp_type:</span><br><span class="line">                IndirectBPClass = ObjectList.indirect_bp_list.get(</span><br><span class="line">                    options.indirect_bp_type)</span><br><span class="line">                test_sys.cpu[i].branchPred.indirectBranchPred = \</span><br><span class="line">                    IndirectBPClass()</span><br><span class="line">        test_sys.cpu[i].createThreads()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># If elastic tracing is enabled when not restoring from checkpoint and</span></span><br><span class="line">    <span class="comment"># when not fast forwarding using the atomic cpu, then check that the</span></span><br><span class="line">    <span class="comment"># TestCPUClass is DerivO3CPU or inherits from DerivO3CPU. If the check</span></span><br><span class="line">    <span class="comment"># passes then attach the elastic trace probe.</span></span><br><span class="line">    <span class="comment"># If restoring from checkpoint or fast forwarding, the code that does this for</span></span><br><span class="line">    <span class="comment"># FutureCPUClass is in the Simulation module. If the check passes then the</span></span><br><span class="line">    <span class="comment"># elastic trace probe is attached to the switch CPUs.</span></span><br><span class="line">    <span class="keyword">if</span> options.elastic_trace_en <span class="keyword">and</span> options.checkpoint_restore == <span class="literal">None</span> <span class="keyword">and</span> \</span><br><span class="line">        <span class="keyword">not</span> options.fast_forward:</span><br><span class="line">        CpuConfig.config_etrace(TestCPUClass, test_sys.cpu, options)</span><br><span class="line"></span><br><span class="line">    CacheConfig.config_cache(options, test_sys)</span><br><span class="line"></span><br><span class="line">    MemConfig.config_mem(options, test_sys)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> test_sys</span><br></pre></td></tr></table></figure><h2 id="devçš„x86è§£æ"><a href="#devçš„x86è§£æ" class="headerlink" title="devçš„x86è§£æ"></a>devçš„x86è§£æ</h2><p>x86çš„devæ•´ä½“æ˜¯ç”±Pcæ¥æ„å»ºçš„ï¼Œå³pcä»£è¡¨çš„æ˜¯x86 platformï¼Œç»§æ‰¿äº†Platformç±»ã€‚åŒ…å«äº†ä¸€ä¸ªsystemæŒ‡é’ˆï¼Œå—æ¡¥æŒ‡é’ˆï¼Œä»¥åŠä¸­æ–­æ§åˆ¶å™¨ã€‚å…¶ä¸­æœ‰å››ç§æ–¹æ³•ï¼šå‘å‡ºç»ˆç«¯ä¸­æ–­ã€æ¸…é™¤ç»ˆç«¯ä¸­æ–­ã€å‘å‡ºPCIä¸­æ–­å’Œæ¸…é™¤PCIä¸­æ–­ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®ƒåˆ›å»ºäº†ä¸‰ä¸ªä¸ºäº†æ”¯æŒlinuxå†…æ ¸çš„è®¡æ—¶åŠŸèƒ½çš„ä¸å­˜åœ¨çš„ç«¯å£ï¼Œåœ°å€åˆ†åˆ«ä¸º0x80, 0xedå’Œ0xcf8(å½“ç„¶ï¼Œå®ƒä»¬éƒ½éœ€è¦åŠ ä¸Š0x80000000)ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pc</span>(<span class="title class_ inherited__">Platform</span>):</span><br><span class="line">    <span class="built_in">type</span> = <span class="string">&#x27;Pc&#x27;</span></span><br><span class="line">    cxx_header = <span class="string">&quot;dev/x86/pc.hh&quot;</span></span><br><span class="line">    system = Param.System(Parent.<span class="built_in">any</span>, <span class="string">&quot;system&quot;</span>)</span><br><span class="line"></span><br><span class="line">    south_bridge = SouthBridge()</span><br><span class="line">    pci_host = PcPciHost()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># &quot;Non-existant&quot; ports used for timing purposes by the linux kernel</span></span><br><span class="line">    i_dont_exist1 = IsaFake(pio_addr=x86IOAddress(<span class="number">0x80</span>), pio_size=<span class="number">1</span>)</span><br><span class="line">    i_dont_exist2 = IsaFake(pio_addr=x86IOAddress(<span class="number">0xed</span>), pio_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ports behind the pci config and data regsiters. These don&#x27;t do anything,</span></span><br><span class="line">    <span class="comment"># but the linux kernel fiddles with them anway.</span></span><br><span class="line">    behind_pci = IsaFake(pio_addr=x86IOAddress(<span class="number">0xcf8</span>), pio_size=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Serial port and terminal</span></span><br><span class="line">    com_1 = Uart8250()</span><br><span class="line">    com_1.pio_addr = x86IOAddress(<span class="number">0x3f8</span>)</span><br><span class="line">    com_1.device = Terminal()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Devices to catch access to non-existant serial ports.</span></span><br><span class="line">    fake_com_2 = IsaFake(pio_addr=x86IOAddress(<span class="number">0x2f8</span>), pio_size=<span class="number">8</span>)</span><br><span class="line">    fake_com_3 = IsaFake(pio_addr=x86IOAddress(<span class="number">0x3e8</span>), pio_size=<span class="number">8</span>)</span><br><span class="line">    fake_com_4 = IsaFake(pio_addr=x86IOAddress(<span class="number">0x2e8</span>), pio_size=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># A device to catch accesses to the non-existant floppy controller.</span></span><br><span class="line">    fake_floppy = IsaFake(pio_addr=x86IOAddress(<span class="number">0x3f2</span>), pio_size=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attachIO</span>(<span class="params">self, bus, dma_ports = []</span>):</span><br><span class="line">        self.south_bridge.attachIO(bus, dma_ports)</span><br><span class="line">        self.i_dont_exist1.pio = bus.master</span><br><span class="line">        self.i_dont_exist2.pio = bus.master</span><br><span class="line">        self.behind_pci.pio = bus.master</span><br><span class="line">        self.com_1.pio = bus.master</span><br><span class="line">        self.fake_com_2.pio = bus.master</span><br><span class="line">        self.fake_com_3.pio = bus.master</span><br><span class="line">        self.fake_com_4.pio = bus.master</span><br><span class="line">        self.fake_floppy.pio = bus.master</span><br><span class="line">        self.pci_host.pio = bus.default</span><br></pre></td></tr></table></figure><p>åœ¨å®ä¾‹åŒ–å¯¹åº”çš„IOè®¾å¤‡åï¼Œéœ€è¦è¿æ¥è‡³IOæ€»çº¿ç«¯ã€‚busæˆ‘çŒœæµ‹åº”è¯¥æ˜¯<code>IOXBar</code>ï¼Œå®ƒç»§æ‰¿äº†<code>NonCoherentXbar</code>ï¼ŒåŒæ—¶æ˜¯<code>BaseXBar</code>å­©å­ã€‚èƒ½å¤Ÿçœ‹åˆ°<code>bus.master</code>æŒ‡çš„æ˜¯<code>mem_side_ports</code>ã€‚<code>pci_host</code>ä¼šè¿æ¥åˆ°é»˜è®¤ç«¯å£ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseXBar</span>(<span class="title class_ inherited__">ClockedObject</span>):</span><br><span class="line">    <span class="built_in">type</span> = <span class="string">&#x27;BaseXBar&#x27;</span></span><br><span class="line">    abstract = <span class="literal">True</span></span><br><span class="line">    cxx_header = <span class="string">&quot;mem/xbar.hh&quot;</span></span><br><span class="line">    cxx_class = <span class="string">&#x27;gem5::BaseXBar&#x27;</span></span><br><span class="line"></span><br><span class="line">    cpu_side_ports = VectorResponsePort(<span class="string">&quot;Vector port for connecting &quot;</span></span><br><span class="line">                                                <span class="string">&quot;mem side ports&quot;</span>)</span><br><span class="line">    slave    = DeprecatedParam(cpu_side_ports,</span><br><span class="line">                                <span class="string">&#x27;`slave` is now called `cpu_side_ports`&#x27;</span>)</span><br><span class="line">    mem_side_ports = VectorRequestPort(<span class="string">&quot;Vector port for connecting &quot;</span></span><br><span class="line">                                                <span class="string">&quot;cpu side ports&quot;</span>)</span><br><span class="line">    master   = DeprecatedParam(mem_side_ports,</span><br><span class="line">                                <span class="string">&#x27;`master` is now called `mem_side_ports`&#x27;</span>)</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># The default port can be left unconnected, or be used to connect</span></span><br><span class="line">    <span class="comment"># a default response port</span></span><br><span class="line">    default = RequestPort(<span class="string">&quot;Port for connecting an optional default responder&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="gem5çš„HMCéƒ¨åˆ†"><a href="#gem5çš„HMCéƒ¨åˆ†" class="headerlink" title="gem5çš„HMCéƒ¨åˆ†"></a>gem5çš„HMCéƒ¨åˆ†</h2><p>hmcä½äº<code>src/mem</code>éƒ¨åˆ†ã€‚</p><p>HMC.pyæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„HMCè®¾å¤‡ï¼ŒåŒ…å«äº†valut controllers, serial links, main internal crossbarå’Œä¸€ä¸ªexternal hmc controllerã€‚</p><ul><li>vault controllerï¼šæ˜¯HMC_2500_1x32å¹¶æ‹¥æœ‰dramæ§åˆ¶å™¨çš„å®ä¾‹ç±»ï¼ŒåŒæ—¶æ‹¥æœ‰dram_ctrl.ccå®šä¹‰çš„åŠŸèƒ½ã€‚</li><li>main xbarï¼šæ˜¯ä¸€ä¸ªç®€å•çš„NoncoherentXBarçš„å®ä¾‹ç±»ã€‚</li><li>serial links controllerï¼šSerialLinkæ˜¯Bridgeç±»çš„ç®€å•å˜ä½“ï¼Œèƒ½å¤Ÿè®¡ç®—packet serializationçš„å»¶è¿Ÿå’Œcontroller latencyã€‚æˆ‘ä»¬å‡è®¾serializer componentåœ¨transmitter sideä¸éœ€è¦æ”¶åˆ°æ•´ä¸ªåŒ…è£¹æ¥å¼€å§‹çº¿æ€§åŒ–è¿‡ç¨‹ã€‚ç„¶è€Œåçº¿æ€§åŒ–éœ€è¦ç­‰å¾…æ•´ä¸ªåŒ…è£¹çš„åˆ°æ¥ï¼Œé¦–å…ˆæ£€æŸ¥å®ƒçš„ä¸€è‡´æ€§ã€‚<ul><li>Bandwidth of the serial links is not modeled in the SerialLink component itself</li><li>serial link controllerçš„å»¶è¿Ÿç”±SerDes latency + link controllerç»„æˆ</li><li>serial linksåˆ†äº«ç›¸åŒçš„åœ°å€èŒƒå›´å’Œæ•°æ®åŒ…ï¼Œå› æ­¤å®ƒä»¬éœ€è¦load distributionæœºåˆ¶ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-----------------------------------------</span><br><span class="line">| Host/HMC Controller                   |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        |  Link Aggregator   |  opt    |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        |  Serial Link + Ser | * 4     |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|---------------------------------------| </span><br><span class="line">-----------------------------------------</span><br><span class="line">| Device                                |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        |       Xbar         | * 4     |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        |  Vault Controller  | * 16    |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|        |     Memory         |         |</span><br><span class="line">|        ----------------------         |</span><br><span class="line">|---------------------------------------|</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> gem5å­¦ä¹  </category>
          
          <category> æºç å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NVM-Simulator </tag>
            
            <tag> gem5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sconså­¦ä¹ </title>
      <link href="/2025/05/03/scons%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/05/03/scons%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>åœ¨gem5å’ŒNVMainä¸­ï¼Œéƒ½ä½¿ç”¨äº†sconså·¥å…·è¿›è¡Œç¼–è¯‘ã€‚å­¦ä¹ sconså¿…é¡»æä¸Šæ—¥ç¨‹ï¼</p><h2 id="ç¼–è¯‘æ–‡ä»¶çš„åŸºæœ¬æ­¥éª¤"><a href="#ç¼–è¯‘æ–‡ä»¶çš„åŸºæœ¬æ­¥éª¤" class="headerlink" title="ç¼–è¯‘æ–‡ä»¶çš„åŸºæœ¬æ­¥éª¤"></a>ç¼–è¯‘æ–‡ä»¶çš„åŸºæœ¬æ­¥éª¤</h2><p><a href="https://www.toptal.com/c-plus-plus/c-plus-plus-understanding-compilation">å‚è€ƒé˜…è¯»</a></p><p>åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜éœ€è¦å¤ä¹ ä¸€ä¸‹ç¼–è¯‘æ–‡ä»¶çš„åŸºæœ¬çŸ¥è¯†ã€‚ç¼–è¯‘æ–‡ä»¶å¤§è‡´å¯ä»¥åˆ†ä¸ºé¢„å¤„ç†&#x3D;&gt;ç¼–è¯‘&#x3D;&gt;æ±‡ç¼–&#x3D;&gt;é“¾æ¥å››ä¸ªæ­¥éª¤ã€‚</p><ul><li>é¢„å¤„ç†ï¼šå°†ç»™å®šçš„æ–‡ä»¶è¿›è¡Œå±•å¼€ã€‚å±•å¼€å®å®šä¹‰ä»¥åŠincludeçš„æ–‡ä»¶ã€‚</li><li>ç¼–è¯‘è¿‡ç¨‹ï¼šè¿›è¡Œè¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æå¤„ç†ï¼Œç”Ÿæˆä¸­é—´ä»£ç ï¼Œä¼˜åŒ–ï¼Œç„¶åç”Ÿæˆæ±‡ç¼–ä»£ç ã€‚</li><li>æ±‡ç¼–ï¼šå°†æ±‡ç¼–ä»£ç ç”Ÿæˆæœºå™¨å¯æ‰§è¡Œçš„ä»£ç ï¼ˆå³äºŒè¿›åˆ¶ï¼‰ï¼Œç”Ÿæˆå¯é‡å®šä½ç›®æ ‡ç¨‹åºçš„.oæ–‡ä»¶ã€‚</li><li>é“¾æ¥ï¼šä½¿ç”¨é™æ€é“¾æ¥æˆ–è€…åŠ¨æ€é“¾æ¥çš„æ–¹æ³•åŠ å…¥ç¨‹åºæ‰§è¡Œéœ€è¦ä¾èµ–åº“çš„æ–‡ä»¶ï¼Œæœ€åç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li></ul><p>åˆ›å»ºä¸€ä¸ªç®€å•çš„helloworld.cppæ–‡ä»¶ã€‚</p><p>ä½¿ç”¨<code>g++ -E helloworld.cpp -o helloworld.ii</code>ç”Ÿæˆé¢„å¤„ç†æ–‡ä»¶ï¼ˆæ¯”æºæ–‡ä»¶å¤§éå¸¸å¤šï¼Œå› ä¸ºiostreamæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„headeræ–‡ä»¶ï¼‰ã€‚</p><p>ä½¿ç”¨<code>g++ -S helloworld.ii -o helloworld.S</code>ç”Ÿæˆæ±‡ç¼–ä»£ç ã€‚</p><p><code>-c</code>æ˜¯æ‰§è¡Œæ±‡ç¼–æ“ä½œã€‚</p><h2 id="ç®€å•ç¼–è¯‘"><a href="#ç®€å•ç¼–è¯‘" class="headerlink" title="ç®€å•ç¼–è¯‘"></a>ç®€å•ç¼–è¯‘</h2><p>åˆ›å»ºä¸€ä¸ªSconstructæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªhelloworld.cppæ–‡ä»¶ã€‚å¯¹äºsconså·¥å…·æ¥è¯´ï¼ŒSconstructæ–‡ä»¶å°±ç›¸å½“äºMakefileçš„ä½œç”¨ä¸€æ ·ï¼Œsconsé€šè¿‡è¯»å–Sconstructçš„å†…å®¹æ¥æ§åˆ¶æ„å»ºç¨‹åºçš„æµç¨‹ã€‚å½“ç„¶ï¼ŒSconstructä¸Makfileçš„åŒºåˆ«åœ¨äºå‰è€…ä½¿ç”¨çš„æ˜¯Pythonè„šæœ¬ï¼Œè€Œåè€…ä½¿ç”¨çš„æ˜¯å‘½ä»¤è¡Œã€‚</p><p>ä½¿ç”¨Programå‡½æ•°èƒ½å¤Ÿç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Program(<span class="string">&#x27;helloworld.cpp&#x27;</span>)</span><br><span class="line">Program(<span class="string">&#x27;newhello&#x27;</span>, <span class="string">&#x27;helloworld.cpp&#x27;</span>) <span class="comment"># å¯ä»¥é‡å‘½åå¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line">Program(<span class="string">&#x27;new_program&#x27;</span>, [<span class="string">&#x27;file1.c&#x27;</span>, <span class="string">&#x27;file2.c&#x27;</span>, <span class="string">&#x27;file3.c&#x27;</span>]) <span class="comment"># ç¼–è¯‘å¤šä¸ªæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>åœ¨ç¬¬ä¸‰ä¸ªç¤ºä¾‹ä¸­ï¼Œç›¸å½“äºæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">scons</span></span><br><span class="line">cc -o file1.o -c file1.c</span><br><span class="line">cc -o file2.o -c file2.c</span><br><span class="line">cc -o file3.o -c file3.c</span><br><span class="line">cc -o new_program file1.o file2.o fil3.o</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨Globå‡½æ•°æŒ‡å®šè§„åˆ™åŒ¹é…æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶ã€‚</p><p>åœ¨Programå‡½æ•°ä¸­å¯ä»¥æŒ‡å®štargetï¼Œsourceã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">src_files=Split(<span class="string">&#x27;main.c  file1.c  file2.c&#x27;</span>)</span><br><span class="line">Program(target=<span class="string">&#x27;program&#x27;</span>, source=src_files)</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">src_files=Split(<span class="string">&#x27;main.c  file1.c  file2.c&#x27;</span>)</span><br><span class="line">Program(source=src_files, target=<span class="string">&#x27;program&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Programä¸­è¿˜æœ‰LIBPATHï¼Œsconsä¼šä»æŒ‡å®šçš„ç›®å½•ä¸­å¯»æ‰¾åº“æ–‡ä»¶ã€‚</p><p>ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object(&#x27;helloworld.cpp&#x27;)</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”Ÿæˆä¸€ä¸ªå¯é‡å®šä½ç›®æ ‡ç¨‹åºæ–‡ä»¶ã€‚</p><p>é™¤äº†Program, Objectï¼Œè¿˜æœ‰Libraryã€StaticLibraryå’ŒSharedLibraryåˆ†åˆ«ç¼–è¯‘åº“æ–‡ä»¶ã€é™æ€åº“ä»¥åŠåŠ¨æ€åº“ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;scons</span><br><span class="line">scons: Reading SConscript files ... </span><br><span class="line">scons: done reading SConscript files. </span><br><span class="line">scons: Building targets ...</span><br><span class="line">cl /Fohello.obj /c hello.c /nologo</span><br><span class="line">link /nologo /OUT:hello.exe hello.obj </span><br><span class="line">embedManifestExeCheck(target, source, env) </span><br><span class="line">scons: done building targets.</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œsconsé¦–å…ˆä¼šè¯»å–æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼ˆä¸»è¦æŒ‡çš„æ˜¯SConscriptæ–‡ä»¶ï¼‰ï¼Œç„¶åæ‰§è¡Œå®ƒä»¬ï¼Œç„¶åæ„å»ºæ‰€æœ‰çš„target filesã€‚</p><h3 id="èŠ‚ç‚¹å¯¹è±¡"><a href="#èŠ‚ç‚¹å¯¹è±¡" class="headerlink" title="èŠ‚ç‚¹å¯¹è±¡"></a>èŠ‚ç‚¹å¯¹è±¡</h3><p>æ‰€æœ‰çš„builderæ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ç³»åˆ—çš„node objectï¼Œè¿™äº›objectå¯èƒ½æ˜¯target fileæˆ–è€…æ˜¯fileã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object(<span class="string">&#x27;hello.cpp&#x27;</span>, CCFLAGS=<span class="string">&#x27;-DHELLO&#x27;</span>)</span><br><span class="line">Object(<span class="string">&#x27;goodbye.cpp&#x27;</span>, CCFLAGS=<span class="string">&#x27;-DGOODBYE&#x27;</span>)</span><br><span class="line">Program([<span class="string">&#x27;hello.o&#x27;</span>, <span class="string">&#x27;goodbye.o&#x27;</span>])</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€èˆ¬é»˜è®¤æ˜¯åœ¨Linuxç³»ç»Ÿä¸‹ä½¿ç”¨sconsã€‚</p><p>æˆ–è€…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello_list = Object(<span class="string">&#x27;hello.cpp&#x27;</span>, CCFLAGS=<span class="string">&#x27;-DHELLO&#x27;</span>) <span class="comment"># ä½¿ç”¨ä¸€ä¸ªhello_listèŠ‚ç‚¹</span></span><br><span class="line">goodbye_list = Object(<span class="string">&#x27;goodbye.c&#x27;</span>, CCFLAGS=<span class="string">&#x27;-DGOODBYE&#x27;</span>)</span><br><span class="line">Program(hello_list + goodbye_list) <span class="comment"># åˆ©ç”¨èŠ‚ç‚¹ç¼–è¯‘</span></span><br></pre></td></tr></table></figure><p><code>hello_list</code>å’Œ<code>goodbye_list</code>å°±æ˜¯target objectçš„èŠ‚ç‚¹ã€‚é™¤äº†Objectï¼Œè¿˜æœ‰Fileã€Dirå’ŒEntryèŠ‚ç‚¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">object_list = Object(<span class="string">&#x27;hello.c&#x27;</span>)</span><br><span class="line">program_list = Program(object_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The object file is: %s&quot;</span>%object_list[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The program file is: %s&quot;</span>%program_list[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ‰“å°å‡ºç›¸åº”çš„æ–‡ä»¶åã€‚</p><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>å¯ä»¥å£°æ˜ç¯å¢ƒå˜é‡æŒ‡å®šç¼–è¯‘ç¯å¢ƒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">env=Environment(CC=<span class="string">&#x27;gcc&#x27;</span>, CCFLAGS=<span class="string">&#x27;-O2&#x27;</span>)</span><br><span class="line">env.Program(<span class="string">&#x27;foo.c&#x27;</span>)</span><br><span class="line">æˆ–è€…</span><br><span class="line">env=Environment(CXX=<span class="string">&#x27;/usr/local/bin/g++&#x27;</span>, CXXFLAGS=<span class="string">&#x27;-02&#x27;</span>)</span><br><span class="line">env.Program(<span class="string">&#x27;foo.cpp&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶å€™ä¸€ä¸ªç¼–è¯‘æ–‡ä»¶éœ€è¦å¦ä¸€ä¸ªæ–‡ä»¶æ„å»ºçš„ç¯å¢ƒï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨<code>Import</code>å’Œ<code>Export</code>è¿›è¡ŒæŒ‡å®šå˜é‡çš„è¾“å‡ºã€‚</p><h3 id="ç¼–è¯‘é€‰é¡¹"><a href="#ç¼–è¯‘é€‰é¡¹" class="headerlink" title="ç¼–è¯‘é€‰é¡¹"></a>ç¼–è¯‘é€‰é¡¹</h3><p>ä½¿ç”¨<code>AddOption</code>å‡½æ•°è¿›è¡Œé€‰æ‹©ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AddOption(<span class="string">&#x27;--verbose&#x27;</span>, dest=<span class="string">&#x27;verbose&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>,</span><br><span class="line">          <span class="built_in">help</span>=<span class="string">&#x27;Show full compiler command line&#x27;</span>)</span><br><span class="line">AddOption(<span class="string">&#x27;--build-type&#x27;</span>, dest=<span class="string">&#x27;build_type&#x27;</span>, <span class="built_in">type</span>=<span class="string">&#x27;choice&#x27;</span>,</span><br><span class="line">          choices=[<span class="string">&quot;debug&quot;</span>,<span class="string">&quot;fast&quot;</span>,<span class="string">&quot;prof&quot;</span>],</span><br><span class="line">          <span class="built_in">help</span>=<span class="string">&#x27;Type of build. Determines compiler flags&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> gem5å­¦ä¹  </category>
          
          <category> ç¼–è¯‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–è¯‘å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥è®°è®°å½•2</title>
      <link href="/2025/05/02/%E6%97%A5%E8%AE%B0%E8%AE%B0%E5%BD%952/"/>
      <url>/2025/05/02/%E6%97%A5%E8%AE%B0%E8%AE%B0%E5%BD%952/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šæ¬¡å†™åšå®¢è¿˜æ˜¯2022å¹´ï¼Œå¤§éƒ¨åˆ†çš„åšå®¢æ˜¯åœ¨å‡†å¤‡cspçš„ç®—æ³•å­¦ä¹ ç¬”è®°ï¼Œä»¥åŠå°‘éƒ¨åˆ†å½“æ—¶æš‘å‡åˆšå¼€å§‹æ¥è§¦ç§‘ç ”çš„paperå­¦ä¹ ç¬”è®°ã€‚å¦‚æœæ²¡æœ‰è¿™äº›è®°å½•ï¼Œæˆ‘å·®ç‚¹éƒ½å¿˜äº†è¿‡å»çš„å‡ å¹´å…·ä½“åšäº†äº›ä»€ä¹ˆï¼Œåªæ˜¯æœ‰äº›æ¨¡æ¨¡ç³Šç³Šçš„è®°å¿†ç½¢äº†ã€‚è¿™æ¬¡æ‰¾å›åšå®¢ï¼Œæ˜¯ä¸Šä¸ªæœˆé˜¿é‡Œäº‘é¢è¯•çš„æ—¶å€™ï¼Œä¸€ä¸ªé¢è¯•å®˜ç‚¹å¼€äº†æˆ‘çš„åšå®¢é“¾æ¥ï¼Œé—®æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆä¹…éƒ½æ²¡æ›´æ–°äº†ï¼Ÿç°åœ¨æ­£å¥½æ˜¯äº”ä¸€å‡æœŸï¼Œä¹Ÿä¸æƒ³ææŠ€æœ¯å’Œå­¦æœ¯ç›¸å…³çš„äº‹ï¼Œå°±æ¥æ•´ç†ä¸€ä¸‹æˆ‘2022-2025å¹´å¤§æ¦‚åšäº†äº›ä»€ä¹ˆäº‹æƒ…ã€‚å½“ç„¶ï¼Œç›¸æ¯”è¾ƒèº«è¾¹çš„åŒå­¦æ¥è¯´ï¼Œæˆ‘å‡ ä¹è¿˜æ˜¯åŸåœ°è¸æ­¥çš„çŠ¶æ€ï¼Œæ›´å¤šæ—¶å€™æ˜¯è¢«å„ç§å¤§æµæ¨ç€å¾€å‰èµ°ï¼Œå¯ä»¥ç®€å•çš„æ€»ç»“å°±æ˜¯è¿™3å¹´æ˜¯å®Œå…¨èººå¹³çš„3å¹´ã€‚</p><h2 id="æœ€åçš„ä¸€å¹´æœ¬ç§‘æ—¶å…‰"><a href="#æœ€åçš„ä¸€å¹´æœ¬ç§‘æ—¶å…‰" class="headerlink" title="æœ€åçš„ä¸€å¹´æœ¬ç§‘æ—¶å…‰"></a>æœ€åçš„ä¸€å¹´æœ¬ç§‘æ—¶å…‰</h2><h3 id="ä¿ç ”å’Œèººå¹³è¿›è¡Œæ—¶"><a href="#ä¿ç ”å’Œèººå¹³è¿›è¡Œæ—¶" class="headerlink" title="ä¿ç ”å’Œèººå¹³è¿›è¡Œæ—¶"></a>ä¿ç ”å’Œèººå¹³è¿›è¡Œæ—¶</h3><p>å¥½åƒè¾¾æˆäº†äººç”Ÿæœ€åä¸€ä¸ªç»ˆæç›®æ ‡ï¼Œå°±æ˜¯å¾—åˆ°ä¸€ä¸ªç ”ç©¶ç”Ÿèµ„æ ¼ã€‚å°æ—¶å€™å¦ˆå¦ˆå°±åœ¨å¿µå¨ä¸€å®šä¸èƒ½æœ¬ç§‘å°±ä¸šï¼Œå…¶å®å¥¹ä¹Ÿæ²¡æƒ³è¿‡æˆ‘è¦å»å“ªé‡Œè¯»ç ”ç©¶ç”Ÿï¼Œè¯»ä»€ä¹ˆä¸“ä¸šï¼Œåªè¦æ˜¯ç ”ç©¶ç”Ÿå°±è¡Œäº†ã€‚è‡³äºæˆ‘ï¼Œå¹¶æ²¡æœ‰å¯¹äººç”Ÿæœ‰ä»€ä¹ˆæ˜ç¡®çš„è§„åˆ’ï¼Œäºæ˜¯ä¹Ÿå°±è¢«æ¨ç€è¿™æ ·èµ°ä¸‹å»äº†ã€‚å½“2022å¹´9æœˆ28å·ï¼Œæ‹¿åˆ°ä¿ç ”ç»“æœçš„é‚£ä¸€åˆ»ï¼Œé™¤äº†æœ‰æœ¬èº«è¯´å¥½çš„ä¸“ç¡•å˜æˆäº†å­¦ç¡•çš„çªƒå–œï¼Œå‰©ä¸‹çš„å°±æ˜¯æ”¾æ¾å’ŒèŒ«ç„¶ï¼Œæœ‰å…³äºæˆ‘æœªæ¥è¦åšä»€ä¹ˆå…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆæƒ³æ³•ã€‚</p><h3 id="è¯»ä¹¦"><a href="#è¯»ä¹¦" class="headerlink" title="è¯»ä¹¦"></a>è¯»ä¹¦</h3><p>ä¸»è¦è¯»äº†ä»¥ä¸‹å†…å®¹ï¼š</p><p>ã€Šæµ·è¾¹çš„å¡å¤«å¡ã€‹ï¼Œã€Šå¤§æ·–è®°äº‹ã€‹ï¼Œã€Šé•¿å®‰çš„è”æã€‹ï¼Œã€Šå¤ªç™½é‡‘æ˜Ÿæœ‰ç‚¹çƒ¦ã€‹ã€‚</p><p>å­¦äº†ç‚¹å¡”ç½—å’Œæ˜Ÿç›˜ï¼Œå—¯ï¼Œæ²‰è¿·ç„å­¦ã€‚å¡”ç½—ç‰Œç®€å•æ¥è¯´å°±æ˜¯22å¼ å¤§ç‰Œï¼ŒåŠ ä¸Š4*14å¼ å°ç‰Œï¼Œè¿™ä¸ªå››æŒ‡çš„æ˜¯ï¼šåœ£æ¯ï¼Œåœ£å‰‘ï¼Œæƒæ–è¿˜æœ‰æ˜Ÿå¸ï¼Œ14æŒ‡çš„æ˜¯æ•°å­—1-10ï¼Œä»¥åŠ4ç§é¢å¤–çš„èº«ä»½ï¼šqueenï¼Œkingï¼Œknightï¼Œè¿˜æœ‰pageã€‚æ¯å¼ å¡”ç½—ç‰Œéƒ½æœ‰è‡ªå·±çš„è±¡å¾æ„ä¹‰ï¼Œé€šè¿‡æŠ½å–å¡”ç½—ç‰Œè¿›è¡Œç»„åˆï¼Œå¯ä»¥è§£è¯»å‡ºä¸åŒçš„å«ä¹‰ã€‚æ‰€è°“å¡”ç½—ç‰Œèƒ½è¿›è¡Œå åœï¼Œå®é™…ä¸Šå°±æ˜¯å åœå¸ˆç›¸ä¿¡å½“äººä¸å¡”ç½—ç‰ŒæˆåŠŸé“¾æ¥åï¼Œå¡”ç½—ç‰Œèƒ½æ­£ç¡®æŒ‡ç¤ºå‡ºæœªæ¥æŸä»¶äº‹æƒ…çš„èƒ½é‡ï¼›è€Œæ˜Ÿç›˜å¯ä»¥ç†è§£ä¸ºè¥¿æ–¹ç‰ˆçš„ç”Ÿè¾°å…«å­—ï¼Œå®ƒæ¯”ç”Ÿè¾°å…«å­—æ›´åŠ è¯¦ç»†ï¼Œéœ€è¦ç²¾ç¡®åˆ°å‡ºç”Ÿçš„åˆ†é’Ÿæ‰èƒ½æ’å‡ºå‡†ç¡®çš„å‡ºç”Ÿæ˜Ÿç›˜ï¼Œæ•´å¼ æ˜Ÿç›˜æœ‰é»„é“12å®«ä½è¿˜æœ‰12ä¸ªæ˜Ÿåº§ï¼Œä»¥åŠæœ‰è®¸å¤šæ˜Ÿä½“ï¼ˆæœ€é‡è¦çš„æ˜¯å…«å¤§è¡Œæ˜Ÿï¼‰ï¼Œç ”ç©¶æ˜Ÿç›˜çš„äººç›¸ä¿¡è¡Œæ˜Ÿçš„è½ä½ä¸è¡Œæ˜Ÿä¸è¡Œæ˜Ÿä¹‹é—´çš„å…³è”é€ å°±äº†ä¸ªäººçš„ä¸ç”Ÿä¿±æ¥çš„ç‰¹è´¨ã€‚å…·ä½“å°±ä¸åœ¨è¿™é‡Œè¯¦ç»†å±•å¼€å•¦ï½</p><h3 id="å¨±ä¹"><a href="#å¨±ä¹" class="headerlink" title="å¨±ä¹"></a>å¨±ä¹</h3><p>å…¥å‘lolmï¼Œæ²‰è¿·lplï¼ˆæˆåˆ†æ˜¯ç½ªå¤§æ¶æçš„äº‘ç©å®¶ï¼‰â€¦</p><p>é€æ¸è„±å‘kpopâ€¦kpopçš„åˆ¶ä½œæ°´å¹³å…‰è¾‰ä¸å†ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘è‡ªå·±å¬è…»äº†ï¼Œå¯¹éŸ³ä¹çš„è¿½æ±‚å·²ç»æ²¡æœ‰äº†ä»»ä½•é™åˆ¶ï¼Œåªè¦åšåˆ°æœ€åŸºæœ¬çš„å…¥è€³å°±å¯ä»¥ã€‚ä¸‹é¢ç»™å‡ é¦–å¥½å¬çš„æ›²å­æ¨èï¼š<br>ã€ŠRoseã€‹ D.O.</p><p>ã€ŠLove Me Like Thatã€‹ Sam Kim</p><p>ã€Šheyï¼Œ Soul Sisterã€‹ Train</p><p>ã€ŠLALALALALALALALALALAã€‹ MIKOLAS</p><p>ã€Šå‘äº‘ç«¯ã€‹</p><p>ã€ŠDreamsã€‹ JoaKim Karud</p><p>è¿˜æœ‰å¯ä»¥å»å¬è‚–æ–¯å¡”ç§‘ç»´å¥‡çš„é‚£é¦–æœ€è‘—åçš„åå°”å…¹å’Œç‰›è™»ä¸»é¢˜æ›²ã€‚</p><h2 id="ä¸€å¹´çº§åˆå…¥ç§‘ç ”"><a href="#ä¸€å¹´çº§åˆå…¥ç§‘ç ”" class="headerlink" title="ä¸€å¹´çº§åˆå…¥ç§‘ç ”"></a>ä¸€å¹´çº§åˆå…¥ç§‘ç ”</h2><p>æˆ‘ç³Ÿç³•çš„ç§‘ç ”å®åŠ›åœ¨å¤§äºŒæ—¶å°±åˆè§ç«¯å€ªâ€¦åšç‰©ç†å®éªŒä¸€ç›´éƒ½æ˜¯æœ€åä¸€ä¸ªèµ°çš„ã€‚å½“åˆè¿˜æ¯”è¾ƒåº†å¹¸è‡³å°‘è®¡ç®—æœºä¸“ä¸šçš„åŠ¨æ‰‹è¦æ±‚æ²¡é‚£ä¹ˆå¼ºï¼Œç»“æœæˆ‘è¿˜æ˜¯ä¹è§‚ä¼°è®¡äº†æˆ‘çš„ç§‘ç ”æ°´å¹³ï¼Œæ¯•ç«Ÿå³ä½¿æ˜¯æœ€ç®€å•çš„ç§‘ç ”ä¹Ÿä¸åƒè¯¾ç¨‹é¡¹ç›®ä¸€æ ·å¯ä»¥èººç€å®Œæˆã€‚</p><p>äºæ˜¯æˆ‘ä¹Ÿéå¸¸ç¬¦åˆé¢„æœŸåœ°ï¼Œåœ¨ç¬¬ä¸€æ¬¡å¼€é¢˜ç­”è¾©ä½äºå20%ï¼Œå–œæäºŒæ¬¡å¼€é¢˜orz</p><h2 id="äºŒå¹´çº§è¿›è¡Œæ—¶"><a href="#äºŒå¹´çº§è¿›è¡Œæ—¶" class="headerlink" title="äºŒå¹´çº§è¿›è¡Œæ—¶"></a>äºŒå¹´çº§è¿›è¡Œæ—¶</h2><h3 id="æ‰¾å®ä¹ "><a href="#æ‰¾å®ä¹ " class="headerlink" title="æ‰¾å®ä¹ "></a>æ‰¾å®ä¹ </h3><p>æ‰¾å®ä¹ æœ¬æ¥æ˜¯åŠ å…¥è´µåˆ›çš„æ¯ä¸ªäººéƒ½åº”è¯¥ç»å†çš„äº‹ï¼Œä½†æœ¬æ‡’ç‹—æ˜¾ç„¶ç§‰æŒç€èƒ½æ‹–å°±æ‹–çš„åŸåˆ™ï¼Œåœ¨æå·çš„webç»„ä¿æŒç€æœ€æ‘†çš„çŠ¶æ€ï¼Œä¸€ç›´åšæŒåˆ°äº†æœ¬ç§‘æ¯•ä¸šã€‚è€ŒäºŒå¹´çº§ä¸‹å­¦æœŸæ˜¯å¤§å®¶ä¸å¾—ä¸æ‰¾å®ä¹ çš„ä¸€ä¸ªæ—¶é—´ç‚¹äº†ï¼Œäºæ˜¯æˆ‘å¯’å‡æœŸé—´ç´§èµ¶æ…¢èµ¶å®Œæˆäº†ä¸¤ä¸ªå¼€æºé¡¹ç›®ï¼Œå¤–åŠ ä¸Šè‡ªå·±çš„ç§‘ç ”é¡¹ç›®å‹‰å‹‰å¼ºå¼ºå®Œæˆäº†ä¸€ä»½ç®€å†ã€‚ç„¶åé‡‡å–å¹¿æ’’ç½‘æˆ˜ç•¥ï¼ŒæŠŠèƒ½æŠ•çš„åŸºæœ¬ä¸Šéƒ½æŠ•äº†ä¸€éï¼Œå¯èƒ½æ˜¯å­¦å†å äº†ä¼˜åŠ¿ï¼Œå¤§éƒ¨åˆ†å…¬å¸éƒ½ç»™äº†é¢è¯•æœºä¼šï¼Œé™¤äº†è…¾è®¯å’Œkpié¢ä»¥å¤–ï¼Œå…¶ä»–æ‰€æœ‰å…¬å¸é¢è¯•éƒ½æ˜¯äºŒé¢èµ·æ­¥ã€‚æœ€åæ˜¯æ‹¿åˆ°äº†ç¾å›¢å­˜å‚¨ï¼Œæ·˜å¤©ç»ˆç«¯å’Œèš‚èšå­˜å‚¨çš„offerã€‚æœ€åå†³å®šå»èš‚èšé›†å›¢ï¼Œè¿˜æ˜¯ç»¼åˆè€ƒè™‘äº†å·¥ä½œå¼ºåº¦å’Œbaseåœ°å§ï¼Œæ®è¯´é‚£ä¸ªç»„æ˜¯æåˆ†å¸ƒå¼çš„ç¼“å­˜ä¼˜åŒ–ï¼Ÿæˆ‘ä¸ªäººæ„Ÿè§‰æœ€åæ‹¿åˆ°è¿™ä¸ªofferå¾ˆå¤§éƒ¨åˆ†åŸå› æ˜¯æ²¾äº†åç§‘+å¯¼å¸ˆçš„å…‰ï¼ŒäºŒé¢é¢è¯•å®˜å¬è¯´è¿‡æˆ‘å¯¼å¸ˆï¼Œéå¸¸ä¸æ»‘åœ°é€šè¿‡äº†è¿™æ¬¡é¢è¯•ã€‚çºµè§‚å…¨å®éªŒå®¤çš„æ‰¾å®ä¹ ç»“æœï¼Œæˆ‘ä¼°è®¡ä¹Ÿç®—å30%ï¼Œå…¶ä»–å¾ˆå¤šäººéƒ½æ˜¯batä¸‰è¿å† ï¼Œæˆ–è€…ç¬¬ä¸€å‘¨é€Ÿé€šofferã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> éšæƒ³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DRAMçš„æ•´ä½“æ¶æ„ï¼ˆç®€å•ç¿»è¯‘ï¼‰</title>
      <link href="/2022/12/22/%E5%86%85%E5%AD%98/DRAM%E6%9E%B6%E6%9E%84%E5%9F%BA%E7%A1%80/"/>
      <url>/2022/12/22/%E5%86%85%E5%AD%98/DRAM%E6%9E%B6%E6%9E%84%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p><a href="https://hackmd.io/@WeiCheng14159/SyW1xGBId">å‚è€ƒæ–‡ç« </a>ï¼Œè¿›è¡Œä¸€ä¸ªç®€å•çš„ç¿»è¯‘</p><p>åŒæ—¶ï¼Œæ›´å¤šçš„å‚è€ƒäº†2008å¹´å‡ºç‰ˆçš„Memory Systemçš„ç¬¬åç« å†…å®¹ã€‚</p><p>ç›®å‰ä½¿ç”¨DRAMçš„åŸºæœ¬æ¶æ„ä¸ºProcessor &lt;&#x3D;&gt; Memory Controller &lt;&#x3D;&gt; DRAMã€‚</p><p>å…¶ä¸­DRAMä¸­åŒ…å«äº†Channel &#x3D;&gt; Rank &#x3D;&gt; Chip &#x3D;&gt; Bank &#x3D;&gt; Subarray &#x3D;&gt; Mat &#x3D;&gt; Row, Column &#x3D;&gt; Cellï¼Œä¸‹é¢ä»‹ç»è¿™äº›æœ¯è¯­å…·ä½“å«ä¹‰ã€‚</p><h2 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h2><blockquote><p>A channel is the <strong>collection of all banks</strong> that share <strong>a common physical link</strong> (command, address, data buses) to the processor.</p></blockquote><img src="https://s2.loli.net/2022/12/22/GBilDndh2HE96YW.png" alt="image.png" style="zoom: 67%;" /><p>åœ¨ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ç§è®¾è®¡åªæœ‰ä¸€ä¸ªchannelã€‚ç¬¬äºŒç§å’Œç¬¬ä¸‰ç§è®¾è®¡ï¼Œä¸€ä¸ªMemory Controlleræœ‰ä¸¤ä¸ªé€šé“ï¼Œè¿™ä¸¤ä¸ªé€šé“ååŒè¿è¡Œã€‚è¿™ç§channelè¢«ç§°ä¸ºç‰©ç†é€šé“ã€‚</p><p>è€Œä¸‹å›¾åˆ™æ˜¯é€»è¾‘ä¸Šçš„é€šé“ï¼Œä½¿ç”¨äº†å¤šä¸ªå†…å­˜æ§åˆ¶å™¨è¿›è¡Œå®ç°ã€‚</p><img src="https://s2.loli.net/2022/12/22/E9xmkepz5HbZi7D.png" alt="image.png" style="zoom:67%;" /><p>ä¹¦ä¸­ã€åšå®¢ä¸­å¯¹äºé€šé“å¹¶æ²¡æœ‰éå¸¸æ˜ç¡®çš„å®šä¹‰ã€‚ä½†åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­ï¼Œæˆ‘è®¤ä¸ºç¬¬ä¸€ç§æƒ…å†µæ›´å¸¸å‡ºç°ã€‚å¤šæ§åˆ¶å™¨ä¼¼ä¹å¹¶ä¸åœ¨è€ƒè™‘èŒƒå›´ä¹‹å†…ã€‚</p><h2 id="Rank"><a href="#Rank" class="headerlink" title="Rank"></a>Rank</h2><p>Rankä»£è¡¨äº†ä¸€ç»„DRAMè®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡ä¼šåŒæ—¶å·¥ä½œç›¸åº”ä¸€ä¸ªç»™å®šçš„æŒ‡ä»¤ã€‚</p><img src="/Users/ccrr/Library/Application Support/typora-user-images/image-20221222105415750.png" alt="image-20221222105415750" style="zoom: 67%;" /><p>ä¸Šå›¾ä¸­ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å†…å­˜æ‹“æ‰‘å›¾ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªrankï¼Œæ¯ä¸ªrankä¸­æœ‰4ä¸ªDRAM deviceã€‚addresså’Œcommandçº¿è·¯è¿æ¥äº†æ¯ä¸€ä¸ªè®¾å¤‡ã€‚åœ¨è¯¥è®¾è®¡ä¸­ä½¿ç”¨chip-selectæ¥é€‰æ‹©å¯¹åº”çš„rankæ¥å¤„ç†æŒ‡ä»¤ã€‚è€Œdata busè¢«åˆ†éš”æˆäº†4éƒ¨åˆ†ï¼Œåˆ†åˆ«è¿æ¥ä¸åŒçš„DRAMè®¾å¤‡ã€‚</p><p>é‚£ä¹ˆæ˜¾ç„¶ï¼Œè¿™é‡Œæåˆ°çš„DRAM deviceå’Œchipä¸¤ä¸ªæœ¯è¯­æ˜¯å¯¹åº”çš„ã€‚</p><h2 id="Bank"><a href="#Bank" class="headerlink" title="Bank"></a>Bank</h2><p>bankæ˜¯ä¸€ç³»åˆ—åœ¨DRAMè®¾å¤‡å†…éƒ¨çš„ç‹¬ç«‹å†…å­˜é˜µåˆ—çš„é›†åˆã€‚</p><img src="https://s2.loli.net/2022/12/22/6qchDSWQlZLbAzC.png" alt="image.png" style="zoom:67%;" /><p>åœ¨è¿™ä¸ªå†…å­˜è®¾å¤‡ä¸­ï¼Œæœ‰4ä¸ªbankï¼Œæ¯ä¸ªbankéƒ½æœ‰éå¸¸å¤šçš„DRAMé˜µåˆ—ã€‚</p><blockquote><p>the multi-bank architecture allows commands such as read requests to different banks to be pipelined. Certain commands, such as refresh commands, can also be engaged in multiple banks in parallel.</p></blockquote><p>å¯ä»¥è®¤ä¸ºï¼Œmulti-bankçš„è®¾è®¡èƒ½å¤Ÿæ›´å¤§ç¨‹åº¦çš„ä¿ƒè¿›è®¾å¤‡çš„å¹¶è¡Œæ€§ã€‚</p><h2 id="DRAM-Subarrayï¼ˆArrayï¼‰"><a href="#DRAM-Subarrayï¼ˆArrayï¼‰" class="headerlink" title="DRAM Subarrayï¼ˆArrayï¼‰"></a>DRAM Subarrayï¼ˆArrayï¼‰</h2><p>å…¶ä¸­ï¼Œä¸€ä¸ªbankè¿˜ä¼šå‘—åˆ†æˆéå¸¸å¤šçš„tileã€‚ä¸€æ•´è¡Œçš„tileå°±è¢«ç§°ä¸ºä¸€ä¸ªsubarrayã€‚è€Œæ‰€æœ‰çš„subarrayåŠ èµ·æ¥å°±æ˜¯DRAM arrayã€‚</p><img src="https://s2.loli.net/2022/12/22/7HF3z5RGOeJaM1I.png" alt="image.png" style="zoom:67%;" /><h2 id="Row"><a href="#Row" class="headerlink" title="Row"></a>Row</h2><blockquote><p>a <em>row</em> is simply a group of stor- age cells that are activated in parallel in response to a row activation command.</p></blockquote><img src="https://s2.loli.net/2022/12/22/5lZtc6WkpgzyNDI.png" alt="image.png" style="zoom:67%;" /><p>åœ¨ä¸€ä¸ªrankä¸­åŒ…å«äº†4ä¸ªbankï¼Œ</p><h2 id="Column"><a href="#Column" class="headerlink" title="Column"></a>Column</h2><p>Column of data is the smallest addressable unit of memory.</p><blockquote><p>The size of a column of data is the same as the width of the data bus.</p></blockquote><img src="https://s2.loli.net/2022/12/22/vYngWu4xR3HqjT8.png" alt="image.png" style="zoom:67%;" /><p>å¯¹äºsubarrayï¼Œrowï¼Œcolumnæ¥è¯´ï¼Œå¯ä»¥ç”¨åšå®¢ä¸­çš„ä¸€å¼ å›¾è¿›è¡Œç†è§£ï¼ˆç”±äºä¹¦æœ¬ä¸­å¹¶æ²¡æœ‰æåŠsubarrayï¼Œæˆ‘ä¹Ÿæ— æ³•äº†è§£æ›´å¤šå…³äºå®ƒçš„å®šä¹‰ã€‚ï¼‰</p><p><img src="https://s2.loli.net/2022/12/22/qyN8DWbRG4J32MX.png" alt="image.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> DRAM </tag>
            
            <tag> memory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerå­¦ä¹ </title>
      <link href="/2022/12/20/docker%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/12/20/docker%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>itâ€™s simply a translation to <a href="https://docs.docker.com/get-started/">docker tutorial</a></p><h2 id="containerå’Œcontainer-image"><a href="#containerå’Œcontainer-image" class="headerlink" title="containerå’Œcontainer image"></a>containerå’Œcontainer image</h2><blockquote><p>Simply put, a container is a sandboxed process on your machine that is isolated from all other processes on the host machine. That isolation leverages <a href="https://medium.com/@saschagrunert/demystifying-containers-part-i-kernel-space-2c53d6979504">kernel namespaces and cgroups</a>, features that have been in Linux for a long time. </p></blockquote><p>containeræ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„imageçš„å®ä¾‹ã€‚å¯ä»¥å¯¹ä¸€ä¸ªcontainerè¿›è¡Œåˆ›å»ºã€å¼€å§‹ã€åœæ­¢ã€ç§»åŠ¨ã€åˆ é™¤çš„æ“ä½œã€‚</p><p>containerå¯ä»¥åœ¨æœ¬åœ°æœºå™¨ï¼Œè™šæ‹Ÿæœºï¼Œæˆ–è€…éƒ¨ç½²åœ¨äº‘ä¸Šè¿è¡Œã€‚</p><p>containerä¸å…¶ä»–çš„containersæ˜¯éš”ç¦»çš„ï¼Œè¿è¡Œç€è‡ªå·±çš„è½¯ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶å’Œé…ç½®ã€‚</p><p>è€ŒimageåŒ…æ‹¬äº†containerçš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰€æœ‰çš„ä¾èµ–ã€é…ç½®ã€è„šæœ¬ã€äºŒè¿›åˆ¶æ–‡ä»¶ç­‰ç­‰ã€‚</p><p>éœ€è¦ä½¿ç”¨Dockerfileæ–‡ä»¶æ„å»ºä¸€ä¸ªcontainer imageã€‚</p><blockquote><p>A Dockerfile is simply a text-based file with no file extension. A Dockerfile contains a script of instructions that Docker uses to create a container image.</p></blockquote><p><code>docker build</code>æŒ‡ä»¤é€šè¿‡Dockerfileæ„å»ºäº†ä¸€ä¸ªå…¨æ–°çš„container imageã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">18</span>-alpine</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yarn install --production</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;node&quot;</span>, <span class="string">&quot;src/index.js&quot;</span>]</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">3000</span></span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œï¼š<code>docker build -t getting-started .</code>å³å¯æˆåŠŸåˆ›å»ºä¸€ä¸ªimageã€‚</p><p>é¦–å…ˆdockerä¼šä¸‹è½½å¾ˆå¤šlayerï¼Œå› ä¸ºéœ€è¦å°†<code>node:18-alpine</code>é•œåƒä¸‹è½½ä¸‹æ¥ã€‚</p><p>ä½¿ç”¨yarnæŒ‡ä»¤å®‰è£…åº”ç”¨ä¾èµ–ï¼ŒCMDæŒ‡ä»¤æŒ‡å®šäº†é»˜è®¤çš„å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šåœ¨å¼€å§‹ä¸€ä¸ªcontaineræ—¶æ‰§è¡Œã€‚</p><p>-tæŒ‡ä»¤æŒ‡å®šäº†imageçš„æ ‡ç­¾ã€‚</p><p>å‘½ä»¤è¡Œä¸­çš„<code>.</code>æŒ‡å®šäº†éœ€è¦åœ¨å½“å‰ç›®å½•è‡ªåŠ¨æŸ¥æ‰¾Dockerfileã€‚</p><blockquote><p>docker run -dp 3000:3000 getting-started</p></blockquote><p>-dè¡¨ç¤ºäº†æ–°çš„containerå°†ä¼šä»¥detached modeè¿è¡Œï¼ˆin the backgroundï¼‰ã€‚-pè¡¨ç¤ºäº†ç«¯å£æ˜ å°„ï¼Œå°†ä¸»æœºçš„3000ç«¯å£ä¸å®¹å™¨çš„3000ç«¯å£è¿›è¡Œäº†æ˜ å°„ã€‚</p><p>é™¤äº†è¿è¡Œä¸€ä¸ªcontainerï¼Œå½“ç„¶è¿˜éœ€è¦å­¦ä¼šç§»é™¤ä¸€ä¸ªcontainerã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>docker ps</code>æŒ‡ä»¤æ‰¾åˆ°containerçš„çŠ¶æ€ï¼Œä½¿ç”¨<code>docker stop</code>æŒ‡ä»¤åœæ­¢containerçš„è¿è¡Œã€‚ç”¨æ³•æ˜¯<code>docker stop &lt;the-container-id&gt;</code>ã€‚å½“containeråœæ­¢è¿è¡Œåï¼Œå¯ä»¥ä½¿ç”¨æŒ‡ä»¤<code>docker rm &lt;the-container-id&gt;</code>åˆ é™¤ç›¸åº”çš„containerã€‚</p><blockquote><p>Use the <code>docker tag</code> command to give the <code>getting-started</code> image a new name.</p></blockquote><p>è¿™æ¡æŒ‡ä»¤å°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„imageã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">â‹Š&gt; ~/g/app on master â¨¯ docker image ls                                                                                                            <span class="number">14</span>:<span class="number">09</span>:<span class="number">03</span></span><br><span class="line">REPOSITORY        TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">getting-started   latest    b2956362c236   <span class="number">6</span> minutes ago    <span class="number">255</span>MB</span><br><span class="line">&lt;none&gt;            &lt;none&gt;    <span class="number">977</span>d645603ad   <span class="number">13</span> minutes ago   <span class="number">255</span>MB</span><br><span class="line">â‹Š&gt; ~/g/app on master â¨¯ docker tag getting-started ccccrrrr/getting-started                                                                        <span class="number">14</span>:<span class="number">10</span>:<span class="number">08</span></span><br><span class="line">â‹Š&gt; ~/g/app on master â¨¯ docker image ls                                                                                                            <span class="number">14</span>:<span class="number">10</span>:<span class="number">36</span></span><br><span class="line">REPOSITORY                 TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">ccccrrrr/getting-started   latest    b2956362c236   <span class="number">7</span> minutes ago    <span class="number">255</span>MB</span><br><span class="line">getting-started            latest    b2956362c236   <span class="number">7</span> minutes ago    <span class="number">255</span>MB</span><br><span class="line">&lt;none&gt;                     &lt;none&gt;    <span class="number">977</span>d645603ad   <span class="number">14</span> minutes ago   <span class="number">255</span>MB</span><br></pre></td></tr></table></figure><p>å½“æ¯ä¸€æ¬¡å¼€å¯ä¸€ä¸ªcontainerçš„æ—¶å€™ï¼Œæ•°æ®éƒ½ä¼šè¢«æ¸…é™¤ã€‚åŒæ—¶ï¼Œå½“ä½¿ç”¨å‘½ä»¤removeæ•´ä¸ªcontainerçš„æ—¶å€™ï¼Œæ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼ŒæŒä¹…åŒ–æ•°æ®æ˜¯è¾ƒä¸ºé‡è¦çš„ã€‚</p><p>å¯ä»¥åœ¨docker desktopä¸­è¿›å…¥æŒ‡å®šçš„å®¹å™¨è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œï¼Œæˆ–è€…æ˜¯ç›´æ¥ä½¿ç”¨<code>docker exec</code>ï¼ŒåŒæ—¶åˆ¶å®šcontainer idæ¥è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œã€‚</p><h2 id="Volume"><a href="#Volume" class="headerlink" title="Volume"></a>Volume</h2><blockquote><p><a href="https://docs.docker.com/storage/volumes/">Volumes</a> provide the ability to connect specific filesystem paths of the container back to the host machine.</p></blockquote><p>å¦‚æœä¸€ä¸ªæ–‡ä»¶å¤¹èƒŒæŒ‚åœ¨åˆ°äº†ä¸€ä¸ªcontainerä¸­ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªcontaineræ”¹å˜å…¶ä¸­çš„æ–‡ä»¶æ—¶ï¼Œä¸»æœºä¹Ÿèƒ½å¤Ÿæ„ŸçŸ¥åˆ°ã€‚ä¹‹åé‡å¯ï¼Œä¹Ÿèƒ½å¾—åˆ°å…¶ä¸­çš„å˜åŒ–ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 -v todo-db:/etc/todos getting-started</span><br></pre></td></tr></table></figure><p>-vå°±æ˜¯æŒ‡å®šäº†å°†volumnæŒ‚è½½åˆ°containerçš„å“ªä¸ªä½ç½®ã€‚</p><p>å¯ä»¥åªç”¨<code>docker volume create [volume-name]</code>æ¥åˆ›å»ºä¸€ä¸ªvolumeã€‚</p><p>å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„volumeçš„å…·ä½“ä¿¡æ¯ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect todo-db</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2019-09-26T02:18:36Z&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/todo-db/_data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;todo-db&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ‰€è¯´éƒ½æ˜¯named volumeï¼Œå³åˆ›å»ºä¸€ä¸ªæœ‰åå­—çš„volumeï¼Œç„¶ååœ¨åˆ›å»ºcontaineræ—¶é€šè¿‡åå­—æ¥ä½¿ç”¨å®ƒä»¬ã€‚</p><p>åŒæ—¶ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œç§°ä¸ºbind mountsã€‚è¿™æ ·ï¼Œå¯ä»¥æŠŠæºæ–‡ä»¶æŒ‚åœ¨åˆ°containerä¸­ï¼Œå¯¹äºä¿®æ”¹æ¥è¯´éå¸¸æ–¹ä¾¿ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 \</span><br><span class="line">     -w /app -v <span class="string">&quot;<span class="subst">$(pwd)</span>:/app&quot;</span> \</span><br><span class="line">     node:18-alpine \</span><br><span class="line">     sh -c <span class="string">&quot;yarn install &amp;&amp; yarn run dev&quot;</span></span><br></pre></td></tr></table></figure><p><code>-w</code>å®šä¹‰äº†working directoryï¼Œè¡¨æ˜ä¸‹é¢çš„æŒ‡ä»¤åº”è¯¥åœ¨å“ªä¸ªç›®å½•ä¸‹è¿è¡Œã€‚</p><p><code>-v</code>å®šä¹‰äº†è®²å½“å‰ç›®å½•æŒ‚è½½åˆ°<code>/app</code>ä¸Šã€‚</p><p><code>node:18-alpine</code>æ˜¯ä½¿ç”¨çš„é•œåƒã€‚</p><p>æœ€åä¸€è¡Œæ˜¯è¦åœ¨<code>/app</code>ä¸‹æ‰§è¡Œçš„æŒ‡ä»¤ã€‚</p><p>æŒ‡ä»¤<code>docker logs -f &lt;container-id&gt;</code>èƒ½å¤Ÿçœ‹åˆ°containerè¿è¡Œçš„å…¨éƒ¨logã€‚</p><p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œbind mountsæ›´ä¸ºå¸¸è§ã€‚</p><h2 id="Multi-container-apps"><a href="#Multi-container-apps" class="headerlink" title="Multi container apps"></a>Multi container apps</h2><p>å½“éœ€è¦æœ‰å¾ˆå¤šåº”ç”¨ä¸€èµ·å·¥ä½œæ—¶ï¼Œæœ€å¥½è¿˜æ˜¯ä¸è¦è®©ä¸€ä¸ªcontaineré‡Œè¿è¡Œæ‰€æœ‰çš„åº”ç”¨ã€‚ç†æƒ³æƒ…å†µä¸‹åº”è¯¥æ˜¯ä¸€ä¸ªcontainerè¿è¡Œä¸€ä¸ªåº”ç”¨ã€‚å®¹å™¨ä¹‹é—´é€šè¿‡<strong>network</strong>è¿›è¡Œæ²Ÿé€šã€‚</p><p>æœ‰ä¸¤ç§æ–¹æ³•å°†ä¸€ä¸ªå®¹å™¨æ”¾åœ¨æŒ‡å®šç½‘ç»œä¸Šï¼š1. åœ¨å¼€å¯ä»–æ—¶å°±æŒ‡å®šï¼›2. è¿æ¥ä¸€ä¸ªç°æœ‰çš„å®¹å™¨ã€‚</p><p>å¯¹äºç¬¬ä¸€ç§æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --network todo-app nicolaka/netshoot</span><br></pre></td></tr></table></figure><p>æŒ‡å®šè¯¥å®¹å™¨åœ¨todo-appçš„ç½‘ç»œä¸‹è¿è¡Œã€‚</p><p>æˆ–è€…åœ¨ç°æœ‰å®¹å™¨ä¸­æŒ‡å®šè¿è¡Œæ—¶çš„éœ€è¦é€šä¿¡çš„ç«¯å£å³å¯ã€‚</p><h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><blockquote><p>Docker Compose is a tool that was developed to help define and share multi-container applications. With Compose, we can create a YAML file to define the services and with a single command, can spin everything up or tear it all down.</p></blockquote><p>ä¸€ä¸ªdocker composeå°±åƒè¿™æ ·ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    image: node:<span class="number">18</span>-alpine</span><br><span class="line">    command: sh -c <span class="string">&quot;yarn install &amp;&amp; yarn run dev&quot;</span></span><br><span class="line">    ports:</span><br><span class="line">      - <span class="number">3000</span>:<span class="number">3000</span></span><br><span class="line">    working_dir: /app</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_HOST: mysql</span><br><span class="line">      MYSQL_USER: root</span><br><span class="line">      MYSQL_PASSWORD: secret</span><br><span class="line">      MYSQL_DB: todos</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:<span class="number">8.0</span></span><br><span class="line">    volumes:</span><br><span class="line">      - todo-mysql-data:/var/lib/mysql</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: secret</span><br><span class="line">      MYSQL_DATABASE: todos</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  todo-mysql-data:</span><br></pre></td></tr></table></figure><p>å®Œæˆä¸€ä¸ªdocker composeæ–‡ä»¶åä½¿ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p>å³å¯åˆ›å»ºæŒ‡å®šçš„æ‰€æœ‰containerï¼Œè®©å®ƒä»¬ä¸€èµ·è¿è¡Œèµ·æ¥ã€‚å…¶ä¸­<code>-d</code>è¡¨ç¤ºæ‰€æœ‰containeréƒ½ä¼šåœ¨åå°è¿è¡Œã€‚</p><h2 id="Image-building"><a href="#Image-building" class="headerlink" title="Image building"></a>Image building</h2><p>ä½¿ç”¨<code>docker image history getting-started</code>èƒ½å¤ŸæŸ¥çœ‹getting-startedé•œåƒæ˜¯å¦‚ä½•æ„å»ºèµ·æ¥çš„ã€‚è¿™ä¸ªè¢«ç§°ä¸ºimageçš„layerã€‚å¢åŠ <code>--no-trunc</code>æ ‡å¿—èƒ½å¤Ÿçœ‹åˆ°æ›´å®Œæ•´çš„è¾“å‡ºã€‚</p><h3 id="Layer-caching"><a href="#Layer-caching" class="headerlink" title="Layer caching"></a>Layer caching</h3><p>ä½¿ç”¨historyèƒ½å¤Ÿçœ‹åˆ°ä¸€ä¸ªimageæ„å»ºçš„å®Œæ•´layerï¼Œé‚£ä¹ˆå½“æœ‰ä¸€å±‚layeræ”¹å˜ä¹‹åä¸‹æ¸¸çš„æ‰€æœ‰layeréƒ½ä¼šé‡æ–°æ„å»ºã€‚</p><p>ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„åˆ©ç”¨ä¹‹å‰æ„å»ºçš„layerï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªé€»è¾‘cacheï¼Œè®©åç»­çš„æ„å»ºé€Ÿåº¦æ›´å¿«ã€‚d</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gem5ä¸nvmainçš„é›†æˆ</title>
      <link href="/2022/12/20/gem5/gem5%E4%B8%8Envmain%E7%9A%84%E9%9B%86%E6%88%90/"/>
      <url>/2022/12/20/gem5/gem5%E4%B8%8Envmain%E7%9A%84%E9%9B%86%E6%88%90/</url>
      
        <content type="html"><![CDATA[<p>ç”±äºNVMainå·²ç»åœæ­¢ç»´æŠ¤å¾ˆä¹…äº†ï¼Œç›´æ¥ä¸æ–°çš„gem5é›†æˆä¼šå‡ºç°å¾ˆå¤šé”™è¯¯ï¼Œåªèƒ½é€‰å–è€ç‰ˆæœ¬çš„gem5è¿›è¡ŒååŒç¼–è¯‘ã€‚è€ç‰ˆæœ¬çš„ç¼–è¯‘ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œåœ¨è¿™é‡Œç½—åˆ—å‡ºæ¥ï¼Œä»¥å…åé¢è¿˜æœ‰äººéœ€è¦ä½¿ç”¨NVMainä½†ä¸çŸ¥é“è¯¥å¦‚ä½•è¿è¡Œå®ƒã€‚</p><h2 id="å·¥å…·ä¸‹è½½"><a href="#å·¥å…·ä¸‹è½½" class="headerlink" title="å·¥å…·ä¸‹è½½"></a>å·¥å…·ä¸‹è½½</h2><p>ä¸‹è½½å·²ç»ç»è¿‡patchçš„<a href="https://github.com/cyjseagull/gem5-nvmain-hybrid-simulator">æºä»£ç </a>ã€‚åœ¨è¿™ä¸ªä»“åº“ä¸­å·²ç»å‡†å¤‡å¥½äº†æ—§ç‰ˆæœ¬çš„gem5ï¼Œä»¥åŠnvmainã€‚</p><p>æ¨èä½¿ç”¨dockerã€‚ç¬”è€…ä¹‹å‰ä½¿ç”¨Ubuntu22.04é‡åˆ°äº†éå¸¸å¤šçš„warningå’Œbugï¼Œå³ä½¿å…¨éƒ¨è§£å†³äº†é›†æˆä¹Ÿæ²¡æœ‰æˆåŠŸã€‚åœ¨æ­¤ä½¿ç”¨çš„æ˜¯Ubuntu18.04è¿›è¡Œç¼–è¯‘ã€‚å¦‚æœè¯»è€…æ²¡æœ‰Ubuntu18ï¼Œæˆ–è€…ä¸æƒ³å†è¿›è¡Œè¿‡å¤šçš„ç¯å¢ƒé…ç½®ï¼Œä½¿ç”¨dockeræ˜¯æœ€ç®€å•çš„æ–¹æ¡ˆã€‚</p><h2 id="ç¯å¢ƒæ„å»º"><a href="#ç¯å¢ƒæ„å»º" class="headerlink" title="ç¯å¢ƒæ„å»º"></a>ç¯å¢ƒæ„å»º</h2><p>æ„å»ºçš„docker fileå¦‚ä¸‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /simulator</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt -y update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt -y upgrade</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt -y install python2.7 g++ scons vim swig m4 mercurial python-dev zlib1g-dev libprotobuf-dev protobuf-compiler libprotoc-dev libgoogle-perftools-dev</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>docker build -t gem5-nvmain .</code>æŒ‡ä»¤æ„å»ºå‡ºé•œåƒã€‚ä¸‹è½½ä¾èµ–éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´ã€‚</p><p>ç„¶åï¼Œä½¿ç”¨<code>docker run -it -v ï½/simulator/gem5-nvmain-hybrid-simulator:/simulator/gem5-nvmain -it gem5-nvmain</code>å°†ä¸‹è½½å¥½çš„æºä»£ç æŒ‚è½½åˆ°åˆ›å»ºå®¹å™¨çš„&#x2F;simulatorç›®å½•ä¸‹ã€‚å°±å®Œæˆäº†åŸºæœ¬çš„ç¯å¢ƒæ„å»ºã€‚</p><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><p>åœ¨gem5-stableç›®å½•ä¸‹è¿è¡Œ<code>scons EXTRAS=nvmain-path -j4 build/X86/gem5.opt</code>å³å¯å¼€å§‹ç¼–è¯‘ã€‚</p><p>ç¼–è¯‘è¿‡ç¨‹<a href="https://blog.csdn.net/qqq_11101/article/details/56682344">å‚è€ƒåšå®¢</a>ï¼Œåœ¨æ­¤ç¯‡åšå®¢ä¸­æåˆ°äº†ä¸¤ä¸ªå‘æˆ‘éƒ½é‡åˆ°äº†ï¼Œå¦‚æœå‡ºç°deprecatedè­¦å‘Šæˆ–è€…æœ‰å…³LO_Cacheçš„æŠ¥é”™å¯ä»¥ä½¿ç”¨è¯¥åšå®¢ä¸­çš„æ–¹æ³•è§£å†³é—®é¢˜ã€‚</p><p>å¤§æ¦‚å‡ åˆ†é’Ÿè¿‡åå°±ç¼–è¯‘å®Œæˆå•¦^_^</p>]]></content>
      
      
      
        <tags>
            
            <tag> gem5 </tag>
            
            <tag> nvmain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥è®°è®°å½•</title>
      <link href="/2022/09/11/%E6%97%A5%E8%AE%B0%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/09/11/%E6%97%A5%E8%AE%B0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ç»å†äº†ä¸€æ®µæ¯”è¾ƒè¿·èŒ«çš„æ—¶é—´ï¼Œå’Œå»å¹´çš„è¿·èŒ«ä¸å¤ªä¸€æ ·ã€‚å»å¹´çš„è¿·èŒ«æ¦‚æ‹¬æ¥è®²æ˜¯æ²¡æœ‰å¸Œæœ›å’Œä¸€ç§æ·±æ·±çš„æ— åŠ›æ„Ÿï¼Œä¸çŸ¥é“è¯¥åšä»€ä¹ˆï¼Œä¸çŸ¥é“èƒ½åšä»€ä¹ˆã€‚ä¸è¿‡åœ¨è°ƒæ•´ä¹‹åèƒ½å¤Ÿæ˜ç¡®ä»€ä¹ˆæ˜¯ç›®æ ‡äº†ï¼Œå› æ­¤ä¹ŸçŸ­æš‚åœ°äº«å—äº†çŠ¶æ€éå¸¸å¥½çš„å‡ ä¸ªæœˆã€‚æœ€è¿‘åˆæœ‰äº›è¿·èŒ«ï¼Œè¿·èŒ«çš„åŸå› æˆ‘çŒœæµ‹æ˜¯å¸å–äº†ä¸Šä¸€æ¬¡çš„æ•™è®­æ€ç»´å˜å¾—æåº¦ç†æ€§ï¼ŒæŠŠæƒ³è¦çš„æ ‡å‡†å®šçš„è¿‡é«˜ï¼ŒæŠŠä¸€äº›å¯ä»¥å¾—åˆ°ä½†æ²¡æœ‰é‚£ä¹ˆæƒ³è¦çš„ä¸œè¥¿éƒ½èˆå¼ƒäº†ï¼Œé™·å…¥äº†ä¸çŸ¥é“è¯¥å¾€å“ªæ¡è·¯ä¸Šèµ°çš„è¿·èŒ«ã€‚å“ˆå“ˆï¼Œç¡®å®æœ‰ä¸€äº›æç«¯äº†ï¼Œå†åŠ ä¸Šæ€ç»´ä¸Šæœ‰äº›æ€ æƒ°ï¼Œæ‰“æ¸¸æˆæ€»æ˜¯æ¯”çœ‹ä»£ç å¼€å¿ƒå¾ˆå¤šï¼Œæ‰€ä»¥è€ƒè¯•ç»“æŸä¹‹åå°±æ˜¯åŸç¥+å¡å°”è¾¾çš„æ¨¡å¼äº†ï¼Œåœ¨å­¦ç§‘ä¸Šå®Œå…¨æ²¡æœ‰äº›é•¿è¿›ã€‚ä¸è¿‡ä¹Ÿè¿‡å¾—ç®—æ¯”è¾ƒæ„‰å¿«ï¼Œä¸è¿‡è¿™ç§æç«¯çš„æ€åº¦å¯ä¸ä¼šéšæ—¶é—´æ…¢æ…¢æ·¡åŒ–ï¼Œæ€»ä¹‹ï¼Œæˆªè‡³ç›®å‰é—®é¢˜ä¾æ—§å­˜åœ¨ã€‚</p><p>å°çš„æ—¶å€™æƒ³åšä¸€ä¸ªæ¸…é†’ä½†ç—›è‹¦ç€çš„äººï¼Œå¤§äº†ä¹‹åå€’æ˜¯åŠæ¢¦ä¸é†’ï¼Œä½†æ˜¯è‡ªå·±è›®ä¼šç»™è‡ªå·±åˆ›é€ ç—›è‹¦çš„ï¼Œäºæ˜¯å¼€å§‹è‹¦äºæ²¡æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•å±•å¼€è‡ªæ•‘ã€‚æœ€è¿‘åœ¨å’Œåˆä¸­åŒå­¦çš„èŠå¤©ä¸­ä¼¼ä¹æ‰¾åˆ°äº†ä¸€äº›å¥‘æœºï¼Œå½“ç„¶èŠå¤©å†…å®¹æœ¬èº«ä¸æ¶‰åŠä»€ä¹ˆé“ç†ï¼Œç”šè‡³æœ‰äº›æ— èŠï¼Œæ— éå°±æ˜¯è°ˆæ‹çˆ±+å­¦ä¹ +ä¿ç ”ä¹‹ç±»çš„è¯ï¼Œä½†æ˜¯ç¡®å®çœ‹å†å²æ€»è§‰å¾—æ— å…³ç—›ç—’ï¼Œè‡ªå·±æ„Ÿè§‰åˆ°æ—¶é—´çš„æµæ·Œæ˜¯ä¸€ä»¶éå¸¸å¥‡å¦™çš„äº‹æƒ…ï¼Œå³ä½¿éå¸¸å¹³å¸¸çš„äº‹æƒ…å‘ç”Ÿåœ¨ä»–èº«ä¸Šï¼Œæˆ‘ä¹Ÿè§‰å¾—èƒ½æ„Ÿæ‚Ÿåˆ°éå¸¸å¤šï¼Œä¹Ÿè®¸ä¹Ÿæ˜¯äº¤æµéƒ½åœ¨å›¢é˜Ÿ+å¯å®¤ï¼Œä»–ä»¬çš„æˆé•¿è½¨è¿¹å’Œæƒ³æ³•éƒ½å’Œåˆä¸­åŒå­¦å¤ªä¸ä¸€æ ·ï¼Œè€Œæˆ‘ç”±äºåœ¨æˆ‘ä»¬å­¦é™¢å‘†å¤ªä¹…ç”šè‡³å½¢æˆäº†äº›å¯ç¬‘å¹¼ç¨šçš„æ€ç»´æ¨¡å¼ï¼Œä»è€Œå¯¼è‡´äº†æˆ‘åœ¨è¿™ä¸€æ®µæ—¶é—´é‡Œä¸çŸ¥é“è¯¥å»åšäº›ä»€ä¹ˆã€‚</p><p>é‚£ä¹ˆæƒ³åˆ°è¿™é‡Œï¼Œæˆ‘çš„æ„Ÿæ‚Ÿä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„äº†ã€‚è¯´å‡ºæ¥äº†å°±æ²¡é‚£ä¹ˆå¤§ç©ºé—´å»ä½“å‘³äº†^_^ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> éšæƒ³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSD-OCSSD-ZNS</title>
      <link href="/2022/09/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/SSD-OCSSD-ZNS/"/>
      <url>/2022/09/09/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/SSD-OCSSD-ZNS/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¼ ç»ŸSSDï¼ŒOCSSDï¼ŒZNS-SSD"><a href="#ä¼ ç»ŸSSDï¼ŒOCSSDï¼ŒZNS-SSD" class="headerlink" title="ä¼ ç»ŸSSDï¼ŒOCSSDï¼ŒZNS SSD"></a>ä¼ ç»ŸSSDï¼ŒOCSSDï¼ŒZNS SSD</h2><p>SSDæœ‰ä¸HDDæœºæ¢°ç¡¬ç›˜å®Œå…¨ä¸åŒçš„æ€§è´¨ã€‚æœºæ¢°ç¡¬ç›˜æ˜¯å¯ä»¥è¦†ç›–å†™çš„ï¼Œä½†SSDåœ¨å†™å…¥æ•°æ®å‰å¿…é¡»å…ˆæ“¦é™¤ã€‚SSDåœ¨é—ªå­˜å•å…ƒå­˜å–æ•°æ®ä¸­æœ‰pageå’Œblockçš„æ¦‚å¿µã€‚SSDè¢«åˆ’åˆ†æˆå¤šä¸ªå¤§å°å›ºå®šblockï¼Œä¸€ä¸ªblockè¢«åˆ’åˆ†æˆäº†å¾ˆå¤špageã€‚blockæ˜¯æœ€å°æ“¦é™¤å•ä½ï¼Œå†™æ“ä½œåªèƒ½å†™åˆ°ç©ºpageä¸­ã€‚ç”±äºSSDä½¿ç”¨çš„æ˜¯é—ªå­˜é¢—ç²’ï¼Œæœ‰ä¸€å®šçš„æ“¦é™¤æ¬¡æ•°é™åˆ¶ã€‚å› æ­¤ï¼Œä¸ºäº†èƒ½æé«˜SSDçš„ä½¿ç”¨å¯¿å‘½ï¼Œè¿˜éœ€è¦åœ¨å…¶ä¸­åŠ å…¥å‡è¡¡ç£¨æŸçš„ç­–ç•¥ã€‚</p><p>ä¸ºäº†ä¿è¯ä¸Šå±‚è®¾å¤‡æ— éœ€ä»»ä½•ä¿®æ”¹ï¼Œå°±èƒ½ä»æœºæ¢°ç¡¬ç›˜æ¢æˆSSDï¼Œä¼ ç»ŸSSDéœ€è¦åšåˆ°å’Œæœºæ¢°ç¡¬ç›˜ä¸€æ ·èƒ½å¤ŸåŸåœ°ä¿®æ”¹æ•°æ®ï¼ŒSSDä¸­çš„FTLæ¨¡å—æ­£æ˜¯å»å®ç°è¿™ä¸ªç›®çš„çš„ã€‚åœ¨FTLæ¨¡å—ä¸­ï¼Œæœ‰DRAMæ¥ä¿å­˜é€»è¾‘å—åœ°å€åˆ°ç‰©ç†å—åœ°å€çš„æ˜ å°„å…³ç³»ï¼ŒåŒæ—¶è¿˜éœ€è¦æ·»åŠ åƒåœ¾å›æ”¶ç­–ç•¥ä»¥å‡å°‘å¤§é‡çš„å¤±æ•ˆæ•°æ®ã€‚ç”±äºä¸Šå±‚çš„æ•°æ®æ”¾ç½®ä¹ æƒ¯å’ŒSSDæœ¬èº«çš„æ€§è´¨å¹¶ä¸åŒ¹é…ï¼Œè¿™æ ·çš„è®¾è®¡ä½¿ä¼ ç»ŸSSDå¹¶ä¸èƒ½å®Œå…¨åˆ©ç”¨è‡ªèº«çš„æ‰€æœ‰èµ„æºï¼Œå¯¼è‡´äº†over-provisioningé—®é¢˜ï¼Œè¾ƒå¤§çš„WAFå’Œå°¾éƒ¨å»¶è¿Ÿã€‚</p><p>Open Channel SSDçš„è®¾è®¡æ˜¯åœ¨ä¼ ç»ŸSSDä¸Šçš„æ”¹è¿›ã€‚ç›¸è¾ƒäºä¹‹å‰SSDä¸ä¸»æœºçš„ç›¸å¯¹éš”ç¦»ï¼Œå®ƒå…è®¸ä¸»æœºä¸SSDé€šè¿‡ä¸€ç»„è¿ç»­çš„LBAå—è¿›è¡Œåä½œã€‚å®ƒå°†åŸæœ¬FTLè´Ÿè´£çš„ä»»åŠ¡è½¬äº¤ç”±ä¸»æœºå®Œæˆï¼Œæ¶ˆé™¤äº†SSDè®¾å¤‡çš„åƒåœ¾å›æ”¶å¼€é”€ï¼Œä¹Ÿæ„å‘³ç€é™ä½äº†over-provisioningå’ŒDRAMçš„æˆæœ¬ï¼Œç›¸åº”åœ°ï¼Œè¿˜èƒ½æå‡éƒ¨åˆ†çš„è¯»å†™æ€§èƒ½ã€‚ä½†å°†æ‰€æœ‰çš„æ•°æ®ç®¡ç†äº¤ç”±ä¸»æœºè´Ÿè´£ï¼Œè¯´æ˜ä¸»æœºè¿˜éœ€è¦ç®¡ç†ä¸åŒSSDå®ç°çš„å·®å¼‚ï¼Œåç»­ä¸ºäº†é€‚é…ä¸åŒç‰ˆæœ¬SSDï¼Œç»´æŠ¤OCSSDè½¯ä»¶æ¥å£çš„éš¾åº¦å¾ˆå¤§ã€‚</p><p>ZNSåœ¨OCSSDçš„è®¾è®¡æ€æƒ³åšäº†äº›ä¿®æ”¹ï¼Œå®ƒé¿å…ä¸»æœºç›´æ¥ç®¡ç†SSDçš„ç‰¹æ€§ï¼Œè€Œæ˜¯æä¾›äº†ä¸€å¥—ç›¸å¯¹ç‹¬ç«‹çš„å­˜å‚¨æ¥å£ï¼Œä¸éœ€è¦é’ˆå¯¹SSDçš„ä¸åŒæ€§è´¨å®šåˆ¶ä¸åŒçš„æ•°æ®ç®¡ç†ç­–ç•¥ï¼Œç»´æŠ¤çš„éš¾åº¦çš„å·¥ä½œé‡ä¹Ÿä¸é‚£ä¹ˆé«˜ã€‚ZNSçš„è®¾è®¡å°†è½¯ä»¶çš„éƒ¨åˆ†äº¤ç”±ä¸»æœºå®Œæˆï¼Œç¡¬ä»¶çš„éƒ¨åˆ†ç”±SSDå®Œæˆã€‚å³ä¸»æœºå»å†³ç­–æ•°æ®çš„æ”¾ç½®ï¼ŒSSDå»å¤„ç†å‡è¡¡ç£¨æŸçš„é—®é¢˜ã€‚</p><h2 id="ZNSæ¥å£çš„ä¼˜åŠ¿å’Œé—®é¢˜"><a href="#ZNSæ¥å£çš„ä¼˜åŠ¿å’Œé—®é¢˜" class="headerlink" title="ZNSæ¥å£çš„ä¼˜åŠ¿å’Œé—®é¢˜"></a>ZNSæ¥å£çš„ä¼˜åŠ¿å’Œé—®é¢˜</h2><p>ZNSçš„è®¾è®¡ä½¿è®¾å¤‡æœ‰æ›´å¤šæœºä¼šå»æå‡è¯»å†™æ€§èƒ½ï¼Œæ›´æœ‰å¯èƒ½ä½¿ç”¨é«˜æ•ˆçš„æ”¾ç½®æ•°æ®ç®—æ³•é™ä½WAFã€‚ç”±äºä¸éœ€è¦FTLæ¨¡å—ï¼Œå‡å°‘äº†DRAMçš„ç›¸å…³æˆæœ¬å’Œover-provisioningé—®é¢˜ã€‚ä½†ä¸»æœºéœ€è¦å¤„ç†çš„ä»»åŠ¡å˜å¤šäº†ï¼Œéœ€è¦å»ç®¡ç†zoneçš„å¼€ã€å…³ã€é‡ç½®å’Œåƒåœ¾å›æ”¶ï¼ŒåŒæ—¶å¿…é¡»é™åˆ¶å†™æ“ä½œæ˜¯çº¿æ€§çš„ã€‚åœ¨ä¸»æœºéœ€è¦ç®¡ç†çš„è¿™äº›æ–¹é¢ï¼Œéƒ½æœ‰ä¸€å®šçš„æå‡ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œæœ‰ZNS SSDä¼˜åŒ–çš„åƒåœ¾å›æ”¶ç­–ç•¥ï¼Œæœ‰é’ˆå¯¹RocksDBæ•°æ®æ–‡ä»¶æ”¾ç½®çš„ç­–ç•¥ä¼˜åŒ–çš„ç­‰ç­‰ï¼Œèƒ½å¤Ÿçœ‹åˆ°åç»­æœ‰å¾ˆå¤šè®ºæ–‡éƒ½æ˜¯é’ˆå¯¹ZNSçš„éƒ¨åˆ†ç»†èŠ‚è¿›è¡Œä¼˜åŒ–ã€‚é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘è®¤ä¸ºZNSæ¯”è¾ƒå¤§çš„é—®é¢˜æ˜¯åº”ç”¨çš„åœºæ™¯è¾ƒä¸ºå•ä¸€ï¼šåªæœ‰åœ¨çº¿æ€§å†™çš„åœºæ™¯ä¸‹æ‰èƒ½ä½¿ç”¨ZNSã€‚ç„¶è€Œç›®å‰å¤§éƒ¨åˆ†çš„åº”ç”¨è¿˜æ˜¯åå‘äºHDDçš„åŸåœ°ä¿®æ”¹çš„å­˜å‚¨æ¨¡å¼ï¼Œå¦‚æœæƒ³è¦å¤§èŒƒå›´åº”ç”¨ä¹Ÿè®¸éœ€è¦åœ¨ä¸»æœºçš„è½¯ä»¶æ¶æ„å±‚é¢è¿›è¡Œå¾ˆå¤šçš„ä¿®æ”¹ã€‚</p><h2 id="ZNSçš„åº”ç”¨"><a href="#ZNSçš„åº”ç”¨" class="headerlink" title="ZNSçš„åº”ç”¨"></a>ZNSçš„åº”ç”¨</h2><p>æœ‰å…³ZNSçš„ç ”ç©¶ä»åœ¨æŒç»­æ¨è¿›ï¼Œç›®å‰å·²æœ‰å¾ˆå¤šå¼€æºåº”ç”¨æ”¯æŒZNSã€‚æ¯”å¦‚ZenFSä½œä¸ºRocksDBçš„æ’ä»¶ï¼Œæ¯”å¦‚å­˜å‚¨å¼•æ“MyRocksèƒ½å¤Ÿæ”¯æŒè¿è¡ŒPercona MySQLï¼Œå®ƒä»¬çš„è¡¨ç°ç›¸è¾ƒäºä½¿ç”¨ä¼ ç»Ÿçš„SSDéƒ½æœ‰å¾ˆå¥½çš„æ€§èƒ½æå‡ã€‚è¿˜æœ‰æ­£åœ¨è¿›è¡Œå¼€å‘çš„é¡¹ç›®ï¼Œå¦‚å­—èŠ‚è·³åŠ¨çš„å¼€æºé¡¹ç›®TerarkDBï¼Œè¯¥é¡¹ç›®çš„å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¹Ÿæ­£åœ¨åŸºäºZenFSæŒç»­è¿›è¡Œä¼˜åŒ–ï¼Œç›®å‰å·²ç»å¯ä»¥ä½¿ç”¨ZNS SSDè¿›è¡Œæ€§èƒ½æ–¹é¢çš„æµ‹è¯•ã€‚</p><p>åŒæ—¶ï¼Œå¯¹äºä¸€äº›ä½¿ç”¨çº¿æ€§å†™å½¢å¼çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¦‚f2fsã€btrfsã€zfsï¼Œå·²ç»èƒ½å¤Ÿæ”¯æŒzoneäº†ã€‚å°½ç®¡ä¸æ˜¯æ‰€æœ‰çš„å†™æ“ä½œéƒ½æ˜¯çº¿æ€§çš„ï¼Œä½†å¯ä»¥é€šè¿‡ä¸¥æ ¼çš„log-structuredå†™ï¼Œä¸€ä¸ªè¶…çº§å—æ¥å¼¥è¡¥è¯¥é—®é¢˜ã€‚</p><h2 id="ZNSçš„æœ€æ–°å‘å±•è¶‹åŠ¿"><a href="#ZNSçš„æœ€æ–°å‘å±•è¶‹åŠ¿" class="headerlink" title="ZNSçš„æœ€æ–°å‘å±•è¶‹åŠ¿"></a>ZNSçš„æœ€æ–°å‘å±•è¶‹åŠ¿</h2><p>ZNS SSDæ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œä½†ç›®å‰å¯ä»¥é¢„æƒ³åˆ°çš„ä¸»è¦åº”ç”¨åœºæ™¯è¿˜æ˜¯èšç„¦åœ¨å¯ä»¥é«˜åº¦å®šåˆ¶ã€æ›´æ–°æ¢ä»£è¾ƒå¿«çš„æ•°æ®ä¸­å¿ƒç¡¬ç›˜ã€‚åœ¨æœªæ¥ç»è¿‡ä¸æ–­è®¨è®ºã€ä¿®æ”¹å’Œæµ‹è¯•ä¹‹åï¼Œäº‘è®¡ç®—å‚å•†ä¼šå¼€å§‹å¤§èŒƒå›´éƒ¨ç½²è¿™é¡¹æœåŠ¡ã€‚ç»è¿‡é•¿æ—¶é—´çš„ä½¿ç”¨å’Œæ•°æ®åˆ†æçš„ç§¯ç´¯ï¼Œä¹Ÿè®¸èƒ½ä»¥æ­¤ä¸ºå¥‘æœºZNSçš„è®¾è®¡èƒ½å¤Ÿå¾—åˆ°è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p><p>ZNSçš„å‘èµ·è€…Matiasè¿˜è¯´ï¼Œâ€œZNSç›®å‰è¿˜è·å¾—æ‰‹æœºå‚å•†çš„å…´è¶£ï¼Œæ–°çš„é—ªå­˜ç›˜å¯èƒ½ä¼šè®©å¹³æ¿å’Œæ™ºèƒ½æ‰‹æœºçš„ç”µæ± ç»­èˆªæ›´ä¹…ã€å•å…ƒå­˜å‚¨çš„ä»·æ ¼æ›´ä½ã€‚â€åœ¨æœªæ¥ï¼Œç­‰å¾…ZNSæŠ€æœ¯æ—¥è¶‹æˆç†Ÿä¹‹åï¼Œä¹Ÿè®¸æ‰‹æœºå¹³æ¿ä¹Ÿæœ‰å¾ˆå¥½çš„æ–¹æ¡ˆå»é€‚é…ZNSï¼Œè®©æ›´å¤šçš„ä¸ªä½“ç”¨æˆ·ä½“éªŒåˆ°ZNSã€‚</p>]]></content>
      
      
      <categories>
          
          <category> storage </category>
          
          <category> ZNS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSD </tag>
            
            <tag> ZNS </tag>
            
            <tag> storage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>latexä¸­æ–‡æ¨¡æ¿</title>
      <link href="/2022/09/09/latex%E4%B8%AD%E6%96%87%E6%A8%A1%E6%9D%BF/"/>
      <url>/2022/09/09/latex%E4%B8%AD%E6%96%87%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% ctex_test.tex</span></span><br><span class="line"><span class="keyword">\documentclass</span>[UTF8]&#123;ctexart&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;geometry&#125;</span><br><span class="line"><span class="keyword">\geometry</span>&#123;a4paper,left=3cm,right=3cm,top=4cm,bottom=4cm&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;ctex&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;algorithm&#125;  </span><br><span class="line"><span class="keyword">\usepackage</span>&#123;algpseudocode&#125;  </span><br><span class="line"><span class="keyword">\usepackage</span>&#123;amsmath&#125;  </span><br><span class="line"><span class="keyword">\usepackage</span>&#123;url&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[colorlinks=red, linkcolors=red]&#123;hyperref&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;listings&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;xcolor&#125;</span><br><span class="line"><span class="keyword">\lstset</span>&#123;</span><br><span class="line">    basicstyle          =   <span class="keyword">\ttfamily</span>,          <span class="comment">% åŸºæœ¬ä»£ç é£æ ¼</span></span><br><span class="line">    keywordstyle        =   <span class="keyword">\bfseries</span><span class="keyword">\color</span>&#123;blue&#125;,          <span class="comment">% å…³é”®å­—é£æ ¼</span></span><br><span class="line">    commentstyle        =   <span class="keyword">\rmfamily</span><span class="keyword">\itshape</span>,  <span class="comment">% æ³¨é‡Šçš„é£æ ¼ï¼Œæ–œä½“</span></span><br><span class="line">    stringstyle         =   <span class="keyword">\ttfamily</span>,  <span class="comment">% å­—ç¬¦ä¸²é£æ ¼</span></span><br><span class="line">    flexiblecolumns,                <span class="comment">% åˆ«é—®ä¸ºä»€ä¹ˆï¼ŒåŠ ä¸Šè¿™ä¸ª</span></span><br><span class="line">    numbers             =   left,   <span class="comment">% è¡Œå·çš„ä½ç½®åœ¨å·¦è¾¹</span></span><br><span class="line">    showspaces          =   false,  <span class="comment">% æ˜¯å¦æ˜¾ç¤ºç©ºæ ¼ï¼Œæ˜¾ç¤ºäº†æœ‰ç‚¹ä¹±ï¼Œæ‰€ä»¥ä¸ç°å®äº†</span></span><br><span class="line">    numberstyle         =   <span class="keyword">\zihao</span>&#123;-5&#125;<span class="keyword">\ttfamily</span>,    <span class="comment">% è¡Œå·çš„æ ·å¼ï¼Œå°äº”å·ï¼Œttç­‰å®½å­—ä½“</span></span><br><span class="line">    showstringspaces    =   false,</span><br><span class="line">    captionpos          =   t,      <span class="comment">% è¿™æ®µä»£ç çš„åå­—æ‰€å‘ˆç°çš„ä½ç½®ï¼ŒtæŒ‡çš„æ˜¯topä¸Šé¢</span></span><br><span class="line">    frame               =   lrtb,   <span class="comment">% æ˜¾ç¤ºè¾¹æ¡†</span></span><br><span class="line">    language            =   C++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% \lstdefinestyle&#123;C++&#125;&#123;</span></span><br><span class="line"><span class="comment">%     language        =   C++, % è¯­è¨€é€‰Python</span></span><br><span class="line"><span class="comment">%     basicstyle      =   \zihao&#123;-5&#125;\ttfamily,</span></span><br><span class="line"><span class="comment">%     numberstyle     =   \zihao&#123;-5&#125;\ttfamily,</span></span><br><span class="line"><span class="comment">%     keywordstyle    =   \color&#123;blue&#125;,</span></span><br><span class="line"><span class="comment">%     % keywordstyle    =   [2] \color&#123;teal&#125;,</span></span><br><span class="line"><span class="comment">%     stringstyle     =   \color&#123;magenta&#125;,</span></span><br><span class="line"><span class="comment">%     commentstyle    =   \color&#123;red&#125;\ttfamily,</span></span><br><span class="line"><span class="comment">%     breaklines      =   true,   % è‡ªåŠ¨æ¢è¡Œï¼Œå»ºè®®ä¸è¦å†™å¤ªé•¿çš„è¡Œ</span></span><br><span class="line"><span class="comment">%     columns         =   fixed,  % å¦‚æœä¸åŠ è¿™ä¸€å¥ï¼Œå­—é—´è·å°±ä¸å›ºå®šï¼Œå¾ˆä¸‘ï¼Œå¿…é¡»åŠ </span></span><br><span class="line"><span class="comment">%     basewidth       =   0.5em,</span></span><br><span class="line"><span class="comment">% &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">\title</span>&#123;CSPå°æŠ„&#125;</span><br><span class="line"><span class="comment">% \author&#123;ä»è“‰&#125;</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"><span class="comment">% è¿™æ˜¯ä¸€ä¸ªCTEXçš„utf-8ç¼–ç ä¾‹å­ï¼Œ&#123;\kaishu è¿™é‡Œæ˜¯æ¥·ä½“æ˜¾ç¤º&#125;ï¼Œ&#123;\songti è¿™é‡Œæ˜¯å®‹ä½“æ˜¾ç¤º&#125;ï¼Œ&#123;\heiti è¿™é‡Œæ˜¯é»‘ä½“æ˜¾ç¤º&#125;ï¼Œ&#123;\fangsong è¿™é‡Œæ˜¯ä»¿å®‹æ˜¾ç¤º&#125;ã€‚</span></span><br><span class="line"><span class="keyword">\newpage</span></span><br><span class="line"><span class="keyword">\tableofcontents</span></span><br><span class="line"><span class="keyword">\newpage</span></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¨¡æ¿ </category>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è£…ç®±é—®é¢˜</title>
      <link href="/2022/04/25/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%A3%85%E7%AE%B1%E9%97%AE%E9%A2%98/"/>
      <url>/2022/04/25/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%A3%85%E7%AE%B1%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>æœ‰ä¸€ä¸ªç®±å­å®¹é‡ä¸º Vï¼ŒåŒæ—¶æœ‰ n ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰ä¸€ä¸ªä½“ç§¯ï¼ˆæ­£æ•´æ•°ï¼‰ã€‚</p><p>è¦æ±‚ n ä¸ªç‰©å“ä¸­ï¼Œä»»å–è‹¥å¹²ä¸ªè£…å…¥ç®±å†…ï¼Œä½¿ç®±å­çš„å‰©ä½™ç©ºé—´ä¸ºæœ€å°ã€‚</p><p>$n\leq 30$ï¼Œ$0\leq V\leq 20000$ã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç”±äº$n$éå¸¸å°ï¼Œå¯ä»¥å°è¯•ç”¨ç©·ä¸¾çš„æ–¹æ³•è®¡ç®—æ¯ç§æƒ…å†µã€‚ä½†æ˜¯æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦å¤§è‡´ä¸º$O(10^9)$ï¼Œè¿™ä¸ªä¼šç›´æ¥TLEã€‚ä¸è¿‡ç¡®å®æ˜¯ä¸€ç§æ±‚æ³•å•¦^ _ ^ã€‚</p><p>ä½†å®é™…ä¸Šï¼Œè¿™å°±æ˜¯ä¸€ä¸ª01èƒŒåŒ…é—®é¢˜ï¼ˆzhtå­¦äº†è¿˜æ˜¯ä¸ä¼šå†™å”‰ï¼‰ï¼Œæ˜¯ä¸ªå¸¦æœ‰ä½“ç§¯é™åˆ¶å’Œç‰©å“æœ‰å…¶ä»·å€¼ï¼ˆä¹Ÿå°±æ˜¯ä½“ç§¯ï¼‰çš„èƒŒåŒ…ã€‚å¹¶ä¸æ˜¯ä¸€ä¸ªç›´è§‚ä¸Šçš„ä¸€ç»´å‡½æ•°å¯ä»¥è§£å†³çš„èƒŒåŒ…ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">31</span>, M = <span class="number">20001</span>;</span><br><span class="line"><span class="type">int</span> n, v;</span><br><span class="line"><span class="type">int</span> f[N][M];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;v, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= v; ++j) &#123;</span><br><span class="line">            f[i][j] = <span class="built_in">max</span>(f[i][j], f[i<span class="number">-1</span>][j]);</span><br><span class="line">            <span class="keyword">if</span>(a[i] &lt;= j) f[i][j] = <span class="built_in">max</span>(f[i][j], f[i<span class="number">-1</span>][j-a[i]] + a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, v - f[n][v]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> dp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> acwing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>austere cacheè®²ç¨¿</title>
      <link href="/2022/04/24/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/austere-cache%E8%AE%B2%E7%A8%BF/"/>
      <url>/2022/04/24/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/austere-cache%E8%AE%B2%E7%A8%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Austere-Flash-Cache-with-Deduplication-and-Compression"><a href="#Austere-Flash-Cache-with-Deduplication-and-Compression" class="headerlink" title="Austere Flash Cache with Deduplication and Compression"></a>Austere Flash Cache with Deduplication and Compression</h1><h2 id="æœ‰å…³é—ªå­˜ç¼“å­˜"><a href="#æœ‰å…³é—ªå­˜ç¼“å­˜" class="headerlink" title="æœ‰å…³é—ªå­˜ç¼“å­˜"></a>æœ‰å…³é—ªå­˜ç¼“å­˜</h2><p>å½“ è®¡ç®—æœºå¤„ç†å¤§é‡æ•°æ®å¯†é›†å‹å·¥ä½œæ—¶ï¼Œå¯¹äºç¡¬ç›˜çš„IOååç‡å’Œè¯»å†™æ€§èƒ½è¦æ±‚å°¤å…¶é«˜ï¼Œä½†ç›®å‰ç¡¬ç›˜çš„æ€§èƒ½è¿œæ²¡æœ‰è¾¾åˆ°å¤„ç†æœºçš„æ€§èƒ½ã€‚å› æ­¤ï¼Œå½“æƒ³è¦æ›´é«˜æ•ˆåœ°å»å¤„ç†è¿™ç±»å·¥ä½œï¼Œå¯ä»¥åœ¨ç¡¬ç›˜ä¹‹ä¸Šå¢åŠ ä¸€å±‚é—ªå­˜ç¼“å­˜ã€‚</p><p>è€Œåœ¨è¿‡å»çš„å¾ˆå¤šç ”ç©¶ä¸­éƒ½ä½¿ç”¨äº†SSDä½œä¸ºé—ªå­˜ç¼“å­˜ä»‹è´¨ï¼Œå› æœ¬èº«å…·æœ‰çš„æ€§è´¨èƒ½å¤Ÿä¿è¯å®ƒä½œä¸ºé—ªå­˜ç¼“å­˜ä»‹è´¨æœ‰ç€å¾ˆå¥½çš„è¡¨ç°ã€‚æ¯”å¦‚è¯´SSDå…·æœ‰</p><ol><li>é«˜IOååç‡</li><li>ä½èƒ½è€—</li><li>é«˜å¯é æ€§</li><li>ä»·æ ¼è¾ƒä½</li><li>éæ˜“å¤±æ€§ï¼ˆï¼Ÿï¼‰</li></ol><blockquote><p>ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨éæ˜“å¤±æ€§cacheï¼Ÿæ˜¯å› ä¸ºHDDæ˜¯éæ˜“å¤±çš„å—ï¼Ÿ</p></blockquote><p>ç„¶è€Œï¼Œç”±äºSSDåªæœ‰æœ‰é™çš„å‚¨å­˜ç©ºé—´ï¼Œå¹¶ä¸”æœ‰å†™æ¬¡æ•°é™åˆ¶ï¼Œæƒ³è¦å°†SSDä½œä¸ºé—ªå­˜ç¼“å­˜ï¼Œè¿˜éœ€è¦å…‹æœå¦‚ä¸‹é—®é¢˜ï¼š</p><ol><li>æœ€å¤§åˆ©ç”¨æœ‰é™çš„SSDå­˜å‚¨ç©ºé—´</li><li>æå¤§å‡å°‘å†™æ“ä½œ</li></ol><p>å¯¹äºè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œç›´è§‚çš„æƒ³æ³•å°±æ˜¯å»åˆ é™¤SSDç¼“å­˜ä¸­çš„é‡å¤æ•°æ®ï¼Œå¹¶å°†ç¼“å­˜ä¸­çš„æ•°æ®å‹ç¼©åœ°å°½å¯èƒ½ç´§å‡‘ã€‚è¿™ä¹Ÿæ˜¯ç»å¸¸è¢«è¿ç”¨åˆ°çš„ä¸¤ç§æŠ€æœ¯ï¼šdeduplicationå’Œcompressionã€‚ç›¸å¯¹åº”çš„ï¼Œ<del>ä¸åŒäºä½¿ç”¨ç¡¬ä»¶å®ç°çš„é€»è¾‘åœ°å€-ç‰©ç†åœ°å€çš„æ˜ å°„ï¼Œ</del>åœ¨cacheä¸­å®ç°å»é‡å’Œå‹ç¼©å¿…ç„¶ä¼š<del>å¢åŠ SSDçš„å†™æ¬¡æ•°ï¼Œå¹¶ä¸”</del>ç»™å†…å­˜å¸¦æ¥è´Ÿæ‹…ã€‚æœ‰æ—¶ï¼Œå› ä¸ºdata reductionçš„æ•ˆç‡è¿‡ä½ï¼Œåªèƒ½æ”¾å¼ƒdeduplicationå’Œcompressionã€‚</p><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>ä¸ºäº†èƒ½å°†è¿™ä¸¤ä¸ªæŠ€æœ¯åº”ç”¨çš„flash cacheä¸­ï¼Œé¦–å…ˆéœ€è¦å»äº†è§£deduplicationå’Œcompressionçš„æ¦‚å¿µå’ŒåŸºæœ¬çš„æ“ä½œæµç¨‹ï¼Œä»¥åŠå› ä¸ºä»€ä¹ˆä¼šå¯¼è‡´å¤§é‡çš„å†…å­˜æ¶ˆè€—ã€‚</p><h3 id="Deduplication-Compression"><a href="#Deduplication-Compression" class="headerlink" title="Deduplication &amp; Compression"></a>Deduplication &amp; Compression</h3><p>é¦–å…ˆæ˜¯deduplicationã€‚é¦–å…ˆï¼Œåœ¨è®ºæ–‡ä¸­ï¼Œæˆ–è€…æ˜¯åœ¨flash cacheä¸­ï¼Œæ˜¯ä»¥å—å¤§å°æ¥å­˜å‚¨çš„ï¼Œå› æ­¤å…³æ³¨çš„ä¹Ÿæ˜¯å—çº§åˆ«ï¼ŒKBçº§åˆ«çš„æ•°æ®é‡å¤ã€‚ä¸ºäº†èƒ½å¿«é€Ÿåˆ¤æ–­ä¸¤ä¸ªchunkå†…å®¹æ˜¯å¦å®Œå…¨ç›¸ç­‰ï¼Œå¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„åŠ å¯†å“ˆå¸Œè®¡ç®—å¾—åˆ°footprint(FP)ã€‚ç”±äºä¸¤ä¸ªä¸åŒçš„chunkå¯¹åº”å®Œå…¨ç›¸åŒçš„FPçš„æ¦‚ç‡å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œæˆ‘ä»¬è®¤ä¸ºFPä¸åŒï¼Œchunkä¸åŒï¼›FPç›¸åŒï¼Œchunkç›¸åŒã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬æœŸæœ›çš„deduplicationåçš„ç»“æœï¼Œåœ¨SSDä¸­å‚¨å­˜çš„æ‰€æœ‰chunkéƒ½æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”åœ¨è¯·æ±‚è®¿é—®HDDä¸­çš„æŸä¸€ä¸ªä½ç½®æ—¶ï¼Œå¦‚æœæœ‰ç¼“å­˜ï¼Œèƒ½å¤ŸçŸ¥é“å®ƒå¯¹åº”çš„SSDä¸­çš„chunkæ˜¯å“ªä¸ªã€‚</p><p>â€œæœ‰å…³chunkæ˜¯å¤§å°å¯å˜çš„è¿˜æ˜¯å›ºå®šå¤§å°çš„çš„é€‰æ‹©â€œ</p><p>å‹ç¼©æ“ä½œä¸€èˆ¬æ¥è¯´ä¼šåœ¨å»é‡æ“ä½œä¹‹åæ‰§è¡Œã€‚å®ƒæ˜¯åœ¨å­—èŠ‚çº§åˆ«å°†æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œå› æ­¤å‹ç¼©ä¹‹åçš„chunkéƒ½æ˜¯å¤§å°å¯å˜çš„ã€‚</p><p><del>åœ¨è®ºæ–‡ä¸­æå‡ºçš„Austere Cache managementï¼Œåœ¨å®ç°deduplicationå’Œcompressionçš„åŸºç¡€ä¸Šï¼Œåˆä¿è¯äº†è¾ƒå°çš„å†…å­˜æ¶ˆè€—ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†ç¼“å­˜æœ¬èº«çš„è¯»å‘½ä¸­å’Œè¾ƒå°çš„å†™æ¬¡æ•°ï¼Œå¹¶æå¤§åœ°æé«˜äº†IOååç‡ï¼Œæ˜¯ç†è®ºä¸Šéå¸¸ç†æƒ³çš„flash cacheã€‚</del></p><h3 id="Flash-Caching"><a href="#Flash-Caching" class="headerlink" title="Flash Caching"></a>Flash Caching</h3><p>åœ¨äº†è§£å®Œdeduplicationå’Œcompressionçš„åŸºæœ¬æ¦‚å¿µä¹‹åï¼Œ<del>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸è¾ƒäºä¼ ç»Ÿçš„flash cacheï¼ˆå³ä½¿ç”¨çš„æ˜¯å†™å›å’Œå†™ç©¿æœºåˆ¶ï¼‰ï¼Œä»–ä»¬éœ€è¦çš„æ˜¯åœ¨HDDå’ŒSSDä¹‹é—´çš„è¿›è¡Œé€»è¾‘åœ°å€ä¸ç‰©ç†åœ°å€è½¬æ¢çš„ç¿»è¯‘å±‚ã€‚</del><br>ä¸€ä¸ªflash cacheå¦‚æœæƒ³åº”ç”¨è¿™ä¸¤ç§æŠ€æœ¯ï¼Œè¿˜éœ€è¦è€ƒè™‘åˆ°é€»è¾‘åœ°å€ï¼ˆä¹Ÿå°±æ˜¯HDDä¸­çš„LBAï¼‰ä¸ç‰©ç†åœ°å€ï¼ˆSSDä¸­çš„CAï¼‰æ˜¯å¦‚ä½•æ˜ å°„çš„é—®é¢˜ã€‚</p><p>è€Œåœ¨<del>Austere Cache</del>ä¸­ï¼Œåœ¨ä½¿ç”¨äº†ä¸Šè¿°çš„ä¸¤ç§æ–¹æ³•ä¹‹åï¼Œåœ¨cacheä¸­ï¼Œæ˜ å°„çš„æ˜¯HDDä¸­çš„é€»è¾‘å—åœ°å€ï¼ˆLBAï¼‰åˆ°SSDä¸­çš„å—åœ°å€ï¼ˆCAï¼‰ã€‚åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬ä¼šå¼•å…¥ä¸¤ä¸ªç´¢å¼•ç»“æ„ï¼š</p><ol><li>LBAç´¢å¼•ï¼šå®ƒè·Ÿè¸ªäº†HDDä¸­çš„LBAæ˜ å°„åˆ°äº†å“ªä¸€ä¸ªFPä¸­ã€‚å› ä¸ºä½¿ç”¨äº†deduplicationæŠ€æœ¯ï¼ŒLBAå’ŒCAæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ã€‚</li><li>FPç´¢å¼•ï¼šFPç´¢å¼•ä¼šè®°å½•æ¯ä¸€ä¸ªFPæ˜ å°„åˆ°CAçš„å…³ç³»ã€‚ç”±äºåœ¨compressionä¹‹åï¼Œchunkçš„å¤§å°æ˜¯å¯å˜çš„ï¼Œå› æ­¤åœ¨FPç´¢å¼•æ¡ç›®ä¸­è¿˜éœ€è¦å¢åŠ chunkçš„å¤§å°ä¿å­˜ã€‚</li><li>dirty list</li></ol><p>æ€»ç»“ä¸€ä¸‹ï¼Œå¦‚æœéœ€è¦æŸ¥æ‰¾HDDä¸­æŸä¸€ä¸ªä½ç½®çš„æ•°æ®ï¼Œé¦–å…ˆéœ€è¦ä»å®ƒçš„cacheï¼ŒSSDä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚é¦–å…ˆä¼šæŸ¥LBAç´¢å¼•ï¼Œæ‰¾åˆ°å¯¹åº”çš„FPï¼Œå¦‚æœæ‰¾åˆ°äº†å†æŸ¥æ‰¾FPç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„CAï¼Œå†å»SSDä¸­è·å–ã€‚</p><blockquote><p>é‚£ä¹ˆï¼ŒæŸ¥æ‰¾ä¸¤æ¬¡çœŸçš„å¥½éº»çƒ¦ï¼Œä¸ºä»€ä¹ˆä¸èƒ½LBAç›´æ¥æ˜ å°„åˆ°CAä¸Šå‘¢ï¼Ÿ<br>è¿™ä¹Ÿæ˜¯ä¸ºäº†deduplicationæœåŠ¡ã€‚</p></blockquote><p>è¿™æ˜¯è¯»æ“ä½œçš„åŸºæœ¬æ­¥éª¤ã€‚</p><p>é‚£ä¹ˆå¯¹äºä¸€ä¸ªå†™æ“ä½œæ¥è¯´ï¼Œé¦–å…ˆå†™çš„æ•°æ®éœ€è¦è¢«åˆ†æˆå¤šä¸ªchunkï¼ˆå› ä¸ºéœ€è¦å‚¨å­˜åœ¨SSDä¸­ï¼‰ï¼Œç³»ç»Ÿä¼šè¿›è¡Œæ£€æŸ¥ï¼ŒæŸ¥çœ‹æ¯ä¸ªchunkæ˜¯å¦å’Œå·²ç»å‚¨å­˜çš„å†…å®¹ç›¸åŒã€‚å¦‚æœä¸ç›¸åŒï¼Œå°±ä¼šè¿›è¡Œè¿›ä¸€æ­¥çš„å‹ç¼©ï¼Œå‚¨å­˜åˆ° SSDä¹‹åå¯¹ä¸¤ä¸ªç´¢å¼•è¡¨è¿›è¡Œæ›´æ–°ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯å†™ç©¿æ¨¡å¼ï¼Œè¿˜éœ€è¦å°†æ²¡æœ‰å‹ç¼©çš„å†…å®¹è¿›è¡Œå†™å…¥ã€‚</p><p>æ­¤å¤„æœ‰ä¸€ä¸ªåŸæ¥çš„pptï¼Œå³ä½¿ä¸å»è€ƒè™‘è®¡ç®—chunkå†…å®¹çš„å“ˆå¸Œç­‰ç­‰çš„è®¡ç®—æ¶ˆè€—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç´¢å¼•æ¡ç›®ç›´è§‚æ„Ÿå—åˆ°ï¼Œå†…å­˜å› ä¸ºdeduplicationå’Œcompressionå¤§å¤§å¢åŠ ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒFPæ­£æ˜¯å®ç°deduplicationçš„é‡è¦æ•°æ®å†…å®¹ï¼Œè€ŒFP-indexä¸­çš„é•¿åº¦æ˜¯å®ç°compressionéœ€è¦è·Ÿè¸ªçš„æ•°æ®ã€‚è€Œè¿™ä¸¤è€…æ­£æ˜¯è®©ç»“æ„è¡¨å˜å¾—å¾ˆå¤§ï¼Œè®©å†…å­˜çš„è´Ÿæ‹…å˜é‡çš„ä¸»è¦åŸå› ã€‚</p><h2 id="AustereCache-Design"><a href="#AustereCache-Design" class="headerlink" title="AustereCache Design"></a>AustereCache Design</h2><p>é‚£ä¹ˆè®ºæ–‡ä¸­æåˆ°çš„Austere Cacheçš„è®¾è®¡ç›®æ ‡å°±æ˜¯æ—¢èƒ½ä¿è¯ä½¿ç”¨deduplicationå’Œcompressionæ¥ä¿è¯å­˜å‚¨å’ŒIOçš„èŠ‚çœï¼ŒåŒæ—¶ä¹Ÿæå¤§å‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚å®ƒæå‡ºäº†ä¸‰ä¸ªé‡è¦çš„æŠ€æœ¯ï¼š</p><ul><li><p>bucketizationï¼šä¸Šé¢æåˆ°äº†æ­£æ˜¯ç”±äºå¢åŠ äº†ä¸€ä¸ªindexï¼ŒåŒæ—¶å¢åŠ äº†chunkçš„sizeå’ŒFPå­—æ®µï¼Œæ‰è®©å†…å­˜å¼€é”€å˜å¾—å·¨å¤§ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠç´¢å¼•ä¸­çš„LBA-hashå’ŒFP-hashç¼©çŸ­ï¼Œåªåœ¨å†…å­˜ä¸­å‚¨å­˜å®ƒä»¬ä¸¤ä¸ªçš„å‰ç¼€ã€‚</p><p>  å½“ç„¶ï¼Œè€ƒè™‘åˆ°å“ˆå¸Œç¢°æ’çš„é—®é¢˜ï¼Œè¿˜éœ€è¦SSDä¸­å‚¨å­˜å®Œæ•´çš„FPå’ŒLBAï¼Œå‚¨å­˜è¯¥æ•°æ®çš„åŒºåŸŸç§°ä¸ºå…ƒæ•°æ®åŒºåŸŸã€‚ä¸ºäº†æŸ¥æ‰¾æ–¹ä¾¿ï¼Œå®ƒå’ŒFP-indexæ‹¥æœ‰åŒæ ·æ•°é‡ï¼ŒåŒæ ·å¤§å°çš„æ¡¶ï¼Œå‚¨å­˜çš„æ˜¯FPä¸å…¶æ˜ å°„çš„å¤šä¸ªLBAã€‚ä½†å®é™…ä¸Šï¼Œå¦‚æœå‰ç¼€é•¿åº¦å–å¾—è¶³å¤Ÿå¥½ï¼Œåªæœ‰æå°çš„æ¦‚ç‡ä¼šå‡ºç°å“ˆå¸Œå‰ç¼€çš„å†²çªã€‚</p><p>  è¿™æ ·ï¼ŒæŠŠLBA-indexå’ŒFP-indexåˆ†åˆ«åˆ’åˆ†æˆæ¡¶ï¼Œæ¯ä¸ªæ¡¶ä¸­å¯ä»¥å‚¨å­˜ç›¸åŒæ•°é‡çš„æ•°æ®ï¼Œæ¯ä¸€æ¡æ•°æ®ç§°ä¸ºslotã€‚</p><p>  åŒæ—¶ï¼Œåœ¨ä¹‹å‰çš„è§„åˆ’ä¸­è¿˜éœ€è¦åœ¨FP-indexä¸­å‚¨å­˜CAï¼Œç”¨æ¥æ‰¾åˆ°å¯¹åº”æ•°æ®åœ¨SSDå‚¨å­˜çš„ä½ç½®ã€‚ä½†å®é™…ä¸Šè¿™ä¹Ÿå¯ä»¥çœç•¥ã€‚å¯¹äºFP-indexä¸­çš„æ¯æ¡æ•°æ®ï¼Œå®é™…ä¸Šæ˜¯ä¸SSDä¸­å‚¨å­˜æ•°æ®çš„chunkä¸€ä¸€å¯¹åº”çš„ã€‚æˆ‘ä»¬æŠŠSSDä¸­å‚¨å­˜æ•°æ®ï¼ˆchunkï¼‰çš„åŒºåŸŸä¹Ÿåˆ†æˆå’ŒFP-indexä¸€æ ·çš„ï¼Œæ•°é‡ç›¸åŒçš„æ¡¶ï¼Œæ¡¶ä¸­çš„ä¸€ä¸ªslotå³ä¸€ä¸ªå¯¹åº”çš„FPã€‚</p><p>  <strong>Write Path</strong> å½“éœ€è¦åœ¨flash cacheä¸­å†™å…¥ä¸€æ¡æ•°æ®æ—¶ï¼ˆè¿™æ¡æ•°æ®å¯ä»¥ä½¿ç”¨ï¼ˆLBA, FPï¼‰è¿›è¡Œæ ‡è¯†ï¼‰ï¼Œé¦–å…ˆä¼šä½¿ç”¨LBA-hashçš„å‰ç¼€æ¥æŸ¥æ‰¾æ˜¯å¦å·²ç»å¯¹åº”ä¸€ä¸ªFPäº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦åœ¨LBA-indexå’ŒFP-indexä¸­å¯»æ‰¾åˆ°ä¸€ä¸ªç©ºä½æˆ–è€…æ›¿æ¢æ‰ä¸€ä¸ªä¸€ä¸ªslotã€‚åœ¨æ­¤ä¹‹åï¼Œåœ¨SSDçš„metadata regionçš„ç›¸åŒä½ç½®å†™å…¥FPå’ŒLBAï¼›åœ¨data regionçš„ç›¸åŒä½ç½®å†™å…¥chunkå³å¯ã€‚</p><p>  <strong>check duplicate chunk</strong> æŸ¥æ‰¾FP-index &#x3D;&gt; metadata regionï¼Œå¦‚æœå‰ç¼€å‡ºç°å†²çªï¼Œé‚£ä¹ˆå°±ä¼šæŒ‰ç…§Write Pathçš„æ–¹å¼é‡æ–°å†™å…¥ã€‚</p><p>  <strong>Read Path</strong> hit or miss</p><p>  <strong>analysis</strong></p></li></ul><h3 id="Fixed-sized-Compressed-Data-Management"><a href="#Fixed-sized-Compressed-Data-Management" class="headerlink" title="Fixed-sized Compressed Data Management"></a>Fixed-sized Compressed Data Management</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨å‹ç¼©ä¹‹åï¼Œchunkçš„å¤§å°ä¼šå˜ï¼Œå› æ­¤éœ€è¦åœ¨indexä¸­è¿½è¸ªæ¯ä¸€ä¸ªFPå¯¹åº”çš„chunkå¤§å°ï¼Œè¿™å¯¹äºå†…å­˜ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…ã€‚å› æ­¤ï¼ŒAustere Cacheå°†å‹ç¼©ä¹‹åçš„chunkåˆ†ä¸ºäº†å›ºå®šå¤§å°çš„å­chunkï¼Œå¦‚æœæ²¡æœ‰å®Œæ•´åˆ‡åˆ†ï¼Œæœ€åä¸€ä¸ªå­chunkä¼šè¿›è¡Œå¡«å……ã€‚</p><p>è¿™æ ·ï¼ŒFP-indexä¸­ä»¥æ¯ä¸¤ä¸ªslotä¸ºä¸€ç»„ï¼Œæ”¾å…¥ä¸€å¯¹FP-hash prefixå’Œflagã€‚ç›¸å¯¹åº”çš„ï¼Œmetadataä¹Ÿæ—¶ä¸¤ä¸ªslotä¸ºä¸€ç»„ï¼Œåªåœ¨ç¬¬ä¸€ä¸ªslotä¸­æ”¾å…¥FPï¼ŒLBAså’Œsubchunkçš„é•¿åº¦ã€‚å¯¹äºdata regionæ¥è¯´ï¼Œä¸€ä¸ªFPå°±å¯ä»¥å¯¹åº”ä¸¤ä¸ªsubchunkã€‚</p><p>è™½ç„¶FP-indexçš„éœ€æ±‚ä¼šå˜å¤§ï¼Œä½†æ˜¯ä»ç„¶â€¦è¿˜æ˜¯æ¯”å°†é•¿åº¦æ”¾åœ¨å†…å­˜ä¸­å¥½å¾—å¤šã€‚</p><h3 id="Bucket-Based-Cache-Replacement"><a href="#Bucket-Based-Cache-Replacement" class="headerlink" title="Bucket-Based Cache Replacement"></a>Bucket-Based Cache Replacement</h3><p>æœ€åï¼Œå†æ¥è®¨è®ºä¸€ä¸‹cacheçš„æ›¿æ¢ç­–ç•¥ã€‚</p><p>å¯¹äºLBAæ¥è¯´ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨LRUç®—æ³•ï¼Œæ–°åŠ å…¥æˆ–è€…æœ€è¿‘è®¿é—®çš„LBAä¼šæ”¾ç½®åœ¨æœ€ä½çš„offsetä¸Šï¼Œæ¯æ¬¡æ›¿æ¢æ—¶åªéœ€è¦å°†æœ€é«˜offsetçš„LBAå¼¹å‡ºå³å¯ã€‚</p><p>ç”±äºFP-indexï¼Œmetadata regionå’Œdata regionçš„å‚¨å­˜å†…å®¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤éœ€è¦åŒæ—¶è€ƒè™‘ä¸‰è€…ã€‚</p><p>é¦–å…ˆï¼ŒAustereCacheä¼šè·Ÿè¸ªæ¯ä¸ªFP-hashå¯¹åº”çš„LBAæ€»æ•°ã€‚ç†ç”±ä¹Ÿéå¸¸ç®€å•ï¼Œæ‹¥æœ‰æ›´å¤šFP-hashå¼•ç”¨æ•°æ„å‘³ç€æ›´å¯èƒ½è¢«è®¿é—®åˆ°ã€‚å½“æœ‰LBAè¢«æ›¿æ¢æ‰æ—¶ï¼Œå°±éœ€è¦å¯¹åº”-1ï¼Œæ–°åŠ å…¥å°±+1ã€‚å½“æ’å…¥ä¸€ä¸ªæ–°çš„FPæ—¶ï¼Œå°±éœ€è¦æŠŠå¼•ç”¨æ•°æœ€å°çš„FPæ›¿æ¢æ‰ã€‚</p><p>ä½†è¿™æ ·çš„æ›¿æ¢ç®—æ³•æ˜¯ä¸å®Œæ•´çš„ï¼Œæ¯”å¦‚è¯´åŠ å…¥äº†ä¸€ä¸ªæ–°çš„ï¼ˆLBAï¼ŒFPï¼‰å¯¹ï¼Œé‚£ä¹ˆFPçš„å¼•ç”¨è®¡æ•°è‚¯å®šä¸º1ï¼Œä¸‹æ¬¡æ›¿æ¢å®ƒéå¸¸å®¹æ˜“è¢«æ›¿æ¢æ‰ï¼Œä¹Ÿå°±æ˜¯è¿˜ç¼ºä¹æœ€è¿‘è®¿é—®ï¼ˆrecencyï¼‰çš„è€ƒè™‘ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†LBA-indexçš„æ¯ä¸ªæ¡¶åˆ†ä¸ºä¸¤ç»„è®¡æ•°æƒé‡ä¸åŒçš„slotsã€‚å¯¹äºæœ€è¿‘è®¿é—®çš„LBAï¼Œå®ƒå¯¹äºFPçš„æƒé‡ä¸º2ï¼›å¯¹äºä¸é‚£ä¹ˆç»å¸¸è®¿é—®çš„LBAï¼ŒFPæƒé‡ä¸º1ã€‚é‚£ä¹ˆå½“ä¸€ä¸ªLBAæ¡ç›®é™çº§æ—¶ï¼ŒFPæƒé‡-1ï¼›å½“ä¸€ä¸ªLBAæ¡ç›®è¢«æ›¿æ¢æ—¶ï¼ŒFPæƒé‡-1ï¼›å½“æ–°å¢ä¸€ä¸ªLBAæ¡ç›®æ—¶ï¼ŒFPæƒé‡+2ã€‚</p><p>å¦‚æœéœ€è¦ç»´æŠ¤è¿™ä¸€å¼ è¡¨ï¼Œä¸€ä¸ªFPä¼šå¯¹åº”ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªç»“æ„æ”¾ç½®åœ¨å†…å­˜ä¸­ä¹Ÿæ˜¯ä¸å°çš„å¼€é”€ï¼ˆå¯ä»¥ç±»æ¯”ä¸‹åœ¨å†…å­˜ä¸­å­˜æ”¾chunkçš„é•¿åº¦ï¼‰ã€‚</p><p>Austere Cacheä½¿ç”¨äº†ä¸€ä¸ªCount-Min Sketchçš„æ•°æ®ç»“æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿›è¡Œè¾ƒä¸ºå‡†ç¡®çš„è®¡æ•°ã€‚$r$è¡Œï¼Œ$w$åˆ—ï¼Œå®ƒå°†æ¯ä¸ªFP-hashéƒ½å“ˆå¸Œåˆ°æ¯ä¸€è¡Œçš„æŸä¸ªcounterä¸­ã€‚ä¸Šé¢æ‰€è¿°çš„è®¡æ•°ä¹Ÿæ˜¯å¯¹æ¯ä¸ªcounterå»è®¡æ•°ã€‚åœ¨æŸ¥è¯¢æ—¶ï¼Œä¼šä½¿ç”¨è¿™$r$ä¸ªcounterä¸­çš„æœ€å°å€¼è¿›è¡Œè¡¨ç¤ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> paper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®²ç¨¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Austere Cache</title>
      <link href="/2022/04/24/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/Austere-Cache/"/>
      <url>/2022/04/24/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/Austere-Cache/</url>
      
        <content type="html"><![CDATA[<p>conventional flash caching</p><p>flash caching with deduplication and compression</p><ol><li>the mappings of each logical address to the physical address of the non-duplicate chunk in the flash cache after deduplication and compression</li><li>flashç¼“å­˜ä¸­æ‰€æœ‰å­˜å‚¨å—çš„å¯†ç æ•£åˆ—(åˆç§°æŒ‡çº¹)ï¼Œç”¨äºé‡å¤æ£€å…¥é‡å¤æ•°æ®åˆ é™¤</li><li>æ‰€æœ‰å¤§å°å¯å˜çš„å‹ç¼©å—çš„é•¿åº¦</li></ol><p>ä¼ ç»Ÿçš„deduplication &amp; compression cacheå°†ä¼šç»™å†…å­˜å¸¦æ¥æå¤§è´Ÿæ‹…ï¼Œåœ¨æƒè¡¡ä¹‹ä¸‹å¹¶ä¸èƒ½å¾ˆå¥½åœ°ä½¿ç”¨ã€‚</p><p>HDDå’ŒSSDçš„åŒºåˆ«</p><p>cacheçš„duplication<br><a href="https://www.cs.virginia.edu/~smk9u/tian-ics-2014.pdf">å‚è€ƒè®ºæ–‡</a></p><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>ç°ä»£å­˜å‚¨ç³»ç»Ÿä½¿ç”¨flash cachingæ¥æé«˜IOæ€§èƒ½ï¼Œå¹¶åŠ å¼ºç©ºé—´åˆ©ç”¨ç‡ã€‚flash cachingçš„æŒä¹…åŒ–é¢å¯¹ä¸€ç›´åœ¨å¢é•¿çš„æ•°æ®å¯†é›†å‹å·¥ä½œé‡ä¸€ç›´æ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜çš„é—®é¢˜ã€‚deduplicationå’Œcompressionæ˜¯èƒ½å¤Ÿæœ‰æ•ˆé™ä½å­˜å‚¨å’ŒIOå·¥ä½œé‡çš„ä¸¤ç§æŠ€æœ¯ï¼Œç„¶è€Œå®ƒä»¬éƒ½ä¼šå› ä¸ºç´¢å¼•ç®¡ç†å¢åŠ å·¨å¤§çš„å†…å­˜å¼€é”€ã€‚æˆ‘ä»¬æå‡ºäº†AustereCacheï¼Œä¸€ä¸ªæ–°çš„flash caching è®¾è®¡ï¼Œæ—¢èƒ½åšåˆ°é«˜æ•ˆçš„å†…å­˜ç´¢å¼•ï¼Œåˆèƒ½ä¿è¯deduplicationå’Œcompressionå¸¦æ¥çš„å‡å°‘æ•°æ®å­˜å‚¨çš„æ”¶ç›Šã€‚AustereCacheå¼ºè°ƒäº†Austere cacheç®¡ç†å¹¶æå‡ºäº†ä¸åŒçš„æ•°æ®ç®¡ç†å’Œcacheæ›¿ä»£æŠ€æœ¯ï¼Œä»¥ä¾¿æ¶ˆé™¤è¿‡å¤šçš„ç´¢å¼•å…ƒæ•°æ®ï¼Œå¹¶å°†æ¸…å‡‰å†…å­˜ç´¢å¼•ç»“æ„å˜å¾—åˆ‡å®å¯è¡Œã€‚trace-driven å®éªŒå±•ç¤ºäº†ç›¸è¾ƒäºstate-of-the-art flash cachingï¼ˆæœ€å…ˆè¿›çš„é—ªå­˜ç¼“å­˜ï¼‰ï¼Œæˆ‘ä»¬çš„AustereCacheåŸå‹èŠ‚çœäº†69.9~97.0%çš„å†…å­˜ä½¿ç”¨ï¼ŒåŒæ—¶è¿˜ä¿è¯äº†ç›¸å¯¹å¯è§‚çš„è¯»å‘½ä¸­å’Œå†™å‡å°‘ç‡ï¼Œè·å¾—äº†é«˜IOååç‡ã€‚</p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>é«˜IOæ€§èƒ½å¯¹äºç°ä»£æ•°æ®é›†ä¸­çš„ç”µè„‘æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„è¦æ±‚ã€‚è®¸å¤šç ”ç©¶ï¼ˆå­˜å‚¨æ¶æ„ä½¿ç”¨äº†ï¼‰æå‡ºäº†SSDä½œä¸ºflash cachingä½äºHDDä¹‹ä¸Šçš„ä¸€å±‚æ¥æå‡IOæ€§èƒ½ï¼Œä¾‹å¦‚local file system, web caches, æ•°æ®ä¸­å¿ƒå’Œè™šæ‹Ÿå­˜å‚¨ã€‚SSDè¾ƒä¹‹äºHDDæœ‰è®¸å¤šå¸å¼•äººçš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬äº†é«˜IOååç‡ï¼Œä½èƒ½è€—ä»¥åŠé«˜å¯é æ€§ã€‚é¢å¤–çš„ï¼ŒSSDç›¸è¾ƒäºä¸»å­˜ï¼ˆDRAMï¼‰æ¥è¯´æˆæœ¬ä¹Ÿæ›´ä½ã€‚ä½†ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼ŒSSDä¹Ÿå¸¦æ¥äº†æ›´å¤šçš„æŒ‘æˆ˜ï¼šå®ƒä»¬åªæœ‰æ›´å°‘çš„å®¹é‡ï¼Œå¹¶ä¸”æ›´æ˜“æŸåã€‚å› æ­¤ï¼Œä¸ºäº†èƒ½æ”¯æŒ<strong>é«˜æ€§èƒ½</strong>ï¼Œ<strong>ç¼“å­˜å°½é‡å¤šçš„æ•°æ®</strong>ï¼ŒåŒæ—¶<strong>å‡è½»å†™æ“ä½œå¸¦æ¥çš„æŸä¼¤</strong>ï¼Œæ˜¯ä¸€ä¸ªä½¿ç”¨SSDä½œä¸ºcacheæœ€ä¸ºé‡è¦çš„ä¸‰ä¸ªé—®é¢˜ã€‚</p><p>ä¸ºäº†èƒ½å¤Ÿå‡å°‘å­˜å‚¨å’ŒIOæ¶ˆè€—ï¼Œæˆ‘ä»¬åˆ†æäº†ä½œä¸ºæ¶ˆé™¤é‡å¤æ•°æ®çš„ä¸¤ç§ç®—æ³•deduplicationå’Œcompressionã€‚deduplicationå’Œcompressionä¸¤è€…çš„ç›®æ ‡æ˜¯æ•°æ®å‡å°‘çš„ä¸¤ç§ä¸åŒç²’åº¦ï¼Œå¹¶ä¸”ä¸¤ä¸¤äº’è¡¥ï¼šå½“deduplicationç§»é™¤å—çº§é‡å¤å†…å®¹ï¼Œæ˜¯è¾ƒä¸ºç²—ç³™ä½†æ˜¯æ“ä½œæ˜¯è½»é‡çº§åˆ«çš„ï¼›ç„¶è€Œcompressionç§»é™¤çš„æ˜¯å­—èŠ‚çº§åˆ«ï¼Œä¹Ÿå°±æ˜¯chunkå†…éƒ¨çš„æ•°æ®ã€‚éšç€æ•°æ®çš„ä¸æ–­å¢é•¿ï¼Œdeduplicationå’Œcompressionè¢«å¹¿æ³›é‡‡ç”¨åœ¨ä¸»å­˜å‚¨å’Œå¤‡ä»½å­˜å‚¨ç³»ç»Ÿä¸­ã€‚ç‰¹åˆ«åœ°ï¼Œæœ€è¿‘çš„ç ”ç©¶å¢åŠ äº†å¸¦æœ‰deduplicationå’Œcompressionçš„flash cachingï¼Œå¼ºè°ƒäº†åœ¨å·¨å¤§çš„æ›¿æ¢å•å…ƒä¸­ç®¡ç†å¤§å°å¯å˜çš„ç¼“å­˜æ•°æ®æˆ–æ˜¯è®¾è®¡æ–°çš„ç¼“å­˜æ›¿æ¢ç®—æ³•ã€‚</p><p>å°½ç®¡æœ‰æ•°æ®å‡å°‘çš„æ”¶ç›Šï¼Œç°æœ‰çš„é€‚ç”¨äºflash cachingçš„deduplicationå’Œcompressionä¸å¯é¿å…åœ°å¯¼è‡´äº†å¯¹äºå†…å­˜åœ°æå¤§æ¶ˆè€—ï¼Œè¿™ä¹Ÿå½’åŠŸäºä»£ä»·æå¤§åœ°ç´¢å¼•ç®¡ç†ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨ä¼ ç»Ÿçš„flash cachingä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è·Ÿè¸ªçš„æ˜¯é€»è¾‘-ç‰©ç†çš„åœ°å€æ˜ å°„ï¼ˆè¿™åªæ˜¯ç¡¬ä»¶ä¸Šçš„æ¶ˆè€—ï¼Œæˆ–è€…æ˜¯æå°çš„è½¯ä»¶æ¶ˆè€—ï¼‰ã€‚ä½†å½“deduplicationå’Œcoopressionéƒ½é‡‡ç”¨ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†è·Ÿè¸ªä¸€ä¸ªç´¢å¼•ç»“æ„</p><p>(i)é‡å¤æ•°æ®åˆ é™¤å’Œå‹ç¼©åï¼Œæ¯ä¸ªé€»è¾‘åœ°å€åˆ°flashç¼“å­˜ä¸­éé‡å¤æ•°æ®å—ç‰©ç†åœ°å€çš„æ˜ å°„<br>(ii)ç”¨äºé‡å¤æ•°æ®åˆ é™¤æ£€æŸ¥çš„æ‰€æœ‰å­˜å‚¨åœ¨flashç¼“å­˜ä¸­çš„å—çš„å¯†ç å“ˆå¸Œ(åˆç§°æŒ‡çº¹(x2.1))<br>(iii)æ‰€æœ‰å¤§å°å¯å˜çš„å‹ç¼©å—çš„é•¿åº¦ã€‚</p><blockquote><p>è¿·æƒ‘ï¼Œæ²¡æ‡‚</p></blockquote><p>å®ƒèƒ½å¤Ÿæ‰€æœ‰çš„ç´¢å¼•å…ƒæ•°æ®å‚¨å­˜åœ¨å†…å­˜ä¸­ï¼Œä¿è¯é«˜æ€§èƒ½ï¼Œç„¶è€Œä¹ŸåŠ å‰§äº†å†…å­˜æ¶ˆè€—ï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„flash cachingæ¥è¯´ã€‚é¢å¤–çš„å†…å­˜å¼€é”€ï¼Œæˆ‘ä»¬æˆä¸ºmemory amplificationï¼Œå¯ä»¥è‡³å°‘æ‰©å¤§16å€ï¼Œä¸å¹¸çš„æ˜¯æ•°æ®åˆ é™¤æ•ˆç‡åªèƒ½æœ‰æ‰€å¦¥åã€‚</p><p>åœ¨æœ¬ç¯‡è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºAustere Cacheï¼Œä¸€ä¸ªé«˜æ•ˆå†…å­˜flash cachingè®¾è®¡ï¼Œè¿ç”¨äº†deduplicationå’Œcompressionäºå­˜å‚¨å’ŒIOä¸­ï¼Œå¹¶æå¤§åœ°å‡è½»äº†ç”±äºç´¢å¼•ç»“æ„å¯¼è‡´åœ°å†…å­˜å¼€é”€ã€‚AustereCacheåœ¨æ•°æ®å‚¨å­˜å’Œcacheæ›¿æ¢ä¸Šä½¿ç”¨äº†austere cache managementï¼Œé™åˆ¶äº†å†…å­˜å› åˆ é™¤é‡å¤æ•°æ®å’Œå‹ç¼©å¯¼è‡´çš„å†…å­˜è¿‡é‡å¼€é”€ã€‚å®ƒæ„å»ºäº†ä¸‰ä¸ªæ ¸å¿ƒæŠ€æœ¯ï¼š</p><ol><li>æ¡¶ &#x3D;&gt; ä¸€ç§è½»é‡çº§æŠ€æœ¯ï¼Œå°†chunkæ˜ å°„åˆ°å¤§å°å›ºå®šçš„æ¡¶ä¸­</li><li>å›ºå®šå¤§å°çš„æ•°æ®å‹ç¼©ç®¡ç† &#x3D;&gt; é¿å…éœ€è¦åœ¨ç´¢å¼•ä¸­è·Ÿè¸ªå‹ç¼©ä¹‹åé•¿åº¦ä¸ä¸€çš„å—é•¿åº¦</li><li>åŸºäºæ¡¶çš„cacheæ›¿æ¢ &#x3D;&gt; ä½¿ç”¨compact sketch data structureåœ¨æœ‰é™çš„å†…å­˜ä¸­åšå‡ºç¼“å­˜å—æ›¿æ¢çš„å†³ç­–ã€‚</li></ol><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><h3 id="Deduplication-and-Compression"><a href="#Deduplication-and-Compression" class="headerlink" title="Deduplication and Compression"></a>Deduplication and Compression</h3><p>é‡å¤æ•°æ®åˆ é™¤å’Œå‹ç¼©æŠ€æœ¯æ˜¯ä¸åŒç²’åº¦ä¸Šçš„åˆ é™¤å†—ä½™æ•°æ®æŠ€æœ¯ã€‚</p><h4 id="duplication"><a href="#duplication" class="headerlink" title="duplication"></a>duplication</h4><p>æˆ‘ä»¬å…³æ³¨çš„æ˜¯åŸºäºå—çš„é‡å¤æ•°æ®åˆ é™¤ï¼Œå®ƒå°†æ•°æ®åˆ†æˆæ— é‡å çš„æ•°æ®å•å…ƒï¼ˆchunkï¼‰ã€‚æ¯ä¸€ä¸ªchunkéƒ½æ˜¯å”¯ä¸€ï¼Œå¯ä»¥è¢«ä¸€ä¸ªfingerprintè¯†åˆ«ï¼ˆå¯¹å—å†…å®¹ä½¿ç”¨æŸç§åŠ å¯†å“ˆå¸Œç®—æ³•è®¡ç®—å¾—åˆ°ï¼‰ã€‚å¦‚æœä¸¤ä¸ªchunkçš„FPç›¸åŒï¼Œæˆ‘ä»¬è¯´å®ƒä»¬ä¸¤å—æ˜¯é‡å¤çš„ï¼Œä¸åŒåˆ™æ˜¯å†…å®¹ä¸åŒçš„ï¼ˆè¿™ä¹Ÿæ˜¯ç”±äºä¸¤å—ä¸åŒçš„chunkæœ‰ç›¸åŒçš„FPæ¦‚ç‡å®åœ¨æ˜¯å¤ªå°äº†â€¦ï¼‰ã€‚åœ¨ç‰©ç†ç©ºé—´ä¸Šåªä¼šä¿å­˜ä¸€å—ä¸é‡å¤çš„chunkï¼Œä½†æ˜¯æ‰€æœ‰çš„é‡å¤çš„chunkï¼ˆåœ¨é€»è¾‘ç©ºé—´ï¼‰ä¼šä½¿ç”¨æŒ‡é’ˆæ¥å¼•ç”¨å®ƒã€‚åŒæ—¶ï¼Œå®ƒä¼šä¿å­˜æ‰€æœ‰FPåˆ°ç‰©ç†chunkä½ç½®çš„æ˜ å°„ï¼ˆåœ¨index structureä¸­ï¼‰ï¼Œæ¥è¾¾åˆ°é‡å¤æ£€æŸ¥å’Œå—æŸ¥æ‰¾ã€‚</p><h2 id="AustereCache-Design"><a href="#AustereCache-Design" class="headerlink" title="AustereCache Design"></a>AustereCache Design</h2><p>AustereCacheæ˜¯ä¸€ç§æ–°çš„é—ªå­˜ç¼“å­˜è®¾è®¡ï¼Œå®ƒåˆ©ç”¨é‡å¤æ•°æ®åˆ é™¤å’Œå‹ç¼©æ¥å®ç°å­˜å‚¨å’ŒI&#x2F;OèŠ‚çœï¼Œå°±åƒä¹‹å‰çš„å·¥ä½œï¼Œä½†ç‰¹åˆ«å¼ºè°ƒ<strong>å‡å°‘ç´¢å¼•çš„å†…å­˜ä½¿ç”¨</strong>ã€‚å®ƒçš„ç›®æ ‡æ˜¯é€šè¿‡ä¸‰ç§å…³é”®æŠ€æœ¯å®ç°ä¸¥æ ¼çš„ç¼“å­˜ç®¡ç†ã€‚</p><ul><li><strong>Bucketization</strong>ã€‚ä¸ºäº†æ¶ˆé™¤åœ¨LBA-indexå’ŒFP-indexä¸­ç»´æŠ¤åœ°å€æ˜ å°„çš„å¼€é”€ï¼Œæˆ‘ä»¬åˆ©ç”¨ç¡®å®šæ€§å“ˆå¸Œå°†å—ä¸å­˜å‚¨ä½ç½®å…³è”èµ·æ¥ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†ç´¢å¼•æ¡ç›®æ•£åˆ—åˆ°å¤§å°ç›¸ç­‰çš„åˆ†åŒº(ç§°ä¸ºæ¡¶)ä¸­ï¼Œæ¯ä¸ªæ¡¶éƒ½ä¿ç•™éƒ¨åˆ†LBAså’ŒFPsä»¥èŠ‚çœå†…å­˜ã€‚æ ¹æ®æ¡¶çš„ä½ç½®ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å°†å—æ˜ å°„åˆ°ç¼“å­˜ç©ºé—´ã€‚</li><li><strong>å›ºå®šå¤§å°çš„å‹ç¼©æ•°æ®ç®¡ç†</strong>ã€‚ä¸ºäº†é¿å…åœ¨FP-indexä¸­è·Ÿè¸ªå—çš„é•¿åº¦ï¼Œæˆ‘ä»¬å°†å¯å˜å¤§å°çš„å‹ç¼©å—è§†ä¸ºå›ºå®šå¤§å°çš„å•å…ƒã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†å¯å˜å¤§å°çš„å‹ç¼©å—åˆ’åˆ†ä¸ºè¾ƒå°çš„å›ºå®šå¤§å°çš„å­å—ï¼Œå¹¶åœ¨ä¸è®°å½•å‹ç¼©å—é•¿åº¦çš„æƒ…å†µä¸‹ç®¡ç†å­å—ã€‚</li><li><strong>åŸºäºæ¡¶çš„ç¼“å­˜æ›¿æ¢</strong>ã€‚ä¸ºäº†å¢åŠ ç¼“å­˜å‘½ä¸­çš„å¯èƒ½æ€§ï¼Œæˆ‘ä»¬å»ºè®®åœ¨æ¯ä¸ªæ¡¶çš„åŸºç¡€ä¸Šè¿›è¡Œç¼“å­˜æ›¿æ¢ã€‚ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬ç»“åˆäº†åŸºäºå¼•ç”¨è®¡æ•°(å³å¼•ç”¨æ¯ä¸ªå”¯ä¸€å—çš„é‡å¤å‰¯æœ¬çš„è®¡æ•°)çš„æœ€è¿‘æ€§å’Œé‡å¤æ•°æ®åˆ é™¤æ„ŸçŸ¥æ¥è¿›è¡Œæœ‰æ•ˆçš„ç¼“å­˜æ›¿æ¢ã€‚ä½†æ˜¯ï¼Œè·Ÿè¸ªå¼•ç”¨è®¡æ•°ä¼šå¯¼è‡´ä¸å¯å¿½ç•¥çš„å†…å­˜å¼€é”€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„ç´§å‡‘è‰å›¾æ•°æ®ç»“æ„åœ¨æœ‰é™çš„å†…å­˜ç©ºé—´ä¸­ä¼°è®¡æœ‰è¾¹ç•Œé”™è¯¯çš„å¼•ç”¨è®¡æ•°ã€‚</li></ul><h3 id="Bucketization"><a href="#Bucketization" class="headerlink" title="Bucketization"></a>Bucketization</h3><p>é¦–å…ˆå…ˆä¸è€ƒè™‘å‹ç¼©ã€‚<br>AustereCacheå°†LBAå’ŒFPç´¢å¼•éƒ½åˆ†æˆäº†å¤§å°ç›¸åŒçš„æ¡¶ï¼Œæ¯ä¸ªæ¡¶ä¸­æœ‰å›ºå®šï¼Œå¤§å°ç›¸åŒçš„slotã€‚åŒæ—¶ï¼Œå°†cacheçš„å‚¨å­˜åŒºåŸŸåˆ†æˆäº†a metadata regionå’Œa data regionï¼Œåˆ†åˆ«å‚¨å­˜å…ƒæ•°æ®å’Œç¼“å­˜çš„chunkã€‚åŒæ ·åœ°ï¼Œæ¯ä¸€ä¸ªregionä¹Ÿè¦è¢«åˆ†æˆæ¡¶ï¼Œå…¶ä¸­å†ç»†åˆ†slotsã€‚å€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸¤ä¸ªregionä¸­æ¡¶å’Œslotçš„æ•°é‡æ˜¯å’ŒFP-indexä¸­çš„æ•°é‡å¯¹åº”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´FP-indexä¸­çš„æ¯ä¸€ä¸ªslotå’Œmetadata regionã€data regionä¸­çš„slotä¸€ä¸€å¯¹åº”ã€‚<br>ä¸ºäº†èƒ½å‡å°‘å†…å­˜ä½¿ç”¨ï¼ˆå†…å­˜ä¸­å­˜æ”¾äº†LBA-indexå’ŒFP-indexï¼‰ï¼Œæ¯ä¸€ä¸ªslotä»…ä»…ä¼šå­˜æ”¾é”®çš„å‰ç¼€éƒ¨åˆ†ï¼ˆè€Œä¸æ˜¯åƒä¼ ç»Ÿflash cacheä¸€æ ·å­˜æ”¾å®Œæ•´çš„é”®ï¼‰ã€‚Austere Cacheé¦–å…ˆè®¡ç®—LBAå’ŒFPé”®çš„å“ˆå¸Œï¼Œåˆ†åˆ«å°†å…¶å‰ç¼€å­˜å…¥LBA-hashå’ŒFP-hashä¸­ï¼Œä½œä¸ºä¸»é”®ã€‚å½“ç„¶ï¼Œåªä½¿ç”¨å‰ç¼€è¿›è¡Œåˆ¤æ–­æ˜¾ç„¶ä¼šå¢åŠ å“ˆå¸Œå†²çªï¼Œæˆ‘ä»¬éœ€è¦åœ¨metadata regionä¸­å­˜å‚¨å®Œæ•´çš„LBAå’ŒFPï¼Œè¿™æ ·å“ˆå¸Œå†²çªåªä¼šå¯¼è‡´ä¸€ä¸ªcache missè€Œä¸æ˜¯æ•°æ®çš„ä¸¢å¤±ï¼ˆcache missæŒ‡çš„æ˜¯æˆ‘è™½ç„¶å‰ç¼€æ˜¯ç›¸åŒçš„ï¼Œä½†å®é™…ä¸Šæ•´ä¸ªé”®æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†cacheä¸­æ²¡æœ‰ï¼Œç±»ä¼¼äºçœ‹ä¸Šå»å‘½ä¸­äº†ï¼Œæ£€æŸ¥ä¸€ä¸‹åŸæ¥æ²¡æœ‰å‘½ä¸­ï¼Œç›´æ¥missäº†ï¼‰ã€‚å®é™…ä¸Šï¼Œå¦‚æœæ­£ç¡®é€‰æ‹©å‰ç¼€çš„é•¿åº¦å“ˆå¸Œå†²çªçš„æ¦‚ç‡ä¼šå¾ˆå°ã€‚</p><p><strong>å†™è·¯å¾„</strong> ä¸ºäº†åœ¨flash cacheä¸­å†™å…¥ä¸€ä¸ªå”¯ä¸€çš„chunkï¼ŒAustere Cacheä¼šæ›´æ–°LBA-indexå’ŒFP-indexã€‚å¯¹äºLBA-indexæ¥è¯´å®ƒä¼šæœ‰LBA-hashçš„å‰ç¼€æ¯”ç‰¹ï¼ˆ$\log_n k$ï¼‰æ¥é€‰æ‹©å®ƒåº”è¯¥æ”¾å…¥å“ªä¸ªæ¡¶ä¸­ã€‚é€‰æ‹©å®Œæ¯•åä¼šæ‰«æå…¶ä¸­çš„æ‰€æœ‰slotï¼ŒæŸ¥æ‰¾æ˜¯å¦æœ‰è¯¥LBA-hashçš„å‰ç¼€å·²ç»è¢«å­˜å‚¨äº†ã€‚å¦‚æœæ²¡æœ‰è¢«å­˜å‚¨ï¼Œå®ƒå°†æŠŠè¯¥æ¡ç›®æ”¾å…¥åˆ°ä¸€ä¸ªç©ºçš„slotæˆ–è€…å¦‚æœæ¡¶æ»¡äº†å°±æ›¿æ¢æ‰æŸä¸ªslotã€‚åœ¨å†™å…¥slotæ—¶ä¼šå°†LBA-hash prefix(primary key)ï¼ŒFP-hashï¼Œå’Œä¸€ä¸ªvalid flagå†™å…¥ã€‚åŒæ ·åœ°ï¼Œå¯¹äºFP-indexæ¥è¯´ï¼Œä¹Ÿä¼šå…ˆæ‰¾åˆ°å¯¹åº”çš„bucketï¼Œå†™å…¥FP-hash prefix(primary key)å’Œvalid flagã€‚<br>åŸºäºFP-indexä¸­æ¡¶å’Œslotçš„ä½ç½®ï¼ŒAustereCacheå°†ä¼šæŸ¥æ‰¾åˆ°å¯¹åº”metadata regionå’Œdata regionå¯¹åº”çš„æ¡¶å’Œslotçš„ä½ç½®ã€‚å¯¹äºmetadata regionæ¥è¯´ï¼Œå®ƒå­˜æ”¾äº†å®Œæ•´çš„FPå’Œä¸€å¯¹å¤šæ˜ å°„çš„LBA-listï¼ˆç”±äºLBAå¯èƒ½éå¸¸å¤šï¼Œå¹¶ä¸”å‡å®šä¸€ä¸ªslotåªæœ‰512 bytesï¼Œè¿™é‡Œå°†ä½¿ç”¨FIFOæ›¿æ¢æ‰æ—§çš„LBAï¼‰ã€‚å¯¹äºdata regionæ¥è¯´ï¼Œä¼šåœ¨å¯¹åº”çš„bucketå’Œslotï¼ˆä¹Ÿå°±æ˜¯CAï¼‰ä¸­å‚¨å­˜chunkã€‚</p><p><strong>deduplication path</strong> ä¸ºäº†èƒ½å¤Ÿåœ¨ä¸€ä¸ªè¢«å†™çš„chunkï¼ˆé€šè¿‡(LBA, FP)æ ‡è¯†ï¼‰å®ç°deduplicationï¼ŒAustereCacheé¦–å…ˆåœ¨FP-indexä¸­æŸ¥æ‰¾åˆ°å¯¹åº”çš„æ¡¶ï¼Œå†æŸ¥æ‰¾å¯¹åº”slotï¼Œå¦‚æœæ‰¾åˆ°äº†ä¸€æ¡æ•°æ®ï¼Œå†å»å¯¹åº”çš„metadata regionæŸ¥æ‰¾å®Œæ•´çš„FPå“ˆå¸Œæ˜¯å¦ä¸ä¹‹å¯¹åº”ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆä¸€ä¸ªduplicate chunkå°±è¢«æ‰¾åˆ°äº†ï¼ˆwhyï¼Ÿå¯èƒ½æ˜¯å› ä¸ºè¿™ä¸ªchunkæ˜¯åˆšå†™çš„ï¼Ÿï¼‰ï¼Œå¦‚æœåœ¨LBA-listæ²¡æœ‰å‡ºç°è¿‡ï¼Œå°±åœ¨è¯¥æ¡çš„listä¸­æ’å…¥å³å¯ã€‚å¦‚æœå®Œæ•´çš„FPä¸ç›¸åŒï¼Œè¯´æ˜å“ˆå¸Œå†²çªå‘ç”Ÿäº†ï¼ŒAustereCacheä¼šå°†å†²çªçš„FPæ ‡è®°ä¸ºinvalidï¼ˆåœ¨metadata regionä¸­ï¼‰ï¼Œå¹¶åƒä¹‹å‰ä¸€æ ·å†™å…¥æ–°çš„æ•°æ®ã€‚</p><p><strong>read path</strong> å¦‚æœæƒ³è¦è¯»ä¸€ä¸ªé€»è¾‘å—åœ°å€ä¸ºLBAçš„chunkï¼Œé¦–å…ˆéœ€è¦åœ¨LBA-indexä¸­ä½¿ç”¨LBAæŸ¥è¯¢FP-hashçš„å‰ç¼€ï¼Œå†å»FP-indexä¸­æŸ¥è¯¢å¯¹åº”çš„slotï¼ŒæŸ¥çœ‹LBAæ˜¯å¦åœ¨å¯¹åº”slotçš„LBA-listä¸­ã€‚å¦‚æœæ˜¯çš„ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªè¯»å‘½ä¸­ï¼›å¦åˆ™ï¼Œå°±æ˜¯cache missï¼ŒAustere Cacheå°†ä¼šä»HDDä¸­ä½¿ç”¨LBAè·å–è¿™ä¸ªchunkã€‚</p><p><strong>Analysis</strong> TBC</p><p><strong>Comparisons with other data structures</strong><br>index for each chunkï¼ŒB+ å’ŒLSM treeéœ€è¦ä¸¤æ¬¡è®¿é—®flashï¼Œä½†AustereCacheåªéœ€è¦è®¿é—®metadata regionä¸€æ¬¡ã€‚</p><h3 id="Fixed-Size-Compressed-Data-Management"><a href="#Fixed-Size-Compressed-Data-Management" class="headerlink" title="Fixed-Size Compressed Data Management"></a>Fixed-Size Compressed Data Management</h3><p>åœ¨deduplicationåï¼ŒAustereCacheå¯ä»¥å‹ç¼©æ‰€æœ‰å”¯ä¸€çš„chunkã€‚ä¸ºäº†é¿å…éœ€è¦è·Ÿè¸ªæ‰€æœ‰å‹ç¼©chunkçš„å¤§å°ï¼ŒAustereCacheä¼šå°†ä¸€ä¸ªå‹ç¼©çš„chunkåˆ†ä¸ºå¤§å°ç›¸åŒçš„å­chunkã€‚ä¾‹å¦‚ä¸€ä¸ªå­chunkå®ƒçš„å¤§å°æ˜¯8KBï¼Œé‚£ä¹ˆä¸€ä¸ª15KBçš„å‹ç¼©chunkä¼šè¢«åˆ†ä¸ºä¸¤ä¸ªå­chunkï¼ˆæœ€åä¸€ä¸ªå­chunkå°†ä¼šè¢«å¡«å……ï¼‰ã€‚<br>AustereCacheåˆ†é…ä¸FP-index(ä»¥åŠflashä¸­çš„å…ƒæ•°æ®å’Œæ•°æ®åŒºåŸŸ)å­å—ç›¸åŒæ•°é‡çš„è¿ç»­slotæ¥ç»„ç»‡ä¸€ä¸ªå‹ç¼©å—çš„æ‰€æœ‰å­å—;æ³¨æ„ï¼Œlbaç´¢å¼•ä¿æŒä¸å˜ï¼Œå®ƒçš„æ¯ä¸ªæ§½ä»ç„¶å¼•ç”¨ä¸€ä¸ªå—ã€‚<br>å¯¹äºFP-indexæ¥è¯´ï¼Œæ¯ä¸ªslotï¼ˆç°åœ¨æ¯ä¸ªslotä»£è¡¨çš„æ˜¯ä¸€ä¸ªå­å—ï¼‰ä¿å­˜äº†å¯¹åº”FPçš„å“ˆå¸Œå‰ç¼€ï¼ŒåŒæ ·è¿˜ä¿å­˜ç€validä½ã€‚å¯¹äºmetadata regionæ¥è¯´ï¼Œå®ƒä¹Ÿå¯¹åº”åˆ†é…äº†ä¸¤ä¸ªslotï¼Œç¬¬ä¸€ä¸ªslotä¸ä»…å‚¨å­˜äº†å®Œæ•´çš„FPå’ŒLBA listï¼Œè¿˜å‚¨å­˜äº†å‹ç¼©chunkçš„æ€»é•¿åº¦ï¼Œåé¢çš„slotå¯ä»¥æ˜¯ç©ºçš„ï¼Œè¿™æ ·å¯ä»¥é¿å…å¤šä½™çš„flash writeã€‚å¯¹äºdata regionæ¥è¯´ï¼ŒåŒæ ·ä¹Ÿéœ€è¦ä½¿ç”¨ä¸ä¹‹å¯¹åº”çš„subchunkæ¥å‚¨å­˜æ•°æ®ã€‚æ³¨æ„è¿™å¹¶ä¸ä¼šé€ æˆç”±äºè®°å½•å‹ç¼©å—é•¿åº¦å¼•èµ·çš„å†…å­˜é¢å¤–æ¶ˆè€—ã€‚ï¼ˆå› ä¸ºgranularity?ï¼‰</p><blockquote><p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ã€‚æœ‰æ²¡æœ‰å¯èƒ½ä¸€ä¸ªæ¡¶ä¸­æ”¾ä¸ä¸‹è¿ç»­çš„å­chunkäº†ï¼Œé‚£è¯¥æ€ä¹ˆåŠï¼Ÿ<br>ç­”ï¼šä¼šæ›¿æ¢æ‰å…¶ä»–çš„å§â€¦æˆ‘çŒœçš„â€¦</p></blockquote><p>å¸¦æœ‰å‹ç¼©çš„è¯»å†™workflowå’Œä¸å¸¦æœ‰å‹ç¼©çš„æ˜¯ç›¸ä¼¼çš„ï¼Œé™¤äº†åœ¨AustereCacheä¸­åœ¨FP-indexä¸ºäº†ä¸€ä¸ªå‹ç¼©å—æŸ¥æ‰¾å¤šä¸ªè¿ç»­çš„å­chunkã€‚æ³¨æ„æˆ‘ä»¬ç°åœ¨ä»ç„¶è®©ä¸€ä¸ªæ¡¶æœ‰128ä¸ªslotã€‚ç„¶è€Œç°åœ¨ä¸€ä¸ªslotå¯¹åº”äº†ä¸€ä¸ªè¾ƒå°çš„subchunkï¼Œæˆ‘ä»¬éœ€è¦æ›´å¤šçš„æ¡¶æ¥æ ‡è¯†FP-indx, metadata regionå’Œdata regionã€‚å½“æˆ‘ä»¬åˆ†é…æ›´å¤šæ¡¶çš„æ—¶å€™ï¼Œå†…å­˜ä½¿ç”¨ä¼šå¢åŠ ï¼Œç„¶è€ŒAustere Cacheç›¸è¾ƒäºå¤§å°å¯å˜çš„chunkæœ‰å†…å­˜ä¸Šçš„ä¼˜åŠ¿ã€‚</p><h3 id="Bucket-Based-Cache-Replacement"><a href="#Bucket-Based-Cache-Replacement" class="headerlink" title="Bucket-Based Cache Replacement"></a>Bucket-Based Cache Replacement</h3><p>å®ç°ç¼“å­˜æ›¿æ¢é€šå¸¸éœ€è¦ä»¥ä¼˜å…ˆçº§ä¸ºåŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œæ‰èƒ½å†³å®šcacheå—æ˜¯ä¿ç•™è¿˜æ˜¯æ›¿æ¢ï¼Œç„¶è€Œè¿™æ ·çš„æ•°æ®ç»“æ„å¿…ç„¶å¸¦æ¥å†…å­˜ä¸Šçš„é¢å¤–å¼€é”€ã€‚AustereCacheé€‰æ‹©å®ç°ä»¥æ¡¶ä¸ºåŸºæœ¬å•ä½çš„æ›¿æ¢ï¼Œè¿™æ ·çš„æ›¿æ¢ç®—æ³•ä¸ä¼šæœ‰æˆ–è€…è¯´åªæ˜¯å¸¦æ¥å°‘é‡çš„å†…å­˜å¼€é”€ï¼ˆè½¯ä»¶å±‚é¢ï¼‰ã€‚å› ä¸ºæ¯ä¸ªæ¡¶åªæœ‰128ä¸ªslotï¼Œå› æ­¤æ¯æ¬¡æ›¿æ¢ä¹Ÿä¸ä¼šæœ‰è¿‡å¤šçš„æ€§èƒ½å¼€é”€ï¼ˆç¡¬ä»¶å±‚é¢ï¼‰ã€‚<br>å¯¹äºLBA-indexæ¥è¯´ï¼ŒAustereCacheå®ç°äº†ä¸€ä¸ªåŸºäºæ¡¶çš„LRUè§„åˆ™ï¼šæ¦‚æ‹¬ä¸€ä¸‹ï¼Œå°±æ˜¯æ¯ä¸ªæ¡¶å®ç°LRUï¼Œæ¯ä¸€ä¸ªæ¡¶çš„lowest offsetä»£è¡¨äº†æœ€è¿‘ä¸€æ¬¡ä½¿ç”¨çš„slotã€‚æ¯æ¬¡æœ‰æ›´æ–°å°±æ˜¯ä¸€æ¬¡ç§»ä½ï¼Œè¿™æ ·ä¸ä¼šæœ‰é¢å¤–çš„å†…å­˜å¼€é”€ã€‚<br>å¯¹äºFP-indexï¼ŒåŒæ—¶è¿˜æœ‰metadataå’Œdata regionsæ¥è¯´ï¼Œæˆ‘ä»¬ä¼šå°†deduplication awarenesså’Œrecency awarenessä¸¤è€…ç»“åˆè€ƒè™‘ã€‚</p><ul><li>deduplication awareness: AustereCacheä¼šè·Ÿè¸ªæ‰€æœ‰FP-hashå¯¹åº”çš„LBAæ•°ã€‚å½“æœ‰ä¸€ä¸ªæ–°çš„FPè¦æ’å…¥å·²ç»æ”¾æ»¡çš„æ¡¶ä¸­æ—¶ï¼Œå®ƒå°†ä¼šæ›¿æ¢æ‰countæœ€å°çš„é‚£ä¸ªslotï¼ŒåŒæ—¶ä¼šå°†å¯¹åº”ä½ç½®çš„metadata region slot å’Œdata region slotçš„æœ‰æ•ˆä½ç½®0ã€‚<blockquote><p>åˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæœ‰subchunkï¼ŒFPåœ¨ä¸€ä¸ªæ¡¶ä¸­å¯èƒ½å‡ºç°å¤šæ¬¡ï¼Œé‚£ä¹ˆåº”è¯¥æ›¿æ¢å“ªä¸ªFPï¼Ÿè¿™æ ·æ•°æ®ä¸æ˜¯ä¸å®Œæ•´äº†å—ï¼Ÿ<br>å’ŒLRUç®—æ³•ä¸åŒçš„æ˜¯æ–°åŠ å…¥çš„FP-hashçš„countæ•°è‚¯å®šæ˜¯æœ€å°çš„ï¼Œè¯´æ˜æ–°åŠ å…¥ä¹‹åæ˜¯æœ€æœ‰å¯èƒ½è¢«æ›¿æ¢çš„ï¼Œè¿™æ ·çœŸçš„å¥½å—ï¼Ÿ</p></blockquote></li></ul><p>ç®€å•çš„reference countingå¹¶æ²¡æœ‰è§£å†³recencyçš„é—®é¢˜ã€‚ä¸ºäº†èƒ½å¤ŸåŒæ—¶è€ƒè™‘åˆ°recency awarenessï¼Œ AustereCache å°†æ¯ä¸ªLBAæ¡¶åˆ†ä¸ºäº†æœ€è¿‘è®¿é—®çš„slotså’Œè€çš„slotsï¼Œæœ€è¿‘çš„slotsåœ¨ä½offsetä¸­ï¼Œè€çš„slotsåœ¨é«˜offsetsä¸­ï¼ˆè¿™æ ·å°±è¢«åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼ˆï¼Ÿï¼‰ï¼‰ã€‚æ¯ä¸€ä¸ªä½äºæœ€è¿‘è®¿é—®çš„slotsä¸­çš„LBAå¯¹äºreference countingçš„è´¡çŒ®æ˜¯2ï¼Œold slots reference countingè´¡çŒ®æ˜¯1ã€‚ç‰¹åˆ«åœ°ï¼Œæ¯ä¸€ä¸ªæ–°åŠ å…¥çš„LBAéƒ½ä¼šå­˜å…¥æœ€è¿‘çš„slotï¼Œæ”¾åœ¨LBA-indexçš„æœ€ä½offsetä¸­ï¼Œå› æ­¤austereCacheå°†ä¼šå¯¹å¯¹åº”çš„fp-hashåŠ 2ã€‚å¦‚æœä¸€ä¸ªLBAä»recent sloté™çº§åˆ°old slotæˆ–è€…ä»LBA-indexä¸­æ›¿æ¢æ‰äº†ï¼ŒAustereCacheä¼šå°†å¯¹åº”çš„TPæ¡ç›®çš„countingå€¼-1ã€‚åŒæ ·åœ°ï¼Œå¦‚æœä¸€ä¸ªLBAæ¡ç›®å‡çº§äº†ï¼ŒFPæ¡ç›®çš„countingå°†+1ã€‚</p><p>ä¸ºæ‰€æœ‰çš„FP-hashesä¿æŒå¼•ç”¨è®¡æ•°å°†ä¼šå¸¦æ¥ä¸å¯é¿å…åœ°å†…å­˜æ¶ˆè€—ã€‚AustereCacheé€šè¿‡ä¸€ä¸ªCount-Min Sketchè§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒAustereCacheå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„ç´§å‡‘çš„æ•°æ®ç»“æ„æ¥è·Ÿè¸ªreference countsï¼Œå¹¶ä¸”å‡ºé”™æ˜¯æœ‰é™çš„ã€‚ä¸€ä¸ªCount-Min Sketchæ˜¯ä¸€ä¸ªä¸¤ä½çš„è®¡æ•°æ•°ç»„ï¼Œ$r$è¡Œ<br>å„æœ‰$w$ä¸ªè®¡æ•°å™¨ã€‚å®ƒæŠŠæ¯ä¸ªFP-hashæ˜ å°„æ¯è¡Œä¸­çš„ä¸€è®¡æ•°å™¨ä¸­ï¼Œå¹¶åŸºäºä¸Šé¢æåˆ°çš„å¢åŠ å’Œå‡å°‘è®¡æ•°æ¥ç»´æŠ¤å®ƒä»¬ã€‚AustereCacheå¯ä»¥ä¼°è®¡ä¸€ä¸ªFP-hashçš„å¼•ç”¨è®¡æ•°ä½¿ç”¨æ‰€æœ‰è¢«æ˜ å°„çš„FP-hashçš„æœ€å°å€¼ã€‚é”™è¯¯èŒƒå›´ä¹Ÿå¯ä»¥åŸºäº$r$å’Œ$w$ä»ç†è®ºä¸Šè¯æ˜ã€‚</p><blockquote><p>ç„¶è€Œï¼Œç»´æŠ¤æ‰€æœ‰fpå“ˆå¸Œçš„å¼•ç”¨è®¡æ•°ä¼šå¸¦æ¥ä¸å¯å¿½ç•¥çš„å†…å­˜å¼€é”€ã€‚AustereCacheé€šè¿‡ç»´æŠ¤Count-Min Sketch[13]æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥è·Ÿè¸ªå›ºå®šå¤§å°ç´§å‡‘æ•°æ®ç»“æ„ä¸­å¸¦æœ‰æœ‰é™é”™è¯¯çš„å¼•ç”¨è®¡æ•°ã€‚ä¸€ä¸ªCount-Min Sketchæ˜¯ä¸€ä¸ªäºŒç»´è®¡æ•°å™¨æ•°ç»„ï¼ŒåŒ…å«rè¡Œï¼Œæ¯ä¸ªè¡ŒåŒ…å«wä¸ªè®¡æ•°å™¨(å…¶ä¸­rå’Œwæ˜¯å¯é…ç½®çš„å‚æ•°)ã€‚å®ƒå°†æ¯ä¸ªFP-hash(é€šè¿‡ä¸€ä¸ªç‹¬ç«‹çš„hashå‡½æ•°)æ˜ å°„åˆ°rè¡Œçš„æ¯ä¸€è¡Œä¸­çš„ä¸€ä¸ªwè®¡æ•°å™¨ï¼Œå¹¶æ ¹æ®æˆ‘ä»¬çš„å¼•ç”¨è®¡æ•°æœºåˆ¶å¯¹æ˜ å°„çš„è®¡æ•°å™¨è¿›è¡Œé€’å¢æˆ–é€’å‡ã€‚AustereCacheå¯ä»¥ä½¿ç”¨FP-hashçš„æ‰€æœ‰æ˜ å°„è®¡æ•°å™¨çš„æœ€å°å€¼æ¥ä¼°è®¡FP-hashçš„å¼•ç”¨è®¡æ•°ã€‚æ ¹æ®rå’Œwçš„å€¼ï¼Œç†è®ºä¸Šè¯¯å·®ç•Œé™å¯ä»¥è¢«è¯æ˜ä¸º[13]ã€‚</p></blockquote><p>ç›®å‰ï¼Œæˆ‘ä»¬çš„å®ç°å°†å‚æ•°å°†$r$å›ºå®šä¸º4ï¼Œ$w$ä¸ºLBA-indexä¸­çš„æ‰€æœ‰slotsã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç®€å•çš„åˆ†ææ¥è¯æ˜sketch-based reference countingèƒ½è¿‡èŠ‚çœå·¨å¤§çš„å†…å­˜ã€‚</p><p>æˆ‘ä»¬çš„bucket-based cache replacementè®¾è®¡ä½œç”¨äºslot levelã€‚é€šè¿‡ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥åšå‡ºç¼“å­˜æ›¿æ¢å†³ç­–ï¼ŒAustereCacheå¯ä»¥ç«‹å³æ›¿æ¢ä»»ä½•é™ˆæ—§çš„å—ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰è¢«LBAå¼•ç”¨çš„ï¼‰ï¼ˆè¿™æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼‰ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªAustereCacheçš„åŸå‹ï¼Œä½œä¸ºä¸€ä¸ªç”¨æˆ·ç©ºé—´å—è®¾å¤‡åœ¨Linuxæœºå™¨ä¸Šã€‚user-space implementationè®©æˆ‘ä»¬éå¸¸ä¹æ„ï¼ˆï¼Ÿï¼‰éƒ¨ç½²é«˜çº§ç®—æ³•å’Œå¤šçº¿ç¨‹æ¥æå‡æ€§èƒ½ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬çš„AustereCacheåŸå‹åˆ†åˆ«é€šè¿‡preadå’Œpwriteç³»ç»Ÿè°ƒç”¨å¯¹åº•å±‚å­˜å‚¨è®¾å¤‡è¿›è¡Œè¯»å†™æ“ä½œã€‚å®ƒä½¿ç”¨SHA-1å¯¹chunkè¿›è¡ŒåŠ å¯†ï¼Œâ€¦â€¦â€¦â€¦æˆ‘ä»¬åŒæ—¶è¿˜å°†CacheDedupçš„cache replacement algoèåˆè¿›æ¥æ¥è¿›è¡Œå…¬å¹³çš„æ¯”è¾ƒã€‚<br>æˆ‘ä»¬ä½¿ç”¨å¤šçº¿ç¨‹æ¥å¹¶è¡Œè§£å†³å¤šä¸ªè¯»å†™è¯·æ±‚è¾¾åˆ°é«˜æ€§èƒ½ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å®ç°äº†æ¡¶çº§åˆ«çš„å¹¶å‘ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªè¯»ã€å†™è¯·æ±‚éœ€è¦è·å¾—ä¸€ä¸ªäº’æ–¥é”ï¼Œæ‰èƒ½è·å¾—LBA-indexå’ŒFP-indexä¸­çš„ä¸€ä¸ªæ¡¶çš„æ•°æ®ã€‚å½“ç„¶å¤šä¸ªè¯·æ±‚å¯ä»¥åŒæ—¶è¯»å†™ä¸åŒçš„æ¡¶ã€‚</p><h2 id="è¯„ä»·"><a href="#è¯„ä»·" class="headerlink" title="è¯„ä»·"></a>è¯„ä»·</h2><p>æˆ‘ä»¬å¯¹AustereCacheè¿›è¡Œäº†ç°å®å’Œäººå·¥çš„è·Ÿè¸ªã€‚æˆ‘ä»¬è€ƒè™‘äº†Austere Cacheçš„ä¸¤ä¸ªå˜é‡ï¼š</p><ol><li>AC-Dï¼Œå®ƒå®Œæˆäº†deduplicationè€Œæ²¡æœ‰compression</li><li>AC-DCï¼Œå®ƒå®Œæˆäº†deduplicationå’Œcompression</li></ol>]]></content>
      
      
      <categories>
          
          <category> storage </category>
          
          <category> paper translation </category>
          
      </categories>
      
      
        <tags>
            
            <tag> storage </tag>
            
            <tag> paper </tag>
            
            <tag> cache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¼å¼¹é˜²å¾¡ç³»ç»Ÿ</title>
      <link href="/2022/04/17/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%AF%BC%E5%BC%B9%E9%98%B2%E5%BE%A1%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/04/17/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%AF%BC%E5%BC%B9%E9%98%B2%E5%BE%A1%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/189/">åŸé¢˜é“¾æ¥</a></p><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ä¸ºäº†å¯¹æŠ—é™„è¿‘æ¶æ„å›½å®¶çš„å¨èƒï¼ŒRRÂ å›½æ›´æ–°äº†ä»–ä»¬çš„å¯¼å¼¹é˜²å¾¡ç³»ç»Ÿã€‚<br>ä¸€å¥—é˜²å¾¡ç³»ç»Ÿçš„å¯¼å¼¹æ‹¦æˆªé«˜åº¦è¦ä¹ˆä¸€ç›´Â <strong>ä¸¥æ ¼å•è°ƒ</strong>Â ä¸Šå‡è¦ä¹ˆä¸€ç›´Â <strong>ä¸¥æ ¼å•è°ƒ</strong>Â ä¸‹é™ã€‚<br>ä¾‹å¦‚ï¼Œä¸€å¥—ç³»ç»Ÿå…ˆåæ‹¦æˆªäº†é«˜åº¦ä¸º3å’Œé«˜åº¦ä¸º4çš„ä¸¤å‘å¯¼å¼¹ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¯¥ç³»ç»Ÿå°±åªèƒ½æ‹¦æˆªé«˜åº¦å¤§äº4çš„å¯¼å¼¹ã€‚<br>ç»™å®šå³å°†è¢­æ¥çš„ä¸€ç³»åˆ—å¯¼å¼¹çš„é«˜åº¦ï¼Œè¯·ä½ æ±‚å‡ºè‡³å°‘éœ€è¦å¤šå°‘å¥—é˜²å¾¡ç³»ç»Ÿï¼Œå°±å¯ä»¥å°†å®ƒä»¬å…¨éƒ¨å‡»è½ã€‚</p><h2 id="æ€è·¯æè¿°"><a href="#æ€è·¯æè¿°" class="headerlink" title="æ€è·¯æè¿°"></a>æ€è·¯æè¿°</h2><p>ç”±äºæœ€å¤šåªæœ‰50æšå¯¼å¼¹ï¼Œå› æ­¤å¯ä»¥ç›´æ¥éå†æ•´ä¸ªå¯¼å¼¹åºåˆ—ã€‚å¦‚æœè¢«æ”¾åˆ°äº†å•è°ƒä¸Šå‡åºåˆ—ä¸­ï¼Œé‚£ä¹ˆå»æšä¸¾è¯¥æ•°æ”¾åˆ°å“ªä¸ªå•è°ƒåºåˆ—ä¸­ï¼›å¦‚æœè¢«æ”¾åˆ°äº†å•è°ƒä¸‹é™åºåˆ—ä¸­ï¼Œé‚£ä¹ˆå»æšä¸¾è¯¥æ•°æ”¾åˆ°å“ªä¸ªå•è°ƒåºåˆ—ä¸­ã€‚<br>è¿™æ ·æ—¶é—´å¤æ‚åº¦ç›´æ¥çˆ†ç‚¸ã€‚å®é™…ä¸Šï¼Œå¹¶ä¸éœ€è¦å»æšä¸¾è¯¥æ•°åº”è¯¥æ”¾åœ¨å“ªä¸ªå•è°ƒåºåˆ—ä¸­ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª<code>up[]</code>å’Œ<code>down[]</code>æ•°ç»„ï¼Œåˆ†åˆ«å‚¨å­˜æ‰€æœ‰å•è°ƒä¸Šå‡å­åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä»¥åŠä¸‹é™å­åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆè¯¥ä¼˜åŒ–æ˜¯å¯¹äºä¹‹å‰ç›´æ¥æšä¸¾çš„æå¤§æå‡ï¼‰ã€‚<br>é‚£ä¹ˆéå†åº”è¯¥æ€ä¹ˆæ€ä¹ˆå®ç°å‘¢ï¼Ÿå¦‚æœæ—¢å¯èƒ½æ”¾åœ¨ä¸Šå‡ï¼Œä¹Ÿå¯èƒ½æ”¾åœ¨ä¸‹é™ï¼Œè¿™æ ·å°±æœ‰ä¸¤ç§å¯èƒ½ï¼Œè¿™æ ·è¿›è¡Œä¸€ä¸ªdfsæœç´¢ï¼Œä½†å¦‚æœæ˜¯çˆ†æœè¿˜æ˜¯ä¼šTLEï¼Œè¿˜éœ€è¦ä¸€å±‚ä¸€å±‚æœç´¢ï¼Œæ‰èƒ½é«˜æ•ˆå¾—åˆ°ç­”æ¡ˆã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">51</span>;</span><br><span class="line"><span class="type">int</span> up[N], down[N];</span><br><span class="line"><span class="type">int</span> arr[N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> depth, <span class="type">int</span> i_arr, <span class="type">int</span> i_up, <span class="type">int</span> i_down)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i_up + i_down &gt; depth) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(i_arr == n+<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> i, change = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= i_up; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(up[i] &lt; arr[i_arr]) &#123;</span><br><span class="line">            change = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    <span class="keyword">if</span>(change) &#123;</span><br><span class="line">        temp = up[i];</span><br><span class="line">        up[i] = arr[i_arr];</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dfs</span>(depth, i_arr+<span class="number">1</span>, i_up, i_down)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(i_up + <span class="number">1</span> + i_down &lt;= n)&#123;</span><br><span class="line">        up[i_up+<span class="number">1</span>] = arr[i_arr];</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dfs</span>(depth, i_arr+<span class="number">1</span>, i_up+<span class="number">1</span>, i_down)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(change) up[i] = temp;</span><br><span class="line">    change = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= i_down; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(down[i] &gt; arr[i_arr]) &#123;</span><br><span class="line">            change = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(change) &#123;</span><br><span class="line">        temp = down[i];</span><br><span class="line">        down[i] = arr[i_arr];</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dfs</span>(depth, i_arr+<span class="number">1</span>, i_up, i_down)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(i_up + i_down + <span class="number">1</span> &lt;= n)&#123;</span><br><span class="line">        down[i_down+<span class="number">1</span>] = arr[i_arr];</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dfs</span>(depth, i_arr+<span class="number">1</span>, i_up, i_down+<span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(change) down[i] = temp;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n)) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">        <span class="type">int</span> r = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!<span class="built_in">dfs</span>(r,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>)) r++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> æœç´¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> acwing </tag>
            
            <tag> æœç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–¹æ ¼å–æ•°</title>
      <link href="/2022/04/10/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%96%B9%E6%A0%BC%E5%8F%96%E6%95%B0/"/>
      <url>/2022/04/10/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%96%B9%E6%A0%BC%E5%8F%96%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/1029/">åŸé¢˜é“¾æ¥</a></p><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>è®¾æœ‰ NÃ—N çš„æ–¹æ ¼å›¾ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­çš„æŸäº›æ–¹æ ¼ä¸­å¡«å…¥æ­£æ•´æ•°ï¼Œè€Œå…¶å®ƒçš„æ–¹æ ¼ä¸­åˆ™æ”¾å…¥æ•°å­—0ã€‚<br>æŸäººä»å›¾ä¸­çš„å·¦ä¸Šè§’ A å‡ºå‘ï¼Œå¯ä»¥å‘ä¸‹è¡Œèµ°ï¼Œä¹Ÿå¯ä»¥å‘å³è¡Œèµ°ï¼Œç›´åˆ°åˆ°è¾¾å³ä¸‹è§’çš„ B ç‚¹ã€‚<br>åœ¨èµ°è¿‡çš„è·¯ä¸Šï¼Œä»–å¯ä»¥å–èµ°æ–¹æ ¼ä¸­çš„æ•°ï¼ˆå–èµ°åçš„æ–¹æ ¼ä¸­å°†å˜ä¸ºæ•°å­—0ï¼‰ã€‚<br>æ­¤äººä» A ç‚¹åˆ° B ç‚¹å…±èµ°äº†ä¸¤æ¬¡ï¼Œè¯•æ‰¾å‡ºä¸¤æ¡è¿™æ ·çš„è·¯å¾„ï¼Œä½¿å¾—å–å¾—çš„æ•°å­—å’Œä¸ºæœ€å¤§ã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆå¯ä»¥çŸ¥é“ï¼Œå¦‚æœä½¿ç”¨ä¸¤æ¬¡dpå»æ±‚è§£çš„ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ã€‚èµ°ä¸€æ¬¡çš„æƒ…å†µæ¥è¯´ï¼Œdpåªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œå³æ¨ªåæ ‡å’Œçºµåæ ‡ã€‚<br>ä¸‹é¢ï¼Œåº”è¯¥æ¥æ€è€ƒä¸¤æ¬¡èµ°çš„æ—¶å€™ä¼šæœ‰ä»€ä¹ˆæ€§è´¨ï¼š</p><ol><li>ä¸¤æ¡è·¯å¾„å¯èƒ½ä¼šæœ‰é‡åˆç‚¹ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚æœ‰é‡åˆç‚¹çš„å—çš„å€¼åªèƒ½ç®—ä¸€æ¬¡ã€‚</li><li>ä¸¤æ¡è·¯å¾„çš„æ€»é•¿åº¦æ˜¯ä¸€æ ·çš„ã€‚</li></ol><p>å½“ç„¶ï¼Œè¿™ä¸ªæ€§è´¨æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä½†é—®é¢˜çš„å…³é”®å°±åœ¨äºå¦‚ä½•å¤„ç†é‡åˆç‚¹ã€‚</p><p>å¯¹äºä¸¤æ¬¡dpæ¥è¯´ï¼Œä¸èƒ½å¾ˆå¥½è§£å†³é—®é¢˜çš„åŸå› åœ¨äºæ¯æ¬¡åªèƒ½è€ƒè™‘ä¸€ä¸ªäººçš„æœ€ä¼˜æƒ…å†µï¼Œä¼šå‡ºç°ä¸€ä¸ªäººæœ€ä¼˜ï¼Œå´è®©å¦ä¸€ä¸ªäººå¾—åˆ°çš„å€¼å°äºé¢„æœŸå€¼çš„æƒ…å†µã€‚</p><p>è€ƒè™‘å®ŒåŸºæœ¬æ€§è´¨å’Œè§£å†³éš¾ç‚¹åï¼Œé‚£ä¹ˆå¯ä»¥æƒ³åˆ°æˆ‘ä»¬è¦å®ç°çš„dpæ˜¯ç»¼åˆè€ƒè™‘ä¸¤æ¡è·¯å¾„ä»¥åŠé‡åˆç‚¹çš„dpã€‚å…³äºé‡åˆç‚¹ï¼Œå¯ä»¥å‘ç°å¦‚æœä¸¤æ¡è·¯å¾„æœ‰é‡åˆç‚¹ï¼Œé‚£ä¹ˆä»èµ·ç‚¹åˆ°é‡åˆç‚¹çš„è·¯å¾„åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚å¦‚æœæ¯ç§’èµ°ä¸€æ­¥ï¼Œé‚£ä¹ˆåº”è¯¥åŒæ—¶ç»è¿‡è¿™ä¸ªé‡åˆç‚¹ã€‚é‚£ä¹ˆå¯ä»¥ä½¿ç”¨æ—¶é—´ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯æ­¥æ•°ï¼‰ä»¥åŠä¸¤ä¸ªèŠ‚ç‚¹çš„åæ ‡ä½œä¸ºäº”ä¸ªçŠ¶æ€ã€‚<br>å½“ç„¶ï¼Œè¿™äº”ä¸ªçŠ¶æ€æ˜¯æœ‰å†—ä½™çš„ï¼Œæœ‰äº†æ­¥æ•°ä¹‹åï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åæ ‡å¯ä»¥åªç”¨æ¨ªåæ ‡æ¥è¡¨ç¤ºã€‚<br>åˆ†æè‡³æ­¤ï¼Œç®—æ³•å·²ç»æ˜äº†äº†ã€‚</p><h2 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">200</span>, N = <span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> f[(N&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>][N][N], m[N][N];</span><br><span class="line"><span class="type">int</span> back[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        <span class="keyword">if</span>(a == <span class="number">0</span> &amp;&amp; b == <span class="number">0</span> &amp;&amp; c == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        m[a][b] = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">2</span>; k &lt;= <span class="number">2</span> * n; ++k) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i1 = <span class="number">1</span>; i1 &lt;= n &amp;&amp; i1 &lt; k; ++i1) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i2 = <span class="number">1</span>; i2 &lt;= n &amp;&amp; i2 &lt; k; ++i2) &#123;</span><br><span class="line">                <span class="keyword">if</span>(i1 == i2) f[k][i1][i2] = m[i1][k-i1];</span><br><span class="line">                <span class="keyword">else</span> f[k][i1][i2] = m[i1][k-i1]+m[i2][k-i2];</span><br><span class="line">                <span class="type">int</span> past = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(k - <span class="number">1</span> - i1 &gt;= <span class="number">1</span> &amp;&amp; k - <span class="number">1</span> - i2 &gt;= <span class="number">1</span>) past = <span class="built_in">max</span>(past, f[k<span class="number">-1</span>][i1][i2]);</span><br><span class="line">                <span class="keyword">if</span>(k - <span class="number">1</span> - i1 &gt;= <span class="number">1</span> &amp;&amp; i2 &gt; <span class="number">1</span>) past = <span class="built_in">max</span>(past, f[k<span class="number">-1</span>][i1][i2<span class="number">-1</span>]);</span><br><span class="line">                <span class="keyword">if</span>(i1 &gt; <span class="number">1</span> &amp;&amp; k - <span class="number">1</span> - i2 &gt;= <span class="number">1</span>) past = <span class="built_in">max</span>(past, f[k<span class="number">-1</span>][i1<span class="number">-1</span>][i2]);</span><br><span class="line">                <span class="keyword">if</span>(i1 &gt; <span class="number">1</span> &amp;&amp; i2 &gt; <span class="number">1</span>) past = <span class="built_in">max</span>(past, f[k<span class="number">-1</span>][i1<span class="number">-1</span>][i2<span class="number">-1</span>]);</span><br><span class="line">                f[k][i1][i2] += past;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[<span class="number">2</span>*n][n][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> çº¿æ€§dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯è€ƒåæ„Ÿæƒ³</title>
      <link href="/2022/04/09/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%93%9D%E6%A1%A5%E6%9D%AF%E8%80%83%E5%90%8E%E6%84%9F%E6%83%B3/"/>
      <url>/2022/04/09/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%93%9D%E6%A1%A5%E6%9D%AF%E8%80%83%E5%90%8E%E6%84%9F%E6%83%B3/</url>
      
        <content type="html"><![CDATA[<p>åŸºæœ¬æƒ…å†µï¼šä¸€é¢˜æ²¡Aï¼Œæ¯”è¾ƒé—æ†¾çš„æ˜¯æœ€åä¸€é¢˜çŸ¥é“æ˜¯æ€ä¹ˆåšï¼Œä½†æ˜¯åªå‰©ä¸‹äºŒååˆ†é’Ÿæ‰“ä»£ç ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å‘ç°æœ‰äº›ç»†èŠ‚æ²¡æœ‰è€ƒè™‘å¥½å°±åŒ†åŒ†å¿™å¿™äº¤äº†ä¸Šå»ï¼Œä¸çŸ¥é“ä¼šä¸ä¼šæœ‰é—®é¢˜ã€‚</p><p>æœ¬æ¬¡æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æœ‰Nimæ¸¸æˆï¼ŒåŠ¨æ€è§„åˆ’ï¼Œå›¾ç®—æ³•ï¼Œæ•°å­¦çŸ¥è¯†ï¼Œè¿˜æœ‰å‡ é¢˜æˆ‘æ²¡æœ‰æƒ³åˆ°ç”¨ä»€ä¹ˆæ–¹æ³•åšã€‚ç›´è§‚æ¥çœ‹è¿™äº›éƒ½æ˜¯æˆ‘ä¹‹å‰ç®—æ³•å­¦åˆ°çš„å†…å®¹ï¼Œä½†ç”±äºå¹¶æ²¡æœ‰å·©å›ºåŸºç¡€ï¼Œå¯¼è‡´ä¸€é“é¢˜éƒ½æ²¡æœ‰Aå‡ºæ¥â€¦å…·ä½“æ¥è¯´ï¼Œè™½ç„¶æˆ‘å­¦äº†åŠ¨æ€è§„åˆ’çš„æ±‚æœŸæœ›ï¼Œä½†åœ¨è€ƒåœºä¸Šå®Œå…¨å¿˜äº†æ€ä¹ˆæ‰“ï¼Œå¹¶ä¸”é‚£é¢˜è¿˜æ˜¯åŠ ä¸Šäº†æ•°å­¦çŸ¥è¯†çš„å–æ¨¡å®šç†ï¼Œçœ‹å®Œé¢˜ç›®è„‘å­å°±ä¸€ç‰‡ç©ºç™½ã€‚æˆ‘è§‰å¾—è¿™ä¹Ÿæ˜¯åœ¨çŸ­æœŸå­¦äº†è¿™ä¹ˆå¤šå†…å®¹ä¸€ä¸‹æ¬¡æ¥äº†è¾“å‡ºæœºä¼šçš„ä¸€äº›ç¼ºé™·å§ï¼Œç”±äºæ²¡æœ‰æ—¶é—´å»å·©å›ºå­¦è¿‡çš„å†…å®¹ï¼Œè¯´ç€è¯´å»åˆ·å¯¹åº”é¢˜ç›®åŸ¹å…»ç®—æ³•æ€ç»´ï¼ŒçœŸçš„å¾ˆéš¾åœ¨è€ƒåœºä¸Šå‡­ç©ºæƒ³å‡ºä¸€ä¸ªç™¾åˆ†çš„è§£æ³•ã€‚</p><p>æ‰“ç®—è¿˜æ˜¯ç»§ç»­æŠŠç®—æ³•åŸºç¡€å·©å›ºä¸€éï¼ŒæŠŠæ‰€æœ‰çš„ç¬”è®°éƒ½æ•´ç†å‡ºæ¥ï¼Œæ•´ç†å‡ºæ¥ç»§ç»­å»å­¦ä¹ ç®—æ³•æé«˜çš„å†…å®¹ï¼Œä»¥åè¦è§„å®šåœ¨æ—¶é—´å†…ä¸èƒ½çœ‹è§£æï¼Œä¸€å®šè¦è‡ªå·±æƒ³ä¸€ä¸ªæ€è·¯ï¼ŒæŠŠä»£ç æ‰“å‡ºæ¥ã€‚ä½†çŸ­æ—¶é—´å­¦ç®—æ³•å’Œåˆ·å¤§é‡é¢˜å®åœ¨æ˜¯æ¯”è¾ƒçŸ›ç›¾çš„äº‹æƒ…å‘œå‘œã€‚</p><p>æ¯”è¾ƒé—æ†¾çš„æ˜¯è™½ç„¶åœ¨è€ƒå‰ä¸€ç›´æé†’è¦ä»¥æ‹¿æœ€å¤šåˆ†ä¸ºè¿½æ±‚ï¼Œä½†çœŸæ­£æ‰“ä»£ç ä¹‹åæ€»è§‰å¾—ä¸€é“é¢˜åªå†™å‡ºæ¥æš´åŠ›ç®—æ³•ï¼Œæˆ–è€…è¯´ç”šè‡³è¿æš´åŠ›éƒ½ä¸ä¼šå†™å®åœ¨æ˜¯è¿‡äºä¸¢è„¸çš„äº‹ï¼Œç„¶åå°±ä¸€ç›´ç›¯ç€ä¸€é“é¢˜ä¹Ÿæ²¡æƒ³å‡ºä»€ä¹ˆå¥½åŠæ³•ã€‚å¸Œæœ›ä¸‹æ¬¡è€ƒè¯•çš„æ—¶å€™ï¼Œä¸è®ºæ˜¯åé¢çš„å¤©æ¢¯èµ›è¿˜æ˜¯æœ€åä¸€æ¬¡cspï¼Œéƒ½å¯ä»¥åšåˆ°å†·é™åˆ†æï¼Œä»¥æœ€åçš„ç»“æœä¸ºé‡ã€‚</p><p>æœ€åï¼Œä¸çŸ¥é“è¯´ä»€ä¹ˆäº†ï¼Œé‚£ä¹ˆï¼šzhtè¿˜æ˜¯å¾ˆæ£’çš„ï¼åŠ æ²¹ï¼</p>]]></content>
      
      
      <categories>
          
          <category> æ€è€ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åæ€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kå€åŒºé—´</title>
      <link href="/2022/04/08/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/K%E5%80%8D%E5%8C%BA%E9%97%B4/"/>
      <url>/2022/04/08/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/K%E5%80%8D%E5%8C%BA%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/1232/">åŸé¢˜é“¾æ¥</a><br>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$N$çš„æ•°åˆ—ï¼Œ$A_1,A_2,â€¦A_N$ï¼Œå¦‚æœå…¶ä¸­ä¸€æ®µè¿ç»­çš„å­åºåˆ— $A_i,A_{i+1},â€¦A_j$ä¹‹å’Œæ˜¯$K$çš„å€æ•°ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸ªåŒºé—´$[i,j]$æ˜¯$K$å€åŒºé—´ã€‚</p><p>ä½ èƒ½æ±‚å‡ºæ•°åˆ—ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ª$K$å€åŒºé—´å—ï¼Ÿ</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="æš´åŠ›åšæ³•"><a href="#æš´åŠ›åšæ³•" class="headerlink" title="æš´åŠ›åšæ³•"></a>æš´åŠ›åšæ³•</h3><p>å¥—ä¸¤ä¸ªå¾ªç¯ï¼Œæ¯ä¸ªå¾ªç¯ä½¿ç”¨sumå»æ±‚å’Œç„¶åå–ä½™ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n^3)$</p><h3 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h3><p>ä½¿ç”¨å‰ç¼€å’Œå¯ä»¥ä¼˜åŒ–åˆ°é‡å¤çš„æ±‚å’Œéƒ¨åˆ†ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿéœ€è¦ä¸¤å±‚å¾ªç¯éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n^2)$</p><h3 id="ä¼˜åŒ–å‰ç¼€å’Œ"><a href="#ä¼˜åŒ–å‰ç¼€å’Œ" class="headerlink" title="ä¼˜åŒ–å‰ç¼€å’Œ"></a>ä¼˜åŒ–å‰ç¼€å’Œ</h3><p>åœ¨åŸºæœ¬å‰ç¼€å’Œçš„ä¸¤å±‚å¾ªç¯ä¸­ï¼Œåˆ¤æ–­æŸä¸€èŒƒå›´ä¹‹å’Œæ˜¯å¦ä½™æ•°ä¸º0å®é™…ä¸Šæ˜¯ä½¿ç”¨$a[i]-a[j] \ mod\ K \equiv 0$æ¥åˆ¤æ–­çš„ï¼Œå†è¿›ä¸€æ­¥æ€è€ƒå®é™…ä¸Šå°±æ˜¯$a[i]$å’Œ$a[j]$åŒä½™æ‰å¯ä»¥ã€‚è¿™æ ·å®Œå…¨å¯ä»¥å†å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾$a[i]\ mod\ K$çš„å€¼ï¼Œè¿™æ ·åªéœ€è¦éå†è¿™ä¸ªæ•°ç»„ä¸€éå³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100001</span>;</span><br><span class="line">LL a[N], n, k;</span><br><span class="line"><span class="type">int</span> cnt[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        a[i] = a[i<span class="number">-1</span>] + x;</span><br><span class="line">    &#125;</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        res += (LL)cnt[a[i] % k];</span><br><span class="line">        cnt[a[i] % k]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><p>è§‚å¯Ÿæ•°æ®èŒƒå›´ï¼Œåˆ¤æ–­æ˜¯å¦ä¼šçˆ†<code>int</code>ï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨<code>long long</code>æ¥å‚¨å­˜ã€‚</p><p>åæ€ï¼šè¿˜æ˜¯ä¸ä¼šåˆ†æé—®é¢˜ï¼ŒåŒæ—¶è¿‡äºä¾èµ–ä»£ç è¯„æµ‹çš„æŠ¥é”™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acwing </tag>
            
            <tag> å‰ç¼€å’Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é£è¡Œå‘˜å…„å¼Ÿ</title>
      <link href="/2022/04/07/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E9%A3%9E%E8%A1%8C%E5%91%98%E5%85%84%E5%BC%9F/"/>
      <url>/2022/04/07/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E9%A3%9E%E8%A1%8C%E5%91%98%E5%85%84%E5%BC%9F/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/118/">åŸé¢˜é“¾æ¥</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">int</span> num, res = inf;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">p</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; ++j) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, (x &gt;&gt; (<span class="number">4</span> * i + j)) &amp; <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">string s;</span><br><span class="line">cin &gt;&gt; s;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(s[j] == <span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">num |= (<span class="number">1</span> &lt;&lt; (i * <span class="number">4</span> + j));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//p(num);</span></span><br><span class="line"><span class="type">int</span> ptr = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1</span> &lt;&lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line"><span class="type">int</span> times = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> temp = num;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>((i &gt;&gt; j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">times++;</span><br><span class="line"><span class="comment">//p(temp);</span></span><br><span class="line"><span class="type">int</span> column = j % <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> row = j / <span class="number">4</span>;</span><br><span class="line"><span class="comment">//printf(&quot;row: %d, column: %d\n&quot;, row, column);</span></span><br><span class="line"><span class="type">int</span> n = <span class="number">0xf</span> &lt;&lt; (<span class="number">4</span> * row);</span><br><span class="line">n |= <span class="number">0x1111</span> &lt;&lt; column;</span><br><span class="line">temp ^= n;</span><br><span class="line"><span class="comment">// temp ^= 1 &lt;&lt; j;</span></span><br><span class="line"><span class="comment">//p(temp);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp == <span class="number">0</span> &amp;&amp; times &lt; res) &#123;</span><br><span class="line">res = times, ptr = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>((ptr &gt;&gt; j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, j / <span class="number">4</span> + <span class="number">1</span>, j % <span class="number">4</span> + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è“æ¡¥æ¯ </tag>
            
            <tag> çŠ¶æ€å‹ç¼© </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è´¹è§£çš„å¼€å…³</title>
      <link href="/2022/04/07/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%B4%B9%E8%A7%A3%E7%9A%84%E5%BC%80%E5%85%B3/"/>
      <url>/2022/04/07/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%B4%B9%E8%A7%A3%E7%9A%84%E5%BC%80%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<p>é™¤äº†ç¬¬ä¸€è¡Œä¹‹å¤–ï¼Œæ¯ä¸€è¡Œçš„æ“ä½œéƒ½ç”±ä¸Šé¢ä¸€è¡Œå†³å®šã€‚æ ¹æ®é¢˜ç›®æ‰€ç»™çš„é™åˆ¶å¯ä»¥çŸ¥é“ï¼Œæ¯ä¸€ä¸ªå¼€å…³åªéœ€è¦æ“ä½œä¸€æ¬¡ã€‚å¦‚æœæ¯æ¬¡ä»ç¬¬ä¸€è¡Œå¼€å§‹æ“ä½œï¼Œç¬¬ä¸€è¡Œçš„æ“ä½œç§ç±»æœ‰$2^5$ï¼Œé‚£ä¹ˆä¸‹ä¸€è¡Œå¿…é¡»æ“ä½œï¼Œä¹Ÿæ˜¯åªèƒ½æ“ä½œçš„å°±æ˜¯ä¸Šä¸€è¡Œå¯¹åº”åˆ—ä¸ºæš—çš„å—ã€‚<br>ä»£ç å®ç°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">6</span>;</span><br><span class="line"><span class="type">int</span> m[N][N], backup[N][N];</span><br><span class="line"><span class="type">int</span> dx[<span class="number">4</span>]= &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> dy[<span class="number">4</span>] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">p</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; ++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">5</span>; ++j) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, m[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">turn_on</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">backup[x][y] ^= <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line"><span class="type">int</span> xx = x + dx[i], yy = y + dy[i];</span><br><span class="line"><span class="keyword">if</span>(xx &gt;= <span class="number">1</span> &amp;&amp; xx &lt;= <span class="number">5</span> &amp;&amp; yy &gt;= <span class="number">1</span> &amp;&amp; yy &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">backup[xx][yy] ^= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;in.txt&quot;</span>,<span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"><span class="keyword">while</span>(n--) &#123;</span><br><span class="line">string s;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; ++i) &#123;</span><br><span class="line">cin &gt;&gt; s;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; ++j) &#123;</span><br><span class="line">m[i][j+<span class="number">1</span>] = s[j] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// p();</span></span><br><span class="line"><span class="type">int</span> res = <span class="number">7</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">memcpy</span>(backup, m, <span class="keyword">sizeof</span> m);</span><br><span class="line"><span class="type">int</span> times = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>((i &gt;&gt; j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line"><span class="built_in">turn_on</span>(<span class="number">1</span>, j+<span class="number">1</span>);</span><br><span class="line">times++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">2</span>; j &lt;= <span class="number">5</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">5</span>; ++k) &#123;</span><br><span class="line"><span class="keyword">if</span>(backup[j<span class="number">-1</span>][k] == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">turn_on</span>(j, k);</span><br><span class="line">times++;</span><br><span class="line"><span class="keyword">if</span>(times &gt; <span class="number">6</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(times &gt; <span class="number">6</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; ++i)</span><br><span class="line"><span class="keyword">if</span>(backup[<span class="number">5</span>][i] == <span class="number">0</span>) &#123;</span><br><span class="line">flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(flag &amp;&amp; times &lt;= <span class="number">6</span>) res = <span class="built_in">min</span>(res, times);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(res &gt; <span class="number">6</span>) <span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è“æ¡¥æ¯ </category>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acwing </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‹†åˆ†-Nimæ¸¸æˆ</title>
      <link href="/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%8B%86%E5%88%86-Nim%E6%B8%B8%E6%88%8F/"/>
      <url>/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%8B%86%E5%88%86-Nim%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/896/">åŸé¢˜é“¾æ¥</a></p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä¸€å †å¯ä»¥å˜æˆä¸¤å †ï¼Œå¯¹äºæ¯å †çš„ä¸€ç§å­æƒ…å†µæ¥è¯´éƒ½æœ‰ï¼š<br>$$<br>sg(a,b)\rightarrow sg(a)\ xor\ sg(b)<br>$$<br>åªéœ€è¦éå†a,bçš„æ‰€æœ‰æƒ…å†µå°±å¯ä»¥äº†ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">101</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> f[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sg</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[x] != <span class="number">-1</span>) <span class="keyword">return</span> f[x];</span><br><span class="line">    unordered_set&lt;<span class="type">int</span>&gt; S;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = x - <span class="number">1</span>; k &gt;= <span class="number">0</span>; --k) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = x - <span class="number">1</span>; j &gt;= <span class="number">0</span>; --j) &#123;</span><br><span class="line">            S.<span class="built_in">insert</span>(<span class="built_in">sg</span>(k) ^ <span class="built_in">sg</span>(j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; ; ++i)</span><br><span class="line">        <span class="keyword">if</span>(S.<span class="built_in">count</span>(i) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[x] = i;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">        res ^= <span class="built_in">sg</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(res) <span class="built_in">printf</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> æ•°å­¦çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acwing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°é˜¶-Nimæ¸¸æˆ</title>
      <link href="/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%8F%B0%E9%98%B6-Nim%E6%B8%B8%E6%88%8F/"/>
      <url>/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%8F%B0%E9%98%B6-Nim%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/894/">åŸé¢˜é“¾æ¥</a></p><p>ä¸ºäº†èƒ½å¤Ÿæ‰¾å‡ºè¯¥Nimæ¸¸æˆçš„å¿…èƒœæ–¹æ³•ï¼Œåº”è¯¥ä»æœ€åŸºæœ¬çš„æ ·ä¾‹ä¸­æ‰¾åˆ°è§„å¾‹ï¼š</p><ol><li>å¦‚æœçŸ³å­éƒ½åœ¨ç¬¬ä¸€å±‚ï¼Œé‚£æˆ‘å…¨éƒ¨æ‹¿ä¸‹å»å°±è·èƒœäº†ã€‚</li><li>å¦‚æœçŸ³å­å…¨éƒ¨åœ¨å¶æ•°å±‚ï¼Œå¯¹æ‰‹æ‹¿ä¸‹æ¥å¤šå°‘ä¸ªçŸ³å­ï¼Œæˆ‘å°±æŠŠè¿™çŸ³å­éƒ½ç§»åˆ°ä¸‹é¢ä¸€å±‚ï¼Œè¿™æ ·ä¿è¯æˆ‘æœ€åæŠŠæ‰€æœ‰çŸ³å­éƒ½æ”¾åœ¨äº†æœ€åº•ä¸‹ã€‚è¿™è¯´æ˜äº†å¶æ•°å±‚å¹¶ä¸ä¼šå¯¹èƒœè´Ÿæœ‰å½±å“ã€‚</li><li>ç»ˆç»“æƒ…å†µæ˜¯å…¨0</li><li>ä¼´éšç€æ¯ä¸€æ¬¡ç§»åŠ¨ï¼Œä¼šæœ‰ç›¸é‚»ä¸¤ä¸ªå°é˜¶çš„çŸ³å­æ•°å‘ç”Ÿå˜åŒ–ã€‚ä¸€ä¸ªå˜å¤§ï¼Œä¸€ä¸ªå˜å°ã€‚</li></ol><p>ç§ä»¥ä¸ºNimæ¸¸æˆæœ€éš¾ç†è§£çš„åœ°æ–¹å°±åœ¨äºä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¼‚æˆ–ï¼Œä½†æ˜¯å¼‚æˆ–æ˜¯æœ€ç®€ç»ƒä¹Ÿæ˜¯æœ€ä¸ºå‡†ç¡®åœ°èƒ½å¤Ÿæè¿°æ¯æ¬¡çŠ¶æ€å˜åŒ–åœ°ç»“æœé‡ã€‚<br>æˆ‘ä»¬å¯ä»¥çŒœæµ‹ï¼Œæ˜¯å¥‡æ•°å°é˜¶å¼‚æˆ–ä¸º0æ—¶æ˜¯å¿…èƒœæƒ…å†µã€‚<br>é‚£ä¹ˆæ€ä¹ˆè¿›è¡Œè¯æ˜å‘¢ï¼Ÿå¯ä»¥è¿™ä¹ˆå»ç†è§£ã€‚å½“å¥‡æ•°å°é˜¶ç»“æœå¼‚æˆ–ä¸º0æ—¶ï¼Œä¸‹ä¸€æ¬¡æ“ä½œæ—¶å€™å¼‚æˆ–ç»“æœè‚¯å®šä¸ä¸º0ï¼Œä¸‹ä¸‹æ¬¡çš„ç»“æœè‚¯å®šåˆèƒ½å›åˆ°0ã€‚ç”±äºçŸ³å­çš„æ•°ç›®è‚¯å®šæ˜¯é€æ¸å˜å°‘çš„ï¼Œå› æ­¤è¿™ä¸ªç»“æœè‚¯å®šä¼šå½’åˆ°0ï¼Œå¿…èƒœç»“æœä¸€å®šä¸º0ã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>è®¡ç®—å¥‡æ•°å°é˜¶çŸ³å­çš„å¼‚æˆ–ï¼Œå¼‚æˆ–ä¸º0è¯´æ˜å¿…èƒœã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">        <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>) res ^= a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(res) <span class="built_in">printf</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> acwing </tag>
            
            <tag> Nim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•åŸºç¡€-æ•°å­¦çŸ¥è¯†</title>
      <link href="/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80-%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86/"/>
      <url>/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80-%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°è®º"><a href="#æ•°è®º" class="headerlink" title="æ•°è®º"></a>æ•°è®º</h2><h3 id="è´¨æ•°"><a href="#è´¨æ•°" class="headerlink" title="è´¨æ•°"></a>è´¨æ•°</h3><p>è´¨æ•°åˆ¤å®šæ–¹æ³•ï¼šè¯•é™¤æ³•</p><p>åˆ†è§£è´¨å› æ•°ï¼šè¯•é™¤æ³•</p><p>è¯•é™¤æ³•æœ¬æ¥éœ€è¦å°†<code>i</code>ä»2å¾ªç¯åˆ°<code>x</code>ï¼Œä½†ç”±äºå¤§äº<code>sqrt(x)</code>çš„xçš„è´¨å› å­æœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œå› æ­¤åªéœ€è¦å°†<code>i</code>ä»2å¾ªç¯åˆ°<code>x/i</code>å³å¯ã€‚åŒæ—¶ï¼Œè‹¥<code>x</code>åœ¨ç»è¿‡é™¤æ³•åä»ç„¶å¤§äº2ï¼Œè¯´æ˜å…¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªè´¨å› å­ã€‚è¿™æ ·å¯ä»¥ç”±åŸæ¥çš„$O(n)$å¤æ‚åº¦é™ä¸º$O(\sqrt n)$ã€‚</p><p>æ³¨æ„ï¼šä¼˜åŒ–åç®—æ³•çš„æœ€ä½³æ—¶é—´å¤æ‚åº¦ä¸º$O(\log n)$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= x / i; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(x % i == <span class="number">0</span>) &#123;</span><br><span class="line">                s++;</span><br><span class="line">                x /= i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, i, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(x &gt; <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d 1\n&quot;</span>, x);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç­›è´¨æ•°"><a href="#ç­›è´¨æ•°" class="headerlink" title="ç­›è´¨æ•°"></a>ç­›è´¨æ•°</h3><p>æ—¶é—´å¤æ‚åº¦è®¡ç®—åŸºç¡€ï¼š</p><blockquote><p>$$<br>1+\frac{1}{2}+\frac{1}{3}+â€¦+\frac{1}{n}&#x3D;\ln n+c<br>$$</p></blockquote><h4 id="åŸƒå¼ç­›æ³•"><a href="#åŸƒå¼ç­›æ³•" class="headerlink" title="åŸƒå¼ç­›æ³•"></a>åŸƒå¼ç­›æ³•</h4><p><strong>æ€æƒ³é‡è¦</strong></p><p>å¯¹æ¯ä¸ªæ•°è¿›è¡Œæ ‡è®°ï¼Œå¦‚æœè¯¥æ•°æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆæ ‡è®°ä»–æ•´æ•°å€é™¤å®ƒæœ¬èº«ä¹‹å¤–çš„æ•°ä¸ºå’Œæ•°ã€‚æ—¶é—´å¤æ‚åº¦ä¸º$O(n\log \log n)$ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1000001</span>;</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!st[i]) &#123;</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i &lt;&lt; <span class="number">1</span>; j &lt;= n; j += i) &#123;</span><br><span class="line">                st[j] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="çº¿æ€§ç­›æ³•"><a href="#çº¿æ€§ç­›æ³•" class="headerlink" title="çº¿æ€§ç­›æ³•"></a>çº¿æ€§ç­›æ³•</h4><p><strong>æ¨¡æ¿</strong></p><p>$n$åªä¼šè¢«æœ€å°çš„è´¨å› å­ç­›æ‰â€¦</p><p>æ¯”å¦‚è¯´3æ˜¯è´¨æ•°ï¼Œå°±åº”è¯¥æ’é™¤æ‰6ï¼Œ9ï¼Œ12ï¼Œ15ï¼Œ18â€¦</p><p>çŸ¥é“äº†5æ˜¯è´¨æ•°ï¼Œåº”è¯¥æ’é™¤æ‰10ï¼Œ15ï¼Œ20ï¼Œ25ï¼Œ30â€¦</p><ol><li>è‹¥$i\ %\ \text{primes[j]}&#x3D;&#x3D;0$ï¼Œprimes[j]ä¸€å®šæ˜¯primes[j]*içš„æœ€å°è´¨å› å­</li><li>è‹¥!&#x3D;0ï¼Œprimes[j]ä¸€å®šå°äºiçš„æ‰€æœ‰è´¨å› å­ï¼Œprimes[j]$\cdot$iä¹Ÿä¸€å®šæ˜¯priems[j]$\cdot$içš„æœ€å°è´¨å› å­</li></ol><p>å®ç°ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1000001</span>;</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"><span class="type">int</span> prime[N], cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_primes</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå‰é¢æ²¡æœ‰åˆ¤æ–­å‡ºå®ƒæ˜¯åˆæ•°ï¼Œè¯´æ˜å®ƒè‚¯å®šæ˜¯ä¸ªç´ æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(!st[i]) prime[cnt++] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; prime[j] &lt;= n / i; ++j) &#123;</span><br><span class="line">            st[prime[j] * i] = <span class="literal">true</span>; <span class="comment">// ä½¿ç”¨æœ€å°è´¨å› å­prime[j]å»ç­›é™¤æ›´å¤§çš„æ•°</span></span><br><span class="line">            <span class="comment">// ä¸€ä¸ªåˆæ•°åªéœ€è¦ä½¿ç”¨å…¶æœ€å°è´¨å› å­å»ç­›é™¤å°±å¯ä»¥äº†</span></span><br><span class="line">            <span class="keyword">if</span>(i % prime[j] == <span class="number">0</span>) <span class="keyword">break</span>; <span class="comment">// primes[j]æ˜¯içš„æœ€å°è´¨å› å­</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">get_primes</span>(n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªåˆæ•°ä¼šè¢«ç­›å‡ºï¼Œç”±äºæ˜¯ç”¨æœ€å°è´¨å› å­ç­›å‡ºçš„ï¼Œå› æ­¤åªä¼šè¢«ç­›ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚</p><h3 id="çº¦æ•°"><a href="#çº¦æ•°" class="headerlink" title="çº¦æ•°"></a>çº¦æ•°</h3><h4 id="æ‰€æœ‰çº¦æ•°"><a href="#æ‰€æœ‰çº¦æ•°" class="headerlink" title="æ‰€æœ‰çº¦æ•°"></a>æ‰€æœ‰çº¦æ•°</h4><p>å¯ä»¥ä½¿ç”¨è¯•é™¤æ³•æ±‚å‡ºä¸€ä¸ªæ•°çš„æ‰€æœ‰çº¦æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> _find(<span class="type">int</span> x) &#123;</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="built_in">sqrt</span>(x); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(x % i == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i);</span><br><span class="line">            s.<span class="built_in">push</span>(x / i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">top</span>() != <span class="built_in">sqrt</span>(x)) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, s.<span class="built_in">top</span>());</span><br><span class="line">        s.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        _find(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="çº¦æ•°ä¸ªæ•°"><a href="#çº¦æ•°ä¸ªæ•°" class="headerlink" title="çº¦æ•°ä¸ªæ•°"></a>çº¦æ•°ä¸ªæ•°</h4><p>é—®ï¼šç»™å®š$n$ä¸ªæ­£æ•´æ•°$a_i$ï¼Œæ±‚å‡ºè¿™äº›æ•°çš„ä¹˜ç§¯çš„çº¦æ•°ä¸ªæ•°ã€‚</p><p>è®¾$a_i$å¯ä»¥è¡¨ç¤ºä¸º$p_1^{\beta_{11}}p_2^{\beta_{12}}p_3^{\beta_{13}}â€¦p_n^{\beta_{1n}}$</p><p>é‚£ä¹ˆ$n$ä¸ªæ­£æ•´æ•°çš„ç§¯å¯ä»¥è¡¨ç¤ºä¸º$p_1^{\alpha_1}p_2^{\alpha_2}p_3^{\alpha_3}â€¦p_n^{\alpha_n}$ï¼Œå…¶ä¸­$\alpha_i$ä¸ºä»»æ„éè´Ÿæ•´æ•°ï¼Œå› æ­¤çº¦æ•°ä¸ªæ•°å¯ä»¥è¡¨ç¤ºä¸º<br>$$<br>(\alpha_1+1)(\alpha_2+1)(\alpha_3+1)\cdot â€¦\cdot(\alpha_n+1)<br>$$<br><del>æ€ä¹ˆåƒåœ¨åšæ•°å­¦åˆ†æé¢˜ä¸€æ ·â€¦</del>è¿™æ ·å°±å¯ä»¥æ±‚å‡ºæ¥äº†â€¦<br>å‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; primes;</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= x / i; ++i) &#123;</span><br><span class="line">            <span class="keyword">while</span>(x % i == <span class="number">0</span>) &#123;</span><br><span class="line">                x /= i;</span><br><span class="line">                primes[i]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(x &gt; <span class="number">1</span>) primes[x]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> p : primes) &#123;</span><br><span class="line">        res = res * ((<span class="type">long</span> <span class="type">long</span> <span class="type">int</span>)p.second+<span class="number">1</span>) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“å®ç°æ—¶åˆæ˜¯è€ä¸‰æ ·é—®é¢˜äº†ï¼Œprimesæ€ä¹ˆæƒ³åˆ°å“ˆå¸Œçš„ï¼›å¤§æ•°ä¹˜æ³•ä¸€å®šè¦ç”¨<code>long long int</code>ï¼›<code>for</code>è¯­å¥æ‰§è¡Œåˆ°<code>sqrt(x)</code>å°±å¯ä»¥ç»“äº†ã€‚<br>&#96;</p><h4 id="çº¦æ•°ä¹‹å’Œ"><a href="#çº¦æ•°ä¹‹å’Œ" class="headerlink" title="çº¦æ•°ä¹‹å’Œ"></a>çº¦æ•°ä¹‹å’Œ</h4><p>é—®ï¼šç»™å®š$n$ä¸ªæ­£æ•´æ•°$a_i$ï¼Œæ±‚å‡ºè¿™äº›æ•°çš„ä¹˜ç§¯çš„çº¦æ•°ä¹‹å’Œã€‚</p><p>ä¹˜ç§¯ç»“æœè¡¨ç¤ºåŒä¸Šï¼Œæ¯ä¸ªçº¦æ•°å°±æ˜¯ä»æ¯ä¸ª$p_k$ä¸­æŒ‘é€‰$[0,\alpha_k]$æ¬¡æ–¹çš„æ•°ã€‚è¿™æ ·ç»“æœå°±ä¸ºï¼š<br>$$<br>(1+p_1+p_1^2+â€¦+p_1^{\alpha_n})\cdot(1+p_2+â€¦)\cdotâ€¦<br>$$<br>å‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; hash;</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= x / i; ++i) &#123;</span><br><span class="line">            <span class="keyword">while</span>(x % i == <span class="number">0</span>) &#123;</span><br><span class="line">                x /= i;</span><br><span class="line">                hash[i]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(x &gt; <span class="number">1</span>) hash[x]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> tmp;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> temp = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> h : hash) &#123;</span><br><span class="line">        tmp = <span class="number">0</span>;</span><br><span class="line">        temp = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= h.second; ++i) &#123;</span><br><span class="line">            tmp = (tmp + temp) % mod;</span><br><span class="line">            temp = (temp * h.first) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">        res = (res * tmp) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€å¤§å…¬çº¦æ•°"><a href="#æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æœ€å¤§å…¬çº¦æ•°"></a>æœ€å¤§å…¬çº¦æ•°</h4><h5 id="æ¬§å‡ é‡Œå¾—æ³•"><a href="#æ¬§å‡ é‡Œå¾—æ³•" class="headerlink" title="æ¬§å‡ é‡Œå¾—æ³•"></a>æ¬§å‡ é‡Œå¾—æ³•</h5><blockquote><p>Steps:å¤§æ•°æ”¾aä¸­ï¼Œå°æ•°æ”¾bä¸­ï¼›<br>æ±‚a&#x2F;bçš„ä½™æ•°ï¼›<br>è‹¥temp&#x3D;0åˆ™bä¸ºæœ€å¤§å…¬çº¦æ•°ï¼›<br>å¦‚æœtemp!&#x3D;0åˆ™æŠŠbçš„å€¼ç»™a,tempçš„å€¼ç»™aï¼›<br>è¿”å›ç¬¬äºŒæ­¥ã€‚</p></blockquote><p>è¯æ˜ï¼š<br>    è®¾$a%b &#x3D; a - k<em>b$ å…¶ä¸­$k &#x3D; a&#x2F;b$(å‘ä¸‹å–æ•´)<br>    è‹¥dæ˜¯(a,b)çš„å…¬çº¦æ•° åˆ™çŸ¥ $d|a$ ä¸” $d|b$ åˆ™æ˜“çŸ¥ $d|a-k</em>b$ æ•…$d$ä¹Ÿæ˜¯$(b,a%b)$ çš„å…¬çº¦æ•°<br>    è‹¥dæ˜¯$(b,a%b)$çš„å…¬çº¦æ•° åˆ™çŸ¥ $d|b$ ä¸” $d|a-k<em>b$ åˆ™ $d|a-k</em>b+k*b &#x3D; d|a$ æ•…è€Œ$d|b$ æ•…è€Œ $d$ä¹Ÿæ˜¯(a,b)çš„å…¬çº¦æ•°<br>    å› æ­¤$(a,b)$çš„å…¬çº¦æ•°é›†åˆå’Œ$(b,a%b)$çš„å…¬çº¦æ•°é›†åˆç›¸åŒ æ‰€ä»¥ä»–ä»¬çš„æœ€å¤§å…¬çº¦æ•°ä¹Ÿç›¸åŒ è¯æ¯•<br>å®ç°ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a &lt; b) <span class="built_in">swap</span>(a, b);</span><br><span class="line">    <span class="keyword">while</span>(a % b != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> temp = a % b;</span><br><span class="line">        a = b;</span><br><span class="line">        b = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">gcd</span>(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦æ˜¯$O(n)$ã€‚</p><h2 id="æ¬§æ‹‰å®šç†"><a href="#æ¬§æ‹‰å®šç†" class="headerlink" title="æ¬§æ‹‰å®šç†"></a>æ¬§æ‹‰å®šç†</h2><p>æ¬§æ‹‰å‡½æ•°ï¼š<br>$1$åˆ°$N$ä¸­ä¸$N$äº’è´¨çš„ä¸ªæ•°è¢«ç§°ä¸ºæ¬§æ‹‰å‡½æ•°ï¼Œå³ä¸º$\phi(N)$ã€‚<br>è‹¥$N&#x3D;p_1^{a_1}p_2^{a_2}p_3^{a_3}â€¦$ï¼Œåˆ™ï¼š<br>$$<br>\phi(N)&#x3D;N\cdot\frac{p_1-1}{p_1}\frac{p_2-1}{p_2}\frac{p_3-1}{p_3}\cdot â€¦<br>$$<br>é‚£ä¹ˆè¿™ä¸ªå…¬å¼æ˜¯å¦‚ä½•å¾—å‡ºçš„å‘¢ï¼Ÿ<br>é¦–å…ˆï¼Œå¯¹äº$N$ä¸ªæ•°ï¼Œéœ€è¦å»é™¤$p_i$çš„å€æ•°ï¼Œå› æ­¤å½“å‰ä¸ªæ•°ä¸ºï¼š<br>$$<br>N-N&#x2F;p_1-N&#x2F;p_2-N&#x2F;p_3-â€¦-N&#x2F;p_k<br>$$<br>ç”±äºå¯¹äº$p_ip_j$æ¥è¯´å‡å»äº†ä¸¤æ¬¡ï¼Œå› æ­¤è¿˜éœ€è¦åŠ ä¸Šï¼š<br>$$<br>N&#x2F;(p_1p_2)+N&#x2F;(p_1p_3)+â€¦<br>$$<br>å¯¹äº$p_ip_jp_k$æ¥è¯´ï¼Œåœ¨å•ä½å‡å»äº†3æ¬¡ï¼Œåœ¨ä¸¤ä¸ªæ•°ç»„åˆä¹Ÿå‡å»äº†ä¸‰æ¬¡ï¼Œå› æ­¤è¿˜è¦åœ¨åé¢åŠ ä¸Šä¸€æ¬¡æ‰è¡Œâ€¦<br>å¦‚æ­¤å¾ªç¯ä¸‹å»ï¼ŒçŸ¥é“æ‰€æœ‰ä¹˜ç§¯çš„ç»„åˆéƒ½è¢«è€ƒè™‘è¿›å»å³å¯ï¼Œè¯¥å¼æœ€ç»ˆå¯ä»¥åŒ–æˆä¸Šé¢çš„è¡¨è¾¾å¼ã€‚ï¼ˆä¹Ÿæ˜¯å®¹æ–¥åŸç†çš„åŸºæœ¬æ€è·¯ï¼‰<br>è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(\sqrt n)$ï¼Œç“¶é¢ˆåœ¨æ±‚æ‰€æœ‰çš„è´¨å› æ•°ä¸Šã€‚<br>å¯¹äºæ±‚$[1,n]$åŒºé—´æ‰€æœ‰æ•°çš„æ¬§æ‹‰å‡½æ•°å€¼çš„å’Œï¼Œå¯ä»¥åœ¨çº¿æ€§ç­›é€‰è´¨æ•°çš„ç®—æ³•ä¸Šè¿›ä¸€æ­¥ä¿®æ”¹ï¼Œåœ¨æ¯æ¬¡ç­›é€‰æ—¶åŒæ—¶è®¡ç®—$\phi$å€¼å¯ä»¥è¾¾åˆ°$O(n)$çš„æ—¶é—´å¤æ‚åº¦ã€‚<br>æ€è·¯ï¼š<br>å¯¹äºè´¨æ•°æ¥è¯´ï¼Œå…¶æ¬§æ‹‰å‡½æ•°å€¼ä¸º$n-1$ã€‚<br>åœ¨çº¿æ€§ç­›é€‰ä¸­ï¼Œå¾—åˆ°çš„åˆæ•°éƒ½æ˜¯ä»¥$primes[j] \cdot i$çš„å½¢å¼ç»™å‡ºçš„ã€‚</p><ol><li>å½“$primes[j]$æ˜¯$i$çš„è´¨å› æ•°æ—¶ï¼Œæœ‰<br>$$<br>\phi(primes[j]\cdot i)<br>$$<br>$$&#x3D;<br>primes[j]\cdot i(1-1&#x2F;p_1)(1-1&#x2F;p_2)â€¦(1-1&#x2F;p_n)\cdot(1-1&#x2F;primes[j])<br>$$</li></ol><p>$$<br>&#x3D;primes[j]*\phi(i)<br>$$<br>2. å½“$primes[j]$ä¸æ˜¯$i$çš„è´¨å› æ•°æ—¶ï¼Œæœ‰<br>$$<br>\phi(primes[j]\cdot i)&#x3D;\phi(i)\cdot(primes[j]-1)<br>$$</p><h3 id="æ¬§æ‹‰å®šç†-1"><a href="#æ¬§æ‹‰å®šç†-1" class="headerlink" title="æ¬§æ‹‰å®šç†"></a>æ¬§æ‹‰å®šç†</h3><p>è‹¥$a$ä¸$n$äº’è´¨ï¼Œåˆ™æœ‰$a^{\phi(n)}\equiv 1(mod\ n)$</p><p>è¯æ˜ï¼š<br>è®¾æ‰€æœ‰å’Œ$n$äº’è´¨çš„æ•°ä¸º$a_1, a_2,a_3,â€¦,a_{\phi(n)}$ï¼Œå› æ­¤$aa_a,aa_2,aa_3,â€¦aa_{\phi(n)}$ä¹Ÿæ˜¯å’Œ$n$äº’è´¨çš„ã€‚<br>ç”±äºåœ¨$[1,n]$ä¸­ï¼Œåªæœ‰$\phi(n)$ä¸ªä¸$n$äº’è´¨çš„æ•°ï¼Œå³$a_i$ï¼Œå½“$aa_i$æ¨¡ä¸Š$n$åä¹Ÿä¸$n$äº’è´¨ä¸”ä¹Ÿåœ¨$[1,n]$èŒƒå›´ä¹‹å†…ï¼Œä¸”ä¸ç›¸ç­‰ï¼Œå› æ­¤${a_i}$å’Œ${aa_i}$æ˜¯ä¸¤ä¸ªä¸€ä¸€å¯¹åº”çš„é›†åˆï¼Œä¸”${a_i}$ä¸${aa_i\ mod\ n}$æ˜¯ä¸¤ä¸ªç›¸ç­‰é›†åˆã€‚<br>å› æ­¤æœ‰<br>$$<br>a_1a_2â€¦a_{\phi(n)}\equiv a^{\phi(n)}a_1a_2â€¦a_{\phi(n)}\ mod\ n<br>$$<br>è¯æ¯•ã€‚</p><p>å½“$n$ä¸ºè´¨æ•°æ—¶ï¼Œæœ‰<br>$$<br>a^{n-1}\equiv 1\ mod\ n<br>$$</p><h3 id="å¿«é€Ÿå¹‚"><a href="#å¿«é€Ÿå¹‚" class="headerlink" title="å¿«é€Ÿå¹‚"></a>å¿«é€Ÿå¹‚</h3><p>å¿«é€Ÿæ±‚å‡º$a^k\ mod\ p$ï¼Œæ—¶é—´å¤æ‚åº¦èƒ½è¾¾åˆ°$O(\log k)$ã€‚<br>åŸºæœ¬æ€è·¯ï¼šå°†$k$æ‹†æˆç”¨2çš„æ¬¡æ–¹æ•°ä¹‹å’Œï¼Œç„¶åç®—å‡º$a$çš„æŸæ¬¡æ–¹æ¨¡$p$çš„å€¼ï¼Œå†ç›¸ä¹˜å³å¯ã€‚<br>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, p;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;p);</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> res = <span class="number">1</span>, temp = a;</span><br><span class="line">        <span class="keyword">while</span>(b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>((b &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">                res = (res * temp) % p;</span><br><span class="line">            &#125;</span><br><span class="line">            b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">            temp = (temp * temp) % p;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹˜æ³•é€†å…ƒ"><a href="#ä¹˜æ³•é€†å…ƒ" class="headerlink" title="ä¹˜æ³•é€†å…ƒ"></a>ä¹˜æ³•é€†å…ƒ</h3><p>ä¹˜æ³•é€†å…ƒå®šä¹‰ï¼š</p><blockquote><p>è‹¥æ•´æ•° $b$ï¼Œ$m$äº’è´¨ï¼Œå¹¶ä¸”å¯¹äºä»»æ„çš„æ•´æ•° $a$ï¼Œå¦‚æœæ»¡è¶³ $b|a$ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªæ•´æ•° $x$ï¼Œä½¿å¾— $a&#x2F;bâ‰¡aÃ—x(mod\ m)$ï¼Œåˆ™ç§° $x$ ä¸º $b$ çš„æ¨¡ $m$ ä¹˜æ³•é€†å…ƒï¼Œè®°ä¸º$b^{âˆ’1}(mod\ m)$ã€‚<br>$b$ å­˜åœ¨ä¹˜æ³•é€†å…ƒçš„å……è¦æ¡ä»¶æ˜¯$b$ä¸æ¨¡æ•°$m$äº’è´¨ã€‚å½“æ¨¡æ•°$m$ä¸ºè´¨æ•°æ—¶ï¼Œ$b^{mâˆ’2}$å³ä¸º$b$çš„ä¹˜æ³•é€†å…ƒã€‚</p></blockquote><p>è¯æ˜ï¼š<br><img src="https://s2.loli.net/2022/03/30/O8wFnEM729z1SuH.jpg" alt="IMG_2047.PNG"></p><p>å®ç°ä»£ç ï¼ˆè¯¥é¢˜é™åˆ¶äº†$p$ä¸€å®šæ˜¯è´¨æ•°æ‰€ä»¥å¯ä»¥è¿™ä¹ˆå†™ï¼‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, p;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;p);</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> res = <span class="number">1</span>, temp = a;</span><br><span class="line">        b = p<span class="number">-2</span>;</span><br><span class="line">        <span class="keyword">while</span>(b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>((b &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">                res = (res * temp) % p;</span><br><span class="line">            &#125;</span><br><span class="line">            b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">            temp = (temp * temp) % p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a % p)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;impossible\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•</h3><blockquote><p><strong>è£´èœ€å®šç†</strong><br>æœ‰ä¸€å¯¹æ­£æ•´æ•°$a$ï¼Œ$b$ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨æ•´æ•°$x$å’Œ$y$ï¼Œä½¿å¾—<br>$$<br>ax+by&#x3D;gcd(a,b)<br>$$</p></blockquote><p>å±äºæ˜¯å¼€å§‹å¤ä¹ ç¦»æ•£æ•°å­¦å†…å®¹äº†ï¼ˆæ¨å…¬å¼å¯å¤ªéš¾å—äº†ï¼‰â€¦<br>åœ¨å…·ä½“å®ç°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒå¾—å‡º$x$ã€$y$çš„å…·ä½“æ­¥éª¤ï¼šé¦–å…ˆéœ€è¦é€šè¿‡æ¬§å‡ é‡Œå¾—ç®—æ³•æ­£å‘æ±‚åˆ°$b&#x3D; 0$ï¼Œç„¶åä½¿ç”¨å†åå‘æ¨å¯¼æ±‚å‡ºæ¯ä¸€æ­¥éª¤çš„$x$å’Œ$y$ï¼Œå› æ­¤åœ¨å®ç°è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨é€’å½’æ¥æ±‚$gcd$ï¼Œç„¶ååœ¨æ±‚å‡ºå½“å‰çš„$gcd$ååœ¨æ¯ä¸ªå‡½æ•°è¿”å›ä¹‹å‰æ±‚å‡º$x$å’Œ$y$ã€‚<br>è®¾è¿™ä¸€æ¬¡æœ‰ï¼š<br>$$<br>ax+by&#x3D;gcd(a,b)<br>$$<br>ä¸Šä¸€æ¬¡è®¡ç®—æ—¶æœ‰ï¼š<br>$$<br>bxâ€™+(a-a&#x2F;b\cdot b)yâ€™&#x3D;gcd(a,b)<br>&#x3D;ayâ€™+b(xâ€™-a&#x2F;b\cdot yâ€™)<br>$$</p><blockquote><p>Float Point Exception: é™¤æ•°ä¸º0æ—¶ä¼šæŠ¥è¯¥é”™ã€‚</p></blockquote><p>ç›´æ¥ç»™å‡ºä»£ç å®ç°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">extgcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> &amp;x, <span class="type">int</span>&amp; y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>) &#123;</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="built_in">extgcd</span>(b, a % b, x, y);</span><br><span class="line">    <span class="type">int</span> temp = x;</span><br><span class="line">    x = y;</span><br><span class="line">    y = temp  - a / b  * y;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="type">bool</span> _s = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(a &lt; b) &#123;<span class="built_in">swap</span>(a, b); _s = <span class="literal">true</span>;&#125;</span><br><span class="line">        <span class="built_in">extgcd</span>(a, b, x, y);</span><br><span class="line">        <span class="keyword">if</span>(_s)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, y, x);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç®€å•åº”ç”¨â€”â€”çº¿æ€§åŒä½™æ–¹ç¨‹"><a href="#ç®€å•åº”ç”¨â€”â€”çº¿æ€§åŒä½™æ–¹ç¨‹" class="headerlink" title="ç®€å•åº”ç”¨â€”â€”çº¿æ€§åŒä½™æ–¹ç¨‹"></a>ç®€å•åº”ç”¨â€”â€”çº¿æ€§åŒä½™æ–¹ç¨‹</h4><p>ç»™å®š$n$ç»„æ•°æ®$a_i$,$b_i$,$m_i$ï¼Œå¯¹äºæ¯ç»„æ•°æ±‚å‡ºä¸€ä¸ª$x_i$ï¼Œä½¿å…¶æ»¡è¶³$a_iÃ—x_iâ‰¡b_i(mod\ m_i)$ï¼Œå¦‚æœæ— è§£åˆ™è¾“å‡º <code>impossible</code>ã€‚<br>$$<br>\begin{align}<br>&amp; a\cdot x\equiv b\ (mod\ m) \<br>&amp; \Leftrightarrow ax\equiv m\cdot k+b \<br>&amp; \Leftrightarrow ax-mk\equiv b \<br>&amp; \Leftrightarrow ax+kâ€™m\equiv b<br>\end{align}<br>$$<br>æ­£å¥½å¯ä»¥ä½¿ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—æ–¹æ³•æ¥æ±‚è§£$x$ï¼ŒåŒæ—¶å¦‚æœ$b$ä¸æ˜¯$gcd(a,m)$çš„æ•´æ•°å€æ—¶ï¼Œå°±æ— è§£ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="function">LL <span class="title">extgcd</span><span class="params">(LL a, LL b, LL &amp;x, LL&amp; y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>) &#123;</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    LL res = <span class="built_in">extgcd</span>(b, a % b, x, y);</span><br><span class="line">    LL temp = x;</span><br><span class="line">    x = y;</span><br><span class="line">    y = temp  - a / b  * y;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    LL x, y;</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        LL a, b, m;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>, &amp;a, &amp;b, &amp;m);</span><br><span class="line">        <span class="type">bool</span> _s = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(a &lt; m) &#123;<span class="built_in">swap</span>(a, m); _s = <span class="literal">true</span>;&#125;</span><br><span class="line">        LL res = <span class="built_in">extgcd</span>(a, m, x, y);</span><br><span class="line">        <span class="keyword">if</span>(b % res != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;impossible\n&quot;</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(_s)</span><br><span class="line">            <span class="built_in">swap</span>(x, y);</span><br><span class="line">        <span class="keyword">if</span>(_s) &#123;</span><br><span class="line">            x = (x * (b / res)) % a;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            x = (x * (b / res)) % m;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­å›½å‰©ä½™å®šç†"><a href="#ä¸­å›½å‰©ä½™å®šç†" class="headerlink" title="ä¸­å›½å‰©ä½™å®šç†"></a>ä¸­å›½å‰©ä½™å®šç†</h3><p>æœ‰ä¸¤ä¸¤äº’è´¨çš„æ•°$m_1,m_2,m_3,â€¦,m_k$ï¼Œåˆ™å¯¹äºæ¯ä¸ªæ•°æœ‰<br>$$<br>x\equiv a_i\ (mod\ m_i)<br>$$<br>å…¶ä¸­ï¼Œ$M&#x3D;m_1m_2â€¦m_k$ï¼Œ$M_i&#x3D;\frac{M}{m_i}$ï¼Œç”¨$M_i^{-1}$è¡¨ç¤º$M_i$æ¨¡$m_i$çš„é€†ï¼Œå› æ­¤<br>$$<br>x&#x3D;a_1M_1M_1^{-1}+a_2M_2M_2^{-1}+â€¦+a_kM_kM_k^{-1}<br>$$<br>è¯æ˜è¯·å‚è€ƒç¦»æ•£æ•°å­¦è¯¾æœ¬â€¦</p><h2 id="é«˜æ–¯æ¶ˆå…ƒ"><a href="#é«˜æ–¯æ¶ˆå…ƒ" class="headerlink" title="é«˜æ–¯æ¶ˆå…ƒ"></a>é«˜æ–¯æ¶ˆå…ƒ</h2><p>å¯ä»¥åœ¨$O(n^3)$çš„æ—¶é—´å¤æ‚åº¦å†…è®¡ç®—$n$ä¸ªå˜é‡çš„å¤šå…ƒä¸€ç»´çº¿æ€§æ–¹ç¨‹ç»„ã€‚<br>è§£ä¼šæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ol><li>æœ‰å”¯ä¸€è§£â€”â€”å¯ä»¥åŒ–æˆå®Œç¾é˜¶æ¢¯å‹</li><li>æ— ç©·å¤šç»„è§£â€”â€”ä¸æ˜¯å®Œç¾é˜¶æ¢¯å‹ï¼Œå­˜åœ¨0&#x3D;0çš„æ–¹ç¨‹</li><li>æ— è§£â€”â€”å·¦è¾¹æ²¡æœ‰æœªçŸ¥æ•°ï¼Œå³è¾¹éé›¶</li></ol><p>å¯¹äºä¸€ä¸ªç³»æ•°çŸ©é˜µæ¥è¯´ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œä¸‰ç§åŸºæœ¬æ“ä½œï¼š</p><ol><li>æŠŠæŸä¸€è¡Œä¹˜ä¸Šä¸€ä¸ªéé›¶æ•°</li><li>äº¤æ¢æŸä¸¤è¡Œ</li><li>æŠŠæŸè¡Œè‹¥å¹²å€åŠ åˆ°å¦ä¸€è¡Œä¸Š</li></ol><p>ç„¶åæŠŠç³»æ•°çŸ©é˜µè½¬åŒ–æˆä¸Šä¸‰è§’å½¢å³å¯ã€‚<br>å®ç°ä»£ç å¦‚ä¸‹ï¼š<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>double</code>ç±»å‹çš„-0å’Œ0æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œä½†äº‹å®ä¸Šåº”è¯¥ä¸èƒ½è¾“å‡º<code>-0.0</code>ã€‚å› æ­¤ï¼Œéœ€è¦ä½¿ç”¨ç‰¹åˆ¤æ¥å»æ‰æ‰€æœ‰çš„è´Ÿ0<code>double</code>å€¼ã€‚<br>doubleç±»å‹ä¸èƒ½ç”¨<code>abs</code>ï¼Œ<code>abs</code>ä¸“ç”¨äº<code>int</code>å‹ï¼Œå¯¹äºæµ®ç‚¹æ•°åº”è¯¥ä½¿ç”¨<code>fabs</code>ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">102</span>;</span><br><span class="line"><span class="type">double</span> m[N][N];</span><br><span class="line"><span class="type">double</span> res[N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-8</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">gauss</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">double</span> temp_max = <span class="number">0.0</span>;</span><br><span class="line">        <span class="type">int</span> temp_index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = i; k &lt;= n; ++k) &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">fabs</span>(m[k][i]) &gt; temp_max) &#123;</span><br><span class="line">                temp_max = <span class="built_in">fabs</span>(m[k][i]), temp_index = k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(m[temp_index][i]) &lt; eps &amp;&amp; <span class="built_in">fabs</span>(m[temp_index][n+<span class="number">1</span>]) &lt; eps) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">fabs</span>(m[temp_index][i]) &lt; eps &amp;&amp; <span class="built_in">fabs</span>(m[temp_index][n+<span class="number">1</span>] &gt; eps))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// start to swap line i and line temp_index</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= n + <span class="number">1</span>; ++k) <span class="built_in">swap</span>(m[temp_index][k], m[i][k]);</span><br><span class="line">        <span class="type">double</span> f = m[i][i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = i; k &lt;= n + <span class="number">1</span>; ++k) m[i][k] /= f;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = i + <span class="number">1</span>; k &lt;= n; ++k) &#123;</span><br><span class="line">            <span class="type">double</span> f = m[k][i] / m[i][i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i; j &lt;= n + <span class="number">1</span>; ++j) &#123;</span><br><span class="line">                m[k][j] -= f * m[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(m[i][i]) &lt; eps &amp;&amp; <span class="built_in">fabs</span>(m[i][n+<span class="number">1</span>]) &lt; eps) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Infinite group solutions&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(m[i][i]) &lt; eps &amp;&amp; m[i][n+<span class="number">1</span>] != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;No solution&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        res[i] = m[i][n+<span class="number">1</span>] / m[i][i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i - <span class="number">1</span>; j &gt;= <span class="number">1</span>; --j) &#123;</span><br><span class="line">            <span class="type">double</span> f = m[j][i] / m[i][i];</span><br><span class="line">            m[j][i] = <span class="number">0.0</span>;</span><br><span class="line">            m[j][n+<span class="number">1</span>] -= m[i][n+<span class="number">1</span>] * f;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n + <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;m[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">gauss</span>();</span><br><span class="line">    <span class="keyword">if</span>(ret == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Infinite group solutions&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(ret == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No solution&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">fabs</span>(res[i]) &lt; eps) res[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.2lf\n&quot;</span>, res[i]);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»„åˆè®¡æ•°"><a href="#ç»„åˆè®¡æ•°" class="headerlink" title="ç»„åˆè®¡æ•°"></a>ç»„åˆè®¡æ•°</h2><p>$$<br>C_a^b&#x3D;\frac{a!}{b!(a-b)!}<br>$$</p><p>$$<br>C_a^b&#x3D;C_{a-1}^b+C_{a-1}^{b-1}<br>$$<br>ç†è§£ï¼šé¦–å…ˆåœ¨$a$ä¸ªç‰©ä½“ä¸­æŒ‘é€‰ä¸€ä¸ªç‰©ä½“ï¼Œé‚£ä¹ˆæŒ‘é€‰bä¸ªç‰©ä½“çš„ç»“æœå°±åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ol><li>åŒ…å«è¿™ä¸ªç‰©ä½“ï¼Œé‚£ä¹ˆä¸ªæ•°æ˜¯$C_{a-1}^{b-1}$</li><li>ä¸åŒ…å«è¿™ä¸ªç‰©ä½“ï¼Œé‚£ä¹ˆä¸ªæ•°æ˜¯$C_{a-1}^b$</li></ol><p>ä¸å¤„ç†æ€è·¯ï¼š<br>é¢„å¤„ç†å‡º$C_a^b$çš„å€¼ã€æˆ–é¢„å¤„ç†å‡ºé˜¶ä¹˜çš„å€¼<br>å¦‚æœè¦é¢„å¤„ç†é˜¶ä¹˜çš„å€¼ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>ä¸¤ä¸ªæ•°é™¤æ•°çš„æ¨¡ä¸ç­‰äºä¸¤æ•°åˆ†åˆ«æ¨¡å®Œä¹‹åå†é™¤</strong>ã€‚å› æ­¤è¿˜éœ€è¦æ±‚å‡ºé€†å…ƒï¼Œé‚£ä¹ˆé™¤æ•°æ¨¡å°±å˜æˆäº†ä¸€ä¸ªæ•°ä¹˜é™¤æ•°çš„é€†å…ƒã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2001</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">LL C[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) C[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; ++i) C[i][<span class="number">1</span>] = i;</span><br><span class="line">    <span class="comment">// for(int i = 1; i &lt;= n; ++i) C[0][i] = 1;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">2</span>; j &lt; N; ++j) &#123;</span><br><span class="line">            C[i][j] = (C[i<span class="number">-1</span>][j<span class="number">-1</span>]+C[i<span class="number">-1</span>][j]) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, C[a][b]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¢å¡æ–¯å®šç†"><a href="#å¢å¡æ–¯å®šç†" class="headerlink" title="å¢å¡æ–¯å®šç†"></a>å¢å¡æ–¯å®šç†</h4><p>$$<br>C_a^b&#x3D;C_{a\ mod\ p}^{b\ mod\ p}\cdot C_{a&#x2F;p}^{b&#x2F;p}\ (mod\ p)<br>$$<br>è¯¥ç®—æ³•é€‚ç”¨äºæ±‚$a$ï¼Œ$b$éƒ½æ˜¯éå¸¸å¤§æ•°çš„ç»„åˆæ•°ï¼Œå¹¶ä¸”æ±‚çš„ç»„åˆæ•°æ•°é‡æ˜¯éå¸¸å°çš„æƒ…å½¢ã€‚<br>åœ¨å®é™…è¿ç®—æ—¶ï¼Œå¯ä»¥å…ˆé¢„å¤„ç†æ±‚å‡º$a$è‡³$b$çš„æ‰€æœ‰ç»„åˆæ•°ï¼Œç„¶åè¿›è¡Œé€’å½’æ±‚è§£ã€‚<br>å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100001</span>;</span><br><span class="line"><span class="function">LL <span class="title">qmi</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">    LL res = <span class="number">1</span>, temp = a;</span><br><span class="line">    <span class="keyword">while</span>(b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(b &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            res = (LL) res * temp % p;</span><br><span class="line">        &#125;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        temp = temp * temp % p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">C</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a &lt; b) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    LL res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, j = a; i &lt;= b; ++i, --j) &#123;</span><br><span class="line">        res = (LL) res * j % p;</span><br><span class="line">        res = (LL) res * <span class="built_in">qmi</span>(i, p<span class="number">-2</span>, p) % p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">lucas</span><span class="params">(LL a, LL b, LL p)</span> </span>&#123;</span><br><span class="line">    LL aa = a / p, bb = b / p;</span><br><span class="line">    <span class="keyword">if</span>(a &lt; p &amp;&amp; b &lt; p) <span class="keyword">return</span> <span class="built_in">C</span>(a, b, p);</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">C</span>(a%p, b%p, p) * <span class="built_in">lucas</span>(aa, bb, p)) % p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        LL a, b, p;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>, &amp;a, &amp;b, &amp;p);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, <span class="built_in">lucas</span>(a, b, p));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç»„åˆæ•°éœ€è¦é«˜ç²¾åº¦ï¼Œå³ä¸æ±‚ä½™æ•°ï¼Œè€Œæ˜¯æ±‚å®Œæ•´çš„ç»“æœæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ±‚æ¯ä¸ªæ•°ï¼ˆ$a!$,$(a-b)!$å’Œ$b!$ï¼‰è¡¨ç¤ºæˆæ¯ä¸ªè´¨æ•°çš„æ¬¡æ–¹ï¼Œè¿™æ ·å†ä½¿ç”¨å¤§æ•°ä¹˜æ³•å»æ±‚è§£å³å¯ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5001</span>;</span><br><span class="line"><span class="type">int</span> primes[N], cnt;</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"><span class="type">int</span> sum[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_primes</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!st[i]) primes[cnt++] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; primes[j] &lt;= n / i; ++j) &#123;</span><br><span class="line">            st[i * primes[j]] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(primes[j] % i == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cal_sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> times = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">2</span>; k &lt;= a; ++k) &#123;</span><br><span class="line">        <span class="type">int</span> m = k;</span><br><span class="line">        <span class="keyword">while</span>(m &gt; <span class="number">1</span> &amp;&amp; m % p == <span class="number">0</span>) &#123;</span><br><span class="line">            times++;</span><br><span class="line">            m /= p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> times;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">mul</span><span class="params">(vector&lt;<span class="type">int</span>&gt; a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; res;</span><br><span class="line">    <span class="type">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; a.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        res.<span class="built_in">push_back</span>((temp + a[i] * b) % <span class="number">10</span>);</span><br><span class="line">        temp = (temp + a[i] * b) / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(temp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        res.<span class="built_in">push_back</span>(temp % <span class="number">10</span>);</span><br><span class="line">        temp /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">    <span class="built_in">get_primes</span>(a);</span><br><span class="line">    <span class="keyword">if</span>(b &gt; a) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; res&#123;<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; cnt; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> times = <span class="built_in">cal_sum</span>(a, primes[i]) - <span class="built_in">cal_sum</span>(b, primes[i]) - <span class="built_in">cal_sum</span>(a-b, primes[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; times; ++j) &#123;</span><br><span class="line">            res = <span class="built_in">mul</span>(res, primes[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = res.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Catalanæ•°"><a href="#Catalanæ•°" class="headerlink" title="Catalanæ•°"></a>Catalanæ•°</h4><p>$$<br>C_{2n}^n-C_{2n}^{n-1}&#x3D;\frac{C_{2n}^n}{n+1}<br>$$<br>è¯¥å…¬å¼é€‚ç”¨äºéå¸¸å¤šçš„é—®é¢˜â€¦ä½†æ˜¯ä½•æ—¶ä½¿ç”¨Catalanæ•°ä»ç„¶æ˜¯ä¸ªè°œâ€¦<br>è®°å¾—åªè¦æ˜¯åˆ†æ¯çš„éƒ½æ˜¯éœ€è¦ä½¿ç”¨å°è´¹é©¬å®šç†çš„â€¦<br><a href="https://www.acwing.com/problem/content/891/">é¢˜ç›®é“¾æ¥</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">qmi</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> k, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">    LL res = <span class="number">1</span>, temp = a;</span><br><span class="line">    <span class="keyword">while</span>(k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(k &amp; <span class="number">1</span>) res = (LL)res * temp % p;</span><br><span class="line">        k &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        temp = (LL)temp * temp % p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">catalan</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    LL res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, j = n &lt;&lt; <span class="number">1</span>; i &lt;= n; ++i, --j) &#123;</span><br><span class="line">        res = (LL) res * j % mod;</span><br><span class="line">        res = (LL) res * <span class="built_in">qmi</span>(i, mod - <span class="number">2</span>, mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>) res * <span class="built_in">qmi</span>(n + <span class="number">1</span>, mod - <span class="number">2</span>, mod) % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, <span class="built_in">catalan</span>(n));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®¹æ–¥åŸç†"><a href="#å®¹æ–¥åŸç†" class="headerlink" title="å®¹æ–¥åŸç†"></a>å®¹æ–¥åŸç†</h2><p>$$<br>1-2+3-4+5-â€¦(-1)^{n-1}\cdot n<br>$$</p><p>$$<br>\begin{aligned}<br>&amp; \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ |S_1\cup S_2\cup S_3| \<br>&amp; &#x3D;|S_1|+|S_2|+|S_3|-|S1\cap S_2|-|S_2\cap S_3|-|S_1\cap S_3|+|S_1\cap S_2\cap S_3|<br>\end{aligned}<br>$$<br>ç”±äº<br>$$<br>C_n^0+C_n^1+C_n^2+C_n^3+â€¦+C_n^n&#x3D;2^n<br>$$<br>å› æ­¤æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯$O(n^2)$ã€‚<br>$$<br>C_n^1-C_n^2+C_n^3-â€¦+(-1)^{n-1}C_n^n&#x3D;1<br>$$<br><a href="https://www.acwing.com/problem/content/892/">åŸé¢˜é“¾æ¥</a><br>ç»™å®šä¸€ä¸ªæ•´æ•°$n$å’Œ$m$ä¸ªä¸åŒçš„è´¨æ•°$p_1,p_2,â€¦,p_m$ã€‚<br>è¯·ä½ æ±‚å‡º$1âˆ¼n$ä¸­èƒ½è¢«$p_1,p_2,â€¦,p_m$ä¸­çš„è‡³å°‘ä¸€ä¸ªæ•°æ•´é™¤çš„æ•´æ•°æœ‰å¤šå°‘ä¸ªã€‚<br>å¯ä»¥çœ‹ä¸‹$n$çš„å–å€¼èŒƒå›´ï¼Œæš´åŠ›è‚¯å®šæ˜¯æ— æ³•åšåˆ°çš„ï¼Œæ‰€ä»¥ä¸€å®šè¦ä½¿ç”¨å®¹æ–¥åŸç†ã€‚<br>æ€ä¹ˆå®ç°å¤šä¸ªé›†åˆçš„å¹¶é›†å‘¢ï¼Ÿä¸€èˆ¬ä½¿ç”¨ä½è¿ç®—æ¥å®ç°ï¼ˆå› ä¸ºé€’å½’ä¼šæ¶ˆè€—å¤ªå¤šæ ˆèµ„æºï¼‰ã€‚<br>æ³¨æ„å¯èƒ½ä¼šçˆ†<code>int</code>ã€‚ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">17</span>;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    LL n;</span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">1</span> &lt;&lt; m; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">1</span>, cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; ++k) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;&gt; k &amp; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>((LL)t * p[k] &gt; n) &#123;</span><br><span class="line">                    t = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                t = (LL) t * p[k];</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(t != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cnt &amp; <span class="number">1</span>) &#123;</span><br><span class="line">                res += n / t;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                res -= n / t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç®€å•åšå¼ˆè®º"><a href="#ç®€å•åšå¼ˆè®º" class="headerlink" title="ç®€å•åšå¼ˆè®º"></a>ç®€å•åšå¼ˆè®º</h2><p>å…¬å¹³ç»„åˆæ¸¸æˆICGï¼š</p><ol><li>ä¸¤åç©å®¶äº¤æ›¿è¡ŒåŠ¨</li><li>æ¯åç©å®¶çš„è¡ŒåŠ¨éƒ½ç›¸åŒï¼ˆäº”å­æ£‹å°±ä¸æ˜¯å…¬å¹³ç»„åˆæ¸¸æˆï¼‰</li><li>ä¸èƒ½è¡ŒåŠ¨çš„ç©å®¶åˆ¤ä¸ºè´Ÿ</li></ol><h3 id="Nimæ¸¸æˆ"><a href="#Nimæ¸¸æˆ" class="headerlink" title="Nimæ¸¸æˆ"></a>Nimæ¸¸æˆ</h3><p>ç»™å®š$n$å †çŸ³å­ï¼Œä¸¤ä½ç©å®¶è½®æµæ“ä½œï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥ä»ä»»æ„ä¸€å †çŸ³å­ä¸­æ‹¿èµ°ä»»æ„æ•°é‡çš„çŸ³å­ï¼ˆå¯ä»¥æ‹¿å®Œï¼Œä½†ä¸èƒ½ä¸æ‹¿ï¼‰ï¼Œæœ€åæ— æ³•è¿›è¡Œæ“ä½œçš„äººè§†ä¸ºå¤±è´¥ã€‚<br>é—®å¦‚æœä¸¤äººéƒ½é‡‡ç”¨æœ€ä¼˜ç­–ç•¥ï¼Œå…ˆæ‰‹æ˜¯å¦å¿…èƒœã€‚<br>è‹¥ï¼š<br>$$<br>a_1\ xor\ a_2\ xor\ a_3â€¦\ xor\ a_n&#x3D;0<br>$$<br>è¯´æ˜å…ˆæ‰‹å¿…è´¥ï¼Œå¦åˆ™å…ˆæ‰‹å¿…èƒœã€‚<br>ä¸‹é¢éœ€è¦è¯æ˜çš„æ˜¯ï¼š</p><ol><li>å¦‚æœå¼‚æˆ–å€¼ä¸ä¸º0ï¼Œé‚£ä¹ˆåº”è¯¥èƒ½åœ¨ä¸€æ­¥ä¹‹å†…æ“ä½œï¼Œå°†å¼‚æˆ–å€¼è½¬ä¸º0ã€‚</li><li>å¦‚æœå¼‚æˆ–å€¼ä¸º0ï¼Œæ— è®ºæ€ä¹ˆæ‹¿çŸ³å­ï¼Œæ“ä½œåçš„å¼‚æˆ–ç»“æœè‚¯å®šä¸ä¸º0ã€‚<br>å¯¹äº1æ¥è¯´ï¼Œå‡è®¾æ‰€æœ‰æ•°çš„å¼‚æˆ–ç»“æœä¸º$x$ï¼Œè®¾å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„æœ€é«˜ä½åœ¨ç¬¬$k$ä½ã€‚è¯´æ˜åœ¨$n$ä¸ªæ•°ä¸­å¿…ç„¶è‡³å°‘å­˜åœ¨ä¸€ä¸ªæ•°$a_i$ï¼Œå…¶ç¬¬$k$ä½äºŒè¿›åˆ¶æ•°ä¸º1ã€‚å› æ­¤æœ‰<br>$$<br>a_i\ xor\ x\ &lt;\ x<br>$$<br>å› æ­¤å¯ä»¥åœ¨$a_i$å †ä¸­æ‹¿èµ°$a_i-a_i\ xor\ x$é¢—çŸ³å­ï¼Œå› æ­¤è¯¥å †çŸ³å­å˜æˆäº†$a_i\ xor\ x$é¢—çŸ³å­ã€‚<br>å› æ­¤è¿™æ ·æ“ä½œæ‹¿èµ°åå¼‚æˆ–å€¼å°±ä¸º0ã€‚<br>2ç”¨åè¯æ³•æ˜“è¯ã€‚<br>å¹¶ä¸”ç”±äºæ¯æ¬¡æ“ä½œéƒ½å¿…é¡»è¦æ‹¿çŸ³å­ï¼Œæ€»æ•°ä¸€ç›´åœ¨å‡å°‘ï¼Œæ‰€ä»¥æ¸¸æˆè‚¯å®šå¯ä»¥ç»“æŸï¼Œå› æ­¤å¯ä»¥çŸ¥é“0çŠ¶æ€å°±æ˜¯å¿…èƒœçŠ¶æ€ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>, n, a;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">        res ^= a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(res == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SGå‡½æ•°"><a href="#SGå‡½æ•°" class="headerlink" title="SGå‡½æ•°"></a>SGå‡½æ•°</h4><p>mex: mexç”¨æ¥è¡¨ç¤ºä¸€ä¸ªé›†åˆä¸­æ²¡æœ‰å‡ºç°è¿‡çš„æœ€å°è‡ªç„¶æ•°<br>ä¸€ä¸ªçŠ¶æ€å¯èƒ½å¯ä»¥è½¬ç§»åˆ°å¾ˆå¤šç§çŠ¶æ€ï¼Œ<br>è®¾<br>$$<br>SG(ç»ˆç‚¹)&#x3D;0<br>$$<br>æ¯ä¸€ä¸ªçŠ¶æ€$x$çš„SGå‡½æ•°å¯ä»¥è¡¨ç¤ºæˆå¦‚ä¸‹ï¼ˆè®¾$x$èƒ½å¤Ÿå‡ºç°$y_1,y_2,â€¦,y_k$å±€é¢ï¼‰ï¼š<br>$$<br>SG(x)&#x3D;mex{SG(y_1),SG(y_2),â€¦,SG(y_k)}<br>$$<br>å¦‚æœ$SG(x)&#x3D;0$ï¼Œè¯´æ˜çŠ¶æ€$x$æ˜¯å¿…è´¥çŠ¶æ€ã€‚å¦‚æœéé›¶ï¼Œè¯´æ˜æ˜¯å¿…èƒœçŠ¶æ€ã€‚<br>ä»»ä½•ä¸€ç§éé›¶çŠ¶æ€éƒ½å¯ä»¥èµ°åˆ°0ï¼Œä½†æ˜¯ä»»æ„ä¸€ç§0çŠ¶æ€æ˜¯æ— æ³•å†èµ°åˆ°0çš„ã€‚<br>å‡è®¾æœ‰$n$å¼ çŠ¶æ€å›¾ï¼Œèµ·ç‚¹åˆ†åˆ«ä¸º$x_1,x_2,x_3,â€¦,x_n$ï¼Œè‹¥æœ‰<br>$$<br>SG(x_1)\ xor\ SG(x_2)\ xor\ SG(x_3)\ xor\ &#x3D;\ 0<br>$$<br>åˆ™å¤„äºå¿…è´¥çŠ¶æ€ã€‚<br><a href="https://www.acwing.com/problem/content/895/">åŸé¢˜é“¾æ¥</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">101</span>, M = <span class="number">10010</span>;</span><br><span class="line"><span class="type">int</span> n, k;</span><br><span class="line"><span class="type">int</span> s[N], h[N], f[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sg</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[x] != <span class="number">-1</span>) <span class="keyword">return</span> f[x];</span><br><span class="line">    unordered_set&lt;<span class="type">int</span>&gt; S;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= s[i]) S.<span class="built_in">insert</span>(<span class="built_in">sg</span>(x-s[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; ; ++i)</span><br><span class="line">        <span class="keyword">if</span>(S.<span class="built_in">count</span>(i) == <span class="number">0</span>) </span><br><span class="line">            <span class="keyword">return</span> f[x] = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;s[i]);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;h[i]);</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0xff</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        res ^= <span class="built_in">sg</span>(h[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(res == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨å¾®æ€è€ƒä¸€ä¸‹å¯ä»¥çŸ¥é“ï¼ŒSGå‡½æ•°é€‚ç”¨çš„åœºæ™¯å®é™…ä¸Šæ˜¯Nimæ¸¸æˆçš„æ™®éè§£æ³•ï¼Œå› ä¸ºä¹‹å‰Nimæ¸¸æˆæ˜¯èƒ½ä»ä»»æ„å †æ‹¿éšä¾¿å¤šä¸ªï¼Œå®é™…ä¸Šä¸Šä¸€é¢˜æ˜¯å›ºå®šå¤šä¸ªï¼Œå¦‚æœå°†å›ºå®šå¤šä¸ªå˜ä¸ºéšæœºå¤šä¸ªï¼Œä¹Ÿå°±æ˜¯$S$é›†åˆä¸ºæ— ç©·ï¼Œå°±å¯ä»¥è½¬åŒ–æˆä¸€ä¸ªç®€å•çš„Nimæ¸¸æˆã€‚å…³äºæ¯ä¸ªå †ä¸­SGçš„å€¼ä¹Ÿå¯ä»¥é€šè¿‡ç”»å›¾å‘ç°ï¼Œ$SG(x)&#x3D;x$ï¼Œä¹Ÿä¸Nimè§£æ³•ç›¸å¯¹åº”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¨¡æ¿ </category>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> æ•°å­¦çŸ¥è¯† </category>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•ç¬”è®° </tag>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é«˜æ–¯æ¶ˆå…ƒè§£å¼‚æˆ–çº¿æ€§æ–¹ç¨‹ç»„</title>
      <link href="/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83%E8%A7%A3%E5%BC%82%E6%88%96%E7%BA%BF%E6%80%A7%E6%96%B9%E7%A8%8B%E7%BB%84/"/>
      <url>/2022/04/06/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83%E8%A7%A3%E5%BC%82%E6%88%96%E7%BA%BF%E6%80%A7%E6%96%B9%E7%A8%8B%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/886/">åŸé¢˜é“¾æ¥</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">102</span>;</span><br><span class="line"><span class="type">int</span> M[N][N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> res[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">gauss</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> c = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">bool</span> change = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(M[j][i] == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= n + <span class="number">1</span>; ++k) <span class="built_in">swap</span>(M[j][k], M[i][k]);</span><br><span class="line">                c++;</span><br><span class="line">                change = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(change) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i + <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span>(M[j][i] == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> k = i; k &lt;= n + <span class="number">1</span>; ++k) &#123;</span><br><span class="line">                        M[j][k] ^= M[i][k];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(c &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span>(M[c+<span class="number">1</span>][c+<span class="number">1</span>] == <span class="number">0</span> &amp;&amp; M[c+<span class="number">1</span>][n+<span class="number">1</span>] == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for(int i = 1; i &lt;= n; ++i) &#123;</span></span><br><span class="line">    <span class="comment">//     for(int j = 1; j &lt;= n + 1; j++) &#123;</span></span><br><span class="line">    <span class="comment">//         printf(&quot;%d &quot;, M[i][j]);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     printf(&quot;\n&quot;);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        res[i] = M[i][n+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i - <span class="number">1</span>; j &gt;= <span class="number">1</span>; --j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(M[j][i] == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = i; k &lt;= n + <span class="number">1</span>; ++k) &#123;</span><br><span class="line">                M[j][k] ^= M[i][k];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n + <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;M[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">gauss</span>();</span><br><span class="line">    <span class="keyword">if</span>(ret == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(ret == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Multiple sets of solutions&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No solution&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæœ‰å…³å¤šè§£æ— è§£çš„åˆ¤æ–­æœ‰é—®é¢˜ï¼Œåº”è¯¥éå†æ‰€æœ‰æ²¡æœ‰é€‰æ‹©çš„æ•°å€¼ï¼ŒæŸ¥æ‰¾æ˜¯å¦æœ‰ä¸ä¸º0çš„æƒ…å†µã€‚å¦‚æœä¸ä¸º0ï¼Œè¯´æ˜æ— è§£ã€‚å¦‚æœå…¨ä¸º0ï¼Œè¯´æ˜æœ‰æ— æ•°å¤šè§£ï¼Œä»¥ååšè¯·ä¸€å®šæ³¨æ„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> æ•°å­¦çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦çŸ¥è¯† </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è€æ‚æŠ€çš„ç‰›</title>
      <link href="/2022/03/28/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%80%8D%E6%9D%82%E6%8A%80%E7%9A%84%E7%89%9B/"/>
      <url>/2022/03/28/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%80%8D%E6%9D%82%E6%8A%80%E7%9A%84%E7%89%9B/</url>
      
        <content type="html"><![CDATA[<p>å†œæ°‘çº¦ç¿°çš„Nå¤´å¥¶ç‰›ï¼ˆç¼–å·ä¸º$1..N$ï¼‰è®¡åˆ’é€ƒè·‘å¹¶åŠ å…¥é©¬æˆå›¢ï¼Œä¸ºæ­¤å®ƒä»¬å†³å®šç»ƒä¹ è¡¨æ¼”æ‚æŠ€ã€‚</p><p>å¥¶ç‰›ä»¬ä¸æ˜¯éå¸¸æœ‰åˆ›æ„ï¼Œåªæå‡ºäº†ä¸€ä¸ªæ‚æŠ€è¡¨æ¼”ï¼š</p><p>å ç½—æ±‰ï¼Œè¡¨æ¼”æ—¶ï¼Œå¥¶ç‰›ä»¬ç«™åœ¨å½¼æ­¤çš„èº«ä¸Šï¼Œå½¢æˆä¸€ä¸ªé«˜é«˜çš„å‚ç›´å †å ã€‚</p><p>å¥¶ç‰›ä»¬æ­£åœ¨è¯•å›¾æ‰¾åˆ°è‡ªå·±åœ¨è¿™ä¸ªå †å ä¸­åº”è¯¥æ‰€å¤„çš„ä½ç½®é¡ºåºã€‚</p><p>è¿™$N$å¤´å¥¶ç‰›ä¸­çš„æ¯ä¸€å¤´éƒ½æœ‰ç€è‡ªå·±çš„é‡é‡Wiä»¥åŠè‡ªå·±çš„å¼ºå£®ç¨‹åº¦$S_i$ã€‚</p><p>ä¸€å¤´ç‰›åªæ’‘ä¸ä½çš„å¯èƒ½æ€§å–å†³äºå®ƒå¤´ä¸Šæ‰€æœ‰ç‰›çš„æ€»é‡é‡ï¼ˆä¸åŒ…æ‹¬å®ƒè‡ªå·±ï¼‰å‡å»å®ƒçš„èº«ä½“å¼ºå£®ç¨‹åº¦çš„å€¼ï¼Œç°åœ¨ç§°è¯¥æ•°å€¼ä¸ºé£é™©å€¼ï¼Œé£é™©å€¼è¶Šå¤§ï¼Œè¿™åªç‰›æ’‘ä¸ä½çš„å¯èƒ½æ€§è¶Šé«˜ã€‚</p><p>æ‚¨çš„ä»»åŠ¡æ˜¯ç¡®å®šå¥¶ç‰›çš„æ’åºï¼Œä½¿å¾—æ‰€æœ‰å¥¶ç‰›çš„é£é™©å€¼ä¸­çš„<strong>æœ€å¤§å€¼å°½å¯èƒ½çš„å°</strong>ã€‚</p><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h3><p>ç¬¬ä¸€è¡Œè¾“å…¥æ•´æ•°$N$ï¼Œè¡¨ç¤ºå¥¶ç‰›æ•°é‡ã€‚</p><p>æ¥ä¸‹æ¥$N$è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç‰›çš„é‡é‡å’Œå¼ºå£®ç¨‹åº¦ï¼Œç¬¬$i$è¡Œè¡¨ç¤ºç¬¬$i$å¤´ç‰›çš„é‡é‡Wiä»¥åŠå®ƒçš„å¼ºå£®ç¨‹åº¦$S_i$ã€‚</p><h3 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h3><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§é£é™©å€¼çš„æœ€å°å¯èƒ½å€¼ã€‚</p><h3 id="æ•°æ®èŒƒå›´"><a href="#æ•°æ®èŒƒå›´" class="headerlink" title="æ•°æ®èŒƒå›´"></a>æ•°æ®èŒƒå›´</h3><p>$1â‰¤Nâ‰¤50000$,<br>$1â‰¤Wiâ‰¤10,000$,<br>$1â‰¤Siâ‰¤1,000,000,000$</p><p>è¾“å…¥æ ·ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">10 3</span><br><span class="line">2 5</span><br><span class="line">3 3</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ ·ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><p>é‡ç‚¹æ˜¯æ¨å…¬å¼ï¼Œä¸‹é¢ç»™å‡ºåˆ†ææ–¹æ³•ï¼š</p><p>å¯¹äºç¬¬$i$å¤´ç‰›ï¼Œå®ƒçš„é£é™©ç¨‹åº¦ä¸º$\sum_0^{i-1}w_i-s_i$ï¼Œç¬¬$i+1$å¤´ç‰›çš„é£é™©ç¨‹åº¦ä¸º$\sum_0^{i}w_i-s_{i+1}$ã€‚</p><p>å¦‚æœæŠŠè¿™ä¸¤å¤´ç›¸é‚»çš„ç‰›äº¤æ¢ï¼Œåˆ™é£é™©ç¨‹åº¦åˆ†åˆ«ä¸º$\sum_0^{i-1}w_i-s_{i+1}$å’Œ$\sum_0^{i-1}w_i+w_{i+1}-s_i$ã€‚</p><p>åœ¨äº¤æ¢å‰ï¼Œ$i+1$å¤´ç‰›çš„é£é™©ç¨‹åº¦è¾ƒå¤§ã€‚äº¤æ¢åï¼Œ$i$å¤´ç‰›çš„é£é™©ç¨‹åº¦è¾ƒå¤§ã€‚</p><p>å½“$\sum_0^iw_i-s_{i+1}&lt;\sum_0^{i-1}w_i+w_{i+1}-s_{i}$æ—¶ï¼Œæœ‰$w_i+s_i&lt;w_{i+1}+s_{i+1}$ã€‚</p><p>å¯ä»¥çŸ¥é“ï¼Œå¯ä»¥æ˜¯ç”¨$w+s$è¿›è¡Œä»å°åˆ°å¤§æ’åºã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">cow</span> &#123;</span><br><span class="line">    <span class="type">int</span> w, s;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt; (<span class="type">const</span> cow&amp; C) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> w + s &lt; C.w + C.s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    vector&lt;cow&gt; v;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> w, s;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;w, &amp;s);</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">cow</span> c&#123;w, s&#125;;</span><br><span class="line">        v.<span class="built_in">push_back</span>(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">    <span class="type">int</span> res = <span class="number">-2e9</span>;</span><br><span class="line">    <span class="type">int</span> w_sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> t : v) &#123;</span><br><span class="line">        res = <span class="built_in">max</span>(res, w_sum - t.s);</span><br><span class="line">        w_sum += t.w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> è´ªå¿ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆå¹¶æœå­</title>
      <link href="/2022/03/27/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%90%88%E5%B9%B6%E6%9E%9C%E5%AD%90/"/>
      <url>/2022/03/27/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%90%88%E5%B9%B6%E6%9E%9C%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/150/">åŸé¢˜é“¾æ¥</a></p><p>é‡è¦çš„æ˜¯æ€è·¯ï¼Œå®ç°èµ·æ¥éå¸¸ç®€å•â€¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, res;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    priority_queue&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;, greater&lt;<span class="type">int</span>&gt;&gt; p;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">        p.<span class="built_in">push</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(p.<span class="built_in">size</span>() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> a = p.<span class="built_in">top</span>();</span><br><span class="line">        p.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="type">int</span> b = p.<span class="built_in">top</span>();</span><br><span class="line">        p.<span class="built_in">pop</span>();</span><br><span class="line">        res += (a + b);</span><br><span class="line">        p.<span class="built_in">push</span>(a+b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> è´ªå¿ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒºé—´è¦†ç›–</title>
      <link href="/2022/03/27/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%8C%BA%E9%97%B4%E8%A6%86%E7%9B%96/"/>
      <url>/2022/03/27/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%8C%BA%E9%97%B4%E8%A6%86%E7%9B%96/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/909/">åŸé¢˜é“¾æ¥</a></p><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ol><li>å°†æ‰€æœ‰åŒºé—´æŒ‰å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åº</li><li>ä»å‰å¾€åä¾æ¬¡æšä¸¾æ¯ä¸ªåŒºé—´ï¼Œåœ¨æ‰€æœ‰èƒ½è¦†ç›–<code>start</code>çš„åŒºé—´ä¸­ï¼Œé€‰æ‹©å³ç«¯ç‚¹æœ€å¤§çš„åŒºé—´ï¼Œç„¶åå°†<code>start</code>æ›´æ–°ä¸ºå³ç«¯ç‚¹çš„æœ€å¤§å€¼ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100001</span>;</span><br><span class="line"><span class="type">int</span> n, s, t, res;</span><br><span class="line">vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; v;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MIN_INF -2e9</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;s, &amp;t, &amp;n);</span><br><span class="line">    <span class="type">int</span> r = MIN_INF, l = MIN_INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        v.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(a, b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> success = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> j = i, tmp_r = MIN_INF;</span><br><span class="line">        <span class="keyword">while</span>(j &lt; n &amp;&amp; v[j].first &lt;= s) &#123;</span><br><span class="line">            tmp_r = <span class="built_in">max</span>(tmp_r, v[j].second);</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(tmp_r &lt; s) &#123;</span><br><span class="line">            res = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        res++;</span><br><span class="line">        <span class="keyword">if</span>(tmp_r &gt;= t) &#123;</span><br><span class="line">            success = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        s = tmp_r;</span><br><span class="line">        i = j - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!success) <span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œ<code>MIN_INF</code>æ”¹æˆ-1000000001å°±ä¼šæœ‰é—®é¢˜:cry:ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> è´ªå¿ƒ </category>
          
          <category> need to rethink </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒºé—´é€‰ç‚¹</title>
      <link href="/2022/03/26/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%8C%BA%E9%97%B4%E9%80%89%E7%82%B9/"/>
      <url>/2022/03/26/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E5%8C%BA%E9%97%B4%E9%80%89%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/907/">åŸé¢˜é“¾æ¥</a></p><h2 id="æ€è·¯æè¿°"><a href="#æ€è·¯æè¿°" class="headerlink" title="æ€è·¯æè¿°"></a>æ€è·¯æè¿°</h2><p>å°†æ‰€æœ‰åŒºé—´æ ¹æ®åŒºé—´çš„å³ç«¯ç‚¹è¿›è¡Œæ’åºï¼Œé¦–å…ˆï¼Œè®°å½•æœ€å¼€å§‹å³ç«¯ç‚¹çš„åŒºé—´å€¼ï¼Œéå†åé¢çš„åŒºé—´ã€‚å¦‚æœåé¢åŒºé—´çš„å·¦ç«¯ç‚¹å¤§äºç­‰äºè¯¥å€¼ï¼Œé‚£ä¹ˆè¯´æ˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‚¹æ¥è¡¨ç¤ºã€‚å¦‚æœæ— æ³•è¡¨ç¤ºï¼Œé‚£ä¹ˆå°±è¯´æ˜éœ€è¦å¢åŠ ä¸€ä¸ªç‚¹æ¥ä½¿å…¶å†åŒºé—´çš„å†…éƒ¨ã€‚</p><h2 id="ç®—æ³•è¯æ˜"><a href="#ç®—æ³•è¯æ˜" class="headerlink" title="ç®—æ³•è¯æ˜"></a>ç®—æ³•è¯æ˜</h2><p>è®¾è¯¥ç®—æ³•å¾—åˆ°çš„ç‚¹æ•°ä¸º<code>res</code>ï¼Œæ­£ç¡®ç­”æ¡ˆä¸º<code>ans</code>ï¼Œä¸‹é¢è¯æ˜$res &#x3D;&#x3D; ans$ã€‚</p><ol><li><p>è¯æ˜$res \geq ans$</p><p>ç”±äºè¯¥ç®—æ³•è‚¯å®šæ˜¯æ­£ç¡®çš„ï¼Œè€Œ<code>ans</code>åˆæ˜¯æœ€å°å€¼ï¼Œå› æ­¤è¯¥ä¸ç­‰å¼è‚¯å®šæˆç«‹ã€‚</p></li><li><p>è¯æ˜$res\leq ans$</p></li></ol><p>â€‹åœ¨ä¸Šè¿°ç®—æ³•ä¸­ï¼Œæ¯æ¬¡æ–°è®°å½•ä¸€ä¸ªå³ç«¯ç‚¹å€¼çš„æ‰€æœ‰åŒºé—´ï¼Œå®é™…ä¸Šå°±æ˜¯æ²¡æœ‰ä»»æ„äº¤é›†çš„åŒºé—´ï¼Œå®ƒä»¬çš„ä¸ªæ•°æ­£å¥½æ˜¯<code>res</code>ã€‚æ ¹æ®é¢˜ç›®è¦æ±‚çš„æè¿°ï¼Œå¦‚æœæœ‰<code>res</code>ä¸ªæ²¡æœ‰äº¤é›†çš„åŒºé—´ï¼Œé‚£ä¹ˆè‡³å°‘å°±æœ‰<code>res</code>ä¸ªç‚¹ï¼Œå› æ­¤æœ‰$res\leq ans$</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; v;</span><br><span class="line"><span class="type">int</span> n, res, r;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">        <span class="type">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        v.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(b, a));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">    r = <span class="number">-1000000001</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> ele : v) &#123;</span><br><span class="line">        <span class="type">int</span> b = ele.first, a = ele.second;</span><br><span class="line">        <span class="keyword">if</span>(a &gt; r) &#123;</span><br><span class="line">            res++;</span><br><span class="line">            r = b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ»‘é›ª</title>
      <link href="/2022/03/26/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%BB%91%E9%9B%AA/"/>
      <url>/2022/03/26/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%BB%91%E9%9B%AA/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/903/">åŸé¢˜é“¾æ¥</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> R = <span class="number">301</span>, C = <span class="number">301</span>;</span><br><span class="line"><span class="type">int</span> r, c, res;</span><br><span class="line"><span class="type">int</span> m[R][C], step[R][C];</span><br><span class="line"><span class="type">int</span> dx[<span class="number">4</span>] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> dy[<span class="number">4</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(step[x][y] != <span class="number">-1</span>) <span class="keyword">return</span> step[x][y];</span><br><span class="line">    step[x][y] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> xx = x + dx[i], yy = y + dy[i];</span><br><span class="line">        <span class="keyword">if</span>(xx &gt;= <span class="number">1</span> &amp;&amp; xx &lt;= r &amp;&amp; yy &gt;= <span class="number">1</span> &amp;&amp; yy &lt;= c &amp;&amp; m[x][y] &gt; m[xx][yy]) &#123;</span><br><span class="line">            step[x][y] = <span class="built_in">max</span>(step[x][y], <span class="built_in">search</span>(xx, yy)+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> step[x][y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;r, &amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= r; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= c; ++j) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(step, <span class="number">-1</span>, <span class="keyword">sizeof</span> step);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= r; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= c; ++j)</span><br><span class="line">            res = <span class="built_in">max</span>(res, <span class="built_in">search</span>(i, j));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ²¡æœ‰ä¸Šå¸çš„èˆä¼š</title>
      <link href="/2022/03/25/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%B2%A1%E6%9C%89%E4%B8%8A%E5%8F%B8%E7%9A%84%E8%88%9E%E4%BC%9A/"/>
      <url>/2022/03/25/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%B2%A1%E6%9C%89%E4%B8%8A%E5%8F%B8%E7%9A%84%E8%88%9E%E4%BC%9A/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/287/">åŸé¢˜é“¾æ¥</a></p><p>å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œåªæœ‰ä¸¤ç§æƒ…å†µï¼Œå°±æ˜¯å‡ºå¸­æ­¤æ¬¡å®´ä¼šå’Œä¸å‡ºå¸­æ­¤æ¬¡å®´ä¼šï¼Œå› æ­¤å‚¨å­˜èŠ‚ç‚¹çŠ¶æ€å¯ä»¥ä½¿ç”¨<code>u[N][2]</code>æ¥å®ç°ã€‚è¿™æ ·ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œä¸¤ç§æƒ…å†µåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ol><li>è‹¥è¯¥èŠ‚ç‚¹é€‰æ‹©ä¸å‚åŠ å®´ä¼šï¼Œé‚£ä¹ˆä»–çš„æ‰€æœ‰å­èŠ‚ç‚¹å¯ä»¥å‚åŠ ä¹Ÿå¯ä»¥ä¸å‚åŠ ï¼Œå› æ­¤æœ‰$u[root][0]&#x3D;\sum \max{u[s_i][0],u[s_i][1]}$</li><li>è‹¥è¯¥èŠ‚ç‚¹å‚åŠ å®´ä¼šï¼Œé‚£ä¹ˆä»–æ‰€æœ‰çš„å­èŠ‚ç‚¹å¿…é¡»ä¸å‚åŠ ï¼Œå› æ­¤æœ‰$u[root][1]&#x3D;\sum u[s_i][0]+happy[root]$</li></ol><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">6001</span>;</span><br><span class="line"><span class="type">int</span> happy[N], u[N][<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> h[N], idx, ne[N], e[N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">bool</span> has_father[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> l)</span> </span>&#123;</span><br><span class="line">    e[idx] = l, ne[idx] = h[k], h[k] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> root)</span> </span>&#123;</span><br><span class="line">    u[root][<span class="number">1</span>] = happy[root];</span><br><span class="line">    <span class="keyword">if</span>(h[root] == <span class="number">-1</span>) &#123;</span><br><span class="line">        u[root][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = h[root]; k != <span class="number">-1</span>; k = ne[k]) &#123;</span><br><span class="line">        <span class="built_in">dfs</span>(e[k]);</span><br><span class="line">        u[root][<span class="number">0</span>] += <span class="built_in">max</span>(u[e[k]][<span class="number">0</span>], u[e[k]][<span class="number">1</span>]);</span><br><span class="line">        u[root][<span class="number">1</span>] += u[e[k]][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;happy[i]);</span><br><span class="line">    <span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> k, l;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;l, &amp;k);</span><br><span class="line">        <span class="built_in">add</span>(k, l); <span class="comment">// kæ˜¯lçš„ä¸Šå¸</span></span><br><span class="line">        has_father[l] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(; i &lt;= n; ++i) <span class="keyword">if</span>(has_father[i]== <span class="literal">false</span>) <span class="keyword">break</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, <span class="built_in">max</span>(u[i][<span class="number">0</span>], u[i][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> æ ‘å½¢dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€çŸ­Hamiltonè·¯å¾„</title>
      <link href="/2022/03/25/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%9C%80%E7%9F%ADHamilton%E8%B7%AF%E5%BE%84/"/>
      <url>/2022/03/25/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%9C%80%E7%9F%ADHamilton%E8%B7%AF%E5%BE%84/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/93/">é¢˜ç›®é“¾æ¥</a></p><p>çŠ¶æ€è¡¨ç¤ºï¼š<code>f[i][j]</code>iä¸ºå‚¨å­˜çš„çŠ¶æ€ï¼Œjä¸ºå½“å‰ä»0&#x3D;&gt;jæœ€åç»è¿‡çš„ä¸€ä¸ªç‚¹çš„å€¼ï¼Œ<code>f[i][j]</code>çš„å€¼ä¸ºç»è¿‡çš„è·¯å¾„æ€»é•¿åº¦ã€‚</p><p>é‚£ä¹ˆå¯¹äº$k\in [1â€¦n]$ï¼Œæœ‰<br>$$<br>f[i,j]&#x3D;\min{f[i-1&lt;&lt;k, j-{k}]+distance(k\rightarrow j)}<br>$$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">20</span>, M = <span class="number">1</span> &lt;&lt; N;</span><br><span class="line"><span class="type">int</span> f[M][N];</span><br><span class="line"><span class="type">int</span> m[N][N];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="type">int</span> _m = <span class="number">1</span> &lt;&lt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m[i][j]);</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>, f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; _m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>((i &gt;&gt; j) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; n; ++k) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(((i&gt;&gt;k)&amp;<span class="number">1</span>) &amp;&amp; k != j)</span><br><span class="line">                        f[i][j] = <span class="built_in">min</span>(f[i][j], f[i-(<span class="number">1</span>&lt;&lt;j)][k] + m[k][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[_m<span class="number">-1</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> çŠ¶å‹dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•´æ•°åˆ’åˆ†</title>
      <link href="/2022/03/23/%E6%95%B4%E6%95%B0%E5%88%92%E5%88%86/"/>
      <url>/2022/03/23/%E6%95%B4%E6%95%B0%E5%88%92%E5%88%86/</url>
      
        <content type="html"><![CDATA[<p>åŒºé—´dpç»å…¸é¢˜</p><p><a href="https://www.acwing.com/problem/content/902/">é¢˜ç›®æè¿°</a></p><p>ACä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="comment">// f[i,j]è¡¨ç¤ºä¸ºæ•°å­—jï¼Œç”¨å°äºç­‰äºiçš„æ•°å­—çš„åˆ’åˆ†æ–¹æ³•æ•°</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆæœ‰é€’æ¨è¡¨è¾¾å¼ï¼š   f[i,j] = f[i-1,j] + f[i-1,j-i] + f[i-1,j-2i]+f[i-1,j-3i]+...</span></span><br><span class="line"><span class="comment">//                   f[i,j-i] = f[i-1,j-i]+f[i-1,j-2i]+f[i-1,j-3i]+f[i-1,j-4i]+...</span></span><br><span class="line"><span class="comment">//                   f[i,j] = f[i-1,j] + f[i,j-i]</span></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> <span class="type">int</span> f[<span class="number">1001</span>][<span class="number">1001</span>];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i ++) &#123;</span><br><span class="line">        f[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            f[i][j] = f[i<span class="number">-1</span>][j] % N;</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= i) f[i][j] = (f[i][j] + f[i][j-i]) % N;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[n][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸å½“äºæ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œé‡è¦çš„è¿˜æ˜¯éœ€è¦è€å¿ƒæ¨å¯¼è¡¨è¾¾å¼ã€‚</p><p>è¿˜æœ‰å¦ä¸€ç§æ€è·¯ï¼š<code>f[i][j]</code>è¡¨ç¤ºçš„æ˜¯æ€»å’Œæ˜¯iï¼Œæ°å¥½è¡¨ç¤ºæˆjä¸ªæ•°çš„æ–¹æ¡ˆã€‚</p><p>é‚£ä¹ˆå¯ä»¥æŠŠ<code>f[i][j]</code>çš„é›†åˆ<strong>åˆ’åˆ†</strong>æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯å…¶ä¸­ä»»æ„ä¸€ä¸ªæ•°ä¸º1çš„ï¼Œä¸€ä¸ªæ˜¯å…¶ä¸­ä»»æ„ä¸€ä¸€ä¸ªæ•°éƒ½ä¸¥æ ¼å¤§äº1çš„ã€‚</p><p>é‚£ä¹ˆä»»æ„ä¸€ä¸ªæ•°éƒ½å¤§äº1çš„é›†åˆæ­£å¥½ä¸<code>f[i-1][j-1]</code>æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p><p>ä»»æ„ä¸€ä¸ªæ•°éƒ½ä¸¥æ ¼å¤§äº1çš„é›†åˆä¸<code>f[i-j][j]</code>ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p><p>å› æ­¤æœ‰çŠ¶æ€è½¬ç§»å¼ä¸ºï¼š<code>f[i][j]=f[i-1][j-1]+f[i-j][j]</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> åŒºé—´dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–è¾‘è·ç¦»</title>
      <link href="/2022/03/23/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/"/>
      <url>/2022/03/23/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/901/">åŸé¢˜é“¾æ¥</a></p><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®š$n$ä¸ªé•¿åº¦ä¸è¶…è¿‡10çš„å­—ç¬¦ä¸²ä»¥åŠ$m$æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¼šç»™å®šä¸€ä¸ªæ“ä½œæ¬¡æ•°ä¸Šé™ã€‚æ±‚æ¯æ¬¡è¯¢é—®å°äºç­‰äºæ“ä½œæ¬¡æ•°ä¸Šé™ï¼Œèƒ½å¤Ÿè®©ç»™å®šçš„å­—ç¬¦ä¸²å˜ä¸ºè¯¢é—®å­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚</p><p>ä¸€æ¬¡æ“ä½œæ„å‘³ç€ä¿®æ”¹ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œä»¥åŠåŠ å…¥ä¸€ä¸ªå­—ç¬¦ã€‚</p><p>ç›´æ¥æš´åŠ›æ±‚è§£å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(mnL^2)$ã€‚</p><p>é¢˜è§£ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, m, limit;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="type">char</span> s[N][<span class="number">13</span>];</span><br><span class="line"><span class="type">char</span> tmp[<span class="number">13</span>];</span><br><span class="line"><span class="type">int</span> f[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, &amp;s[i][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">while</span>(m--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%d&quot;</span>, tmp+<span class="number">1</span>, &amp;limit);</span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">           <span class="comment">// memset(f, 0, sizeof f);</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="built_in">strlen</span>(&amp;s[i][<span class="number">1</span>]); ++j) </span><br><span class="line">                f[<span class="number">0</span>][j] = j;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="built_in">strlen</span>(tmp+<span class="number">1</span>); ++j)</span><br><span class="line">                f[j][<span class="number">0</span>] = j;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= <span class="built_in">strlen</span>(tmp+<span class="number">1</span>); ++k) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="built_in">strlen</span>(&amp;s[i][<span class="number">1</span>]); ++j) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(s[i][j] == tmp[k]) f[k][j] = f[k<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        f[k][j] = <span class="built_in">min</span>(f[k<span class="number">-1</span>][j<span class="number">-1</span>], <span class="built_in">min</span>(f[k<span class="number">-1</span>][j], f[k][j<span class="number">-1</span>]))+<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(f[<span class="built_in">strlen</span>(tmp+<span class="number">1</span>)][<span class="built_in">strlen</span>(&amp;s[i][<span class="number">1</span>])] &lt;= limit) cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, cnt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåœ¨è¿™é‡Œmemsetæ˜¯ä¸å¿…è¦çš„ï¼ŒåŠ äº†ç”šè‡³ä¼šTLEâ€¦</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€çŸ­ç¼–è¾‘è·ç¦»</title>
      <link href="/2022/03/23/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%9C%80%E7%9F%AD%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/"/>
      <url>/2022/03/23/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%9C%80%E7%9F%AD%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²Aå’ŒBï¼Œç°åœ¨è¦å°†Aç»è¿‡è‹¥å¹²æ“ä½œå˜ä¸ºBï¼Œå¯è¿›è¡Œçš„æ“ä½œæœ‰ï¼š</p><ol><li>åˆ é™¤â€“å°†å­—ç¬¦ä¸²Aä¸­çš„æŸä¸ªå­—ç¬¦åˆ é™¤ã€‚</li><li>æ’å…¥â€“åœ¨å­—ç¬¦ä¸²Açš„æŸä¸ªä½ç½®æ’å…¥æŸä¸ªå­—ç¬¦ã€‚</li><li>æ›¿æ¢â€“å°†å­—ç¬¦ä¸²Aä¸­çš„æŸä¸ªå­—ç¬¦æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ã€‚</li></ol><p>ç°åœ¨è¯·ä½ æ±‚å‡ºï¼Œå°†Aå˜ä¸ºBè‡³å°‘éœ€è¦è¿›è¡Œå¤šå°‘æ¬¡æ“ä½œã€‚</p><p>è€ƒè™‘è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³æ­¤é—®é¢˜ï¼šå½“å­—ç¬¦ä¸²Aä¸­çš„ç¬¬$i$ä¸ªå­—ç¬¦å’Œå­—ç¬¦ä¸²Bçš„ç¬¬$j$ä¸ªå­—ç¬¦å¯¹åº”æ—¶ï¼Œæ‰§è¡Œçš„æ“ä½œæ˜¯å¤šå°‘å‘¢ï¼Ÿè¿™æ ·å°±éœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„å»ä¿å­˜ä¹‹å‰çš„æ‰€æœ‰çŠ¶æ€ã€‚å¹¶ä¸”çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¹Ÿå¾ˆå¥½æƒ³åˆ°ï¼š</p><p>å½“<code>A[i]=B[j]</code>æ—¶ï¼Œ<code>f[i][j]=f[i-1][j-1]</code>ã€‚</p><p>å½“<code>A[i]!=B[j]</code>æ—¶ï¼Œç»¼åˆè€ƒè™‘ä¸‰ç§æ“ä½œï¼š<code>f[i][j]=min(f[i-1][j],f[i-1][j-1],f[i][j-1])+1</code></p><p>åˆ†åˆ«å¯¹åº”åˆ é™¤ã€æ›¿æ¢å’Œæ’å…¥æ“ä½œã€‚</p><p>å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> s1[<span class="number">1001</span>], s2[<span class="number">1001</span>];</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> f[<span class="number">1001</span>][<span class="number">1001</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%s&quot;</span>, &amp;n, s1+<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%s&quot;</span>, &amp;m, s2+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) f[i][<span class="number">0</span>] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= m; ++i) f[<span class="number">0</span>][i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            <span class="comment">// ç›¸ç­‰æƒ…å†µï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•æ“ä½œ</span></span><br><span class="line">            <span class="keyword">if</span>(s1[i] == s2[j]) f[i][j] = f[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                f[i][j] = <span class="built_in">min</span>(f[i<span class="number">-1</span>][j], <span class="built_in">min</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>],f[i][j<span class="number">-1</span>]))+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, f[n][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‚»åŸŸå‡å€¼</title>
      <link href="/2022/03/17/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E9%82%BB%E5%9F%9F%E5%9D%87%E5%80%BC/"/>
      <url>/2022/03/17/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E9%82%BB%E5%9F%9F%E5%9D%87%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<p><a href="http://118.190.20.162/view.page?gpid=T127">é¢˜ç›®é“¾æ¥</a></p><p>ç”±äºæ±‚çš„æ˜¯æŸä¸ªåŒºé—´ï¼Œè€Œä¸”æ˜¯çŸ©å½¢åŒºé—´çš„å’Œï¼Œæ‰€ä»¥æƒ³åˆ°ç”¨äºŒç»´å‰ç¼€æ•°ç»„æ±‚è§£ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, L, r, t;</span><br><span class="line"><span class="type">int</span> m[<span class="number">601</span>][<span class="number">601</span>];</span><br><span class="line"><span class="type">int</span> a[<span class="number">601</span>][<span class="number">601</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>, &amp;n, &amp;L, &amp;r, &amp;t);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;m[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            a[i][j] = a[i<span class="number">-1</span>][j] + a[i][j<span class="number">-1</span>] - a[i<span class="number">-1</span>][j<span class="number">-1</span>] + m[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> x = <span class="built_in">min</span>(n, i+r), y = <span class="built_in">min</span>(n, j + r);</span><br><span class="line">            <span class="type">int</span> xx = <span class="built_in">max</span>(<span class="number">1</span>, i - r), yy = <span class="built_in">max</span>(<span class="number">1</span>, j - r);</span><br><span class="line">            <span class="keyword">if</span>(a[x][y] - a[xx<span class="number">-1</span>][y] - a[x][yy<span class="number">-1</span>] + a[xx<span class="number">-1</span>][yy<span class="number">-1</span>] &lt;= (x-xx+<span class="number">1</span>)*(y-yy+<span class="number">1</span>) * t) res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ƒè¯•æ—¶å€™è¿˜ä¸çŸ¥é“å‰ç¼€æ•°ç»„ï¼Œç¡¬ç®—åªèƒ½å¾—70åˆ†â€¦</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSP </tag>
            
            <tag> å‰ç¼€æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è„‰å†²ç¥ç»ç½‘ç»œ</title>
      <link href="/2022/03/17/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%84%89%E5%86%B2%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
      <url>/2022/03/17/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E8%84%89%E5%86%B2%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="è„‰å†²ç¥ç»ç½‘ç»œ"><a href="#è„‰å†²ç¥ç»ç½‘ç»œ" class="headerlink" title="è„‰å†²ç¥ç»ç½‘ç»œ"></a>è„‰å†²ç¥ç»ç½‘ç»œ</h1><p><a href="http://118.190.20.162/view.page?gpid=T131">é¢˜ç›®é“¾æ¥</a></p><p>æ¨¡æ‹Ÿé¢˜æœ€éš¾çš„å°±æ˜¯è¯»æ‡‚é¢˜ï¼Œç†æ¸…æ€è·¯ï¼Œä½†åŸºæœ¬ä¸Šä¸éœ€è¦ä»€ä¹ˆç®—æ³•å°±å¯ä»¥æ‹¿åˆ°å¾ˆå¤§ä¸€éƒ¨åˆ†åˆ†æ•°ï¼ˆ40-100ä¸ç­‰ï¼‰ã€‚</p><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>è„‰å†²ç¥ç»ç½‘ç»œæ¨¡å‹ç”±ç¥ç»å…ƒã€è„‰å†²æºã€çªè§¦ä¸‰ç§éƒ¨åˆ†ç»„æˆï¼Œçªè§¦è¿æ¥è„‰å†²æºå’Œç¥ç»å…ƒï¼ŒåŒæ—¶è¿æ¥ç¥ç»å…ƒå’Œç¥ç»å…ƒï¼Œå®ƒç”¨äºä¼ æ’­è„‰å†²ï¼Œä½†ä¼šæœ‰ä¸€å®šçš„æ—¶å»¶ã€‚å½“$r&gt;\text{myrand()}$æ—¶ï¼Œè„‰å†²æºä¼šé€šè¿‡çªè§¦ä¼ æ’­ç»™æ‰€æœ‰ä¸å®ƒè¿æ¥çš„ç¥ç»å…ƒï¼›ç¥ç»å…ƒå¦‚æœæ¥æ”¶åˆ°ä¿¡å·ï¼Œä¹Ÿä¼šé€šè¿‡è®¡ç®—åˆ¤æ–­æ˜¯å¦ä¼ é€’è¯¥ä¿¡å·åˆ°å®ƒçš„é‚»å±…èŠ‚ç‚¹ä¸Šã€‚</p><p>ç”±äºæœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä¸€ç»´æ˜¯æ—¶é—´ï¼ŒäºŒç»´æ˜¯æ¯ä¸ªç‚¹æ¥æ”¶çš„ä¿¡å·å¼ºåº¦ï¼Œæ¥è®°å½•ä¸€æ®µæ—¶é—´å†…çš„å„ç¥ç»å…ƒæ¥æ”¶åˆ°çš„ä¿¡æ¯ã€‚</p><p>ä»¥ä¸‹æ˜¯60åˆ†ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">long</span> _next = <span class="number">1</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">1e8</span>;</span><br><span class="line"><span class="comment">/* RAND_MAX assumed to be 32767 */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">myrand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    _next = _next * <span class="number">1103515245</span> + <span class="number">12345</span>;</span><br><span class="line">    <span class="keyword">return</span>((<span class="type">unsigned</span>)(_next/<span class="number">65536</span>) % <span class="number">32768</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1001</span>;</span><br><span class="line"><span class="type">double</span> I[<span class="number">1024</span>][N]; <span class="comment">// è„‰å†²</span></span><br><span class="line"><span class="type">int</span> n, s, p, t;</span><br><span class="line"><span class="type">double</span> dt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç¥ç»å…ƒä¿¡æ¯ */</span></span><br><span class="line"><span class="type">double</span> v[N&lt;&lt;<span class="number">1</span>], u[N&lt;&lt;<span class="number">1</span>], a[N&lt;&lt;<span class="number">1</span>], b[N&lt;&lt;<span class="number">1</span>], c[N&lt;&lt;<span class="number">1</span>], d[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> r[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> h[N&lt;&lt;<span class="number">1</span>], D[N&lt;&lt;<span class="number">1</span>], idx, e[N&lt;&lt;<span class="number">1</span>], ne[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">double</span> w[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> cnt[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> aa, <span class="type">int</span> bb, <span class="type">double</span> ww, <span class="type">int</span> DD)</span> </span>&#123;</span><br><span class="line">    D[idx] = DD, w[idx] = ww, e[idx] = bb, ne[idx] = h[aa], h[aa] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>, &amp;n, &amp;s, &amp;p, &amp;t);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;dt);</span><br><span class="line">    <span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> iidx = <span class="number">0</span>, max_d = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">int</span> rn;</span><br><span class="line">        <span class="type">double</span> vv, uu, aa, bb, cc, dd;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%lf%lf%lf%lf%lf%lf&quot;</span>, &amp;rn, &amp;vv, &amp;uu, &amp;aa, &amp;bb, &amp;cc, &amp;dd);</span><br><span class="line">        sum += rn;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; rn; ++i) &#123;</span><br><span class="line">            v[iidx] = vv, u[iidx] = uu, a[iidx] = aa, b[iidx] = bb, c[iidx] = cc, d[iidx] = dd;</span><br><span class="line">            iidx++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum == n) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è„‰å†²æºä¿¡æ¯è¯»å…¥</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &lt; n + p; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;r[i]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯æ¡è¾¹çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; s; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> ss, tt, DD;</span><br><span class="line">        <span class="type">double</span> ww;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%lf%d&quot;</span>, &amp;ss, &amp;tt, &amp;ww, &amp;DD);</span><br><span class="line">        max_d = <span class="built_in">max</span>(max_d, DD+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">add</span>(ss, tt, ww, DD);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‡³æ­¤ï¼Œå®Œæˆè¯»å…¥...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; t; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> tt = i % max_d;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = n; j &lt; n + p; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(r[j] &gt; <span class="built_in">myrand</span>()) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = h[j]; k != <span class="number">-1</span>; k = ne[k]) &#123;</span><br><span class="line">                    I[(tt+D[k]) % max_d][e[k]] += w[k];</span><br><span class="line">                &#125;</span><br><span class="line">                cnt[j]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="type">double</span> vv = v[j], uu = u[j];</span><br><span class="line">            v[j] = vv + dt * (<span class="number">0.04</span> * vv * vv + <span class="number">5</span> * vv + <span class="number">140</span> - uu) + I[tt][j];</span><br><span class="line">            u[j] = uu + dt * a[j] * (b[j] * vv - uu);</span><br><span class="line">            <span class="keyword">if</span>(v[j] &gt;= <span class="number">30</span>) &#123;</span><br><span class="line">                <span class="comment">// å‘é€ä¸€ä¸ªè„‰å†²</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = h[j]; k != <span class="number">-1</span>; k = ne[k]) &#123;</span><br><span class="line">                    I[(tt+D[k]) % max_d][e[k]] += w[k];</span><br><span class="line">                &#125;</span><br><span class="line">                v[j] = c[j], u[j] += d[j];</span><br><span class="line">                cnt[j]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(I[tt], <span class="number">0</span>, <span class="keyword">sizeof</span> I[tt]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> minv = INF, maxv = -INF;</span><br><span class="line">    <span class="type">int</span> maxc = -INF, minc = INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        minv = <span class="built_in">min</span>(minv, v[i]);</span><br><span class="line">        maxv = <span class="built_in">max</span>(maxv, v[i]);</span><br><span class="line">        maxc = <span class="built_in">max</span>(maxc, cnt[i]);</span><br><span class="line">        minc = <span class="built_in">min</span>(minc, cnt[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lf %lf\n%d %d&quot;</span>, minv, maxv, minc, maxc);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSP </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ”¶é›†å¡ç‰Œ</title>
      <link href="/2022/03/16/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%94%B6%E9%9B%86%E5%8D%A1%E7%89%8C/"/>
      <url>/2022/03/16/csp%E9%A2%98%E7%9B%AE%E8%AE%B0%E5%BD%95/%E6%94%B6%E9%9B%86%E5%8D%A1%E7%89%8C/</url>
      
        <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="æ”¶é›†å¡ç‰Œ"><a href="#æ”¶é›†å¡ç‰Œ" class="headerlink" title="æ”¶é›†å¡ç‰Œ"></a>æ”¶é›†å¡ç‰Œ</h1><p><a href="http://118.190.20.162/view.page?gpid=T132">é¢˜ç›®é“¾æ¥</a></p><p>åŸå…ˆæˆ‘çš„æ€è·¯æ˜¯çˆ†æœï¼Œå¯ä»¥æ‹¿åˆ°10åˆ†â€¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, k;</span><br><span class="line"><span class="type">double</span> p[<span class="number">17</span>];</span><br><span class="line"><span class="type">bool</span> has[<span class="number">17</span>];</span><br><span class="line"><span class="type">int</span> coin_num;</span><br><span class="line"><span class="type">double</span> res;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">double</span> prob, <span class="type">int</span> has_card_num, <span class="type">int</span> has_coin_num, <span class="type">int</span> try_num)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(has_card_num + has_coin_num / k &gt;= n) &#123;</span><br><span class="line">        res += prob * try_num;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(has[i]) &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(prob * p[i], has_card_num, has_coin_num+<span class="number">1</span>, try_num+<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            has[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(prob * p[i], has_card_num + <span class="number">1</span>, has_coin_num, try_num + <span class="number">1</span>);</span><br><span class="line">            has[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;p[i]);</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.6lf&quot;</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·ä¼šæœ‰éå¸¸å¤šå†—ä½™çš„æœç´¢â€¦åŒæ—¶ï¼Œæˆ‘ä»¬æƒ³åˆ°å½“dfsè¶…æ—¶æ—¶ä¸€èˆ¬ä¼šä½¿ç”¨dpç®—æ³•è¿›è¡Œä¼˜åŒ–ã€‚åŒæ—¶ï¼Œåœ¨é¢˜å¹²ä¸­ä¹Ÿæåˆ°äº†æœ€å¤šæœ‰16ç§å¡ç‰Œï¼Œè€Œ$2^{16}$è¿™ä¸ªçº§åˆ«å®Œå…¨å¯ä»¥ä½¿ç”¨çŠ¶å‹dpã€‚</p><p>å¯¹äºæ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸€ä¸‹<a href="https://www.acwing.com/problem/content/219/">ç»¿è±†è›™çš„å½’å®¿</a>ï¼Œä½œä¸ºè§£é¢˜çš„åŸºæœ¬æ€è·¯å’ŒåŸºæœ¬æ¨¡æ¿æ¥å¤„ç†ã€‚è™½ç„¶ç”¨çš„æ˜¯dpï¼Œä½†æˆ‘è§‰å¾—æ›´åƒæ˜¯å‰ªæè¿‡åçš„æœç´¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>, M = <span class="number">200020</span>;</span><br><span class="line"><span class="type">int</span> n, m, idx;</span><br><span class="line"><span class="type">int</span> h[M], e[M], ne[M], w[M], cnt[M];</span><br><span class="line"><span class="type">double</span> f[N]; <span class="comment">// æœ€å¤šç»è¿‡Nä¸ªç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span> </span>&#123;</span><br><span class="line">    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[x] &gt;= <span class="number">0</span>) <span class="comment">// è¯´æ˜å·²ç»è®¡ç®—è¿‡äº†</span></span><br><span class="line">        <span class="keyword">return</span> f[x];</span><br><span class="line">    f[x] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k = h[x]; k != <span class="number">-1</span>; k = ne[k]) &#123;</span><br><span class="line">        <span class="comment">// E(p(w + X)) = pw + pE(X)</span></span><br><span class="line">        f[x] += (w[k] + <span class="built_in">dp</span>(e[k])) / cnt[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        <span class="built_in">add</span>(a, b, c);</span><br><span class="line">        cnt[a]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.2lf&quot;</span>, <span class="built_in">dp</span>(<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä½¿ç”¨çš„æ˜¯ä¸€ç§å€’æ¨çš„æ€æƒ³ï¼Œä¾ç…§ä¸Šé¢çš„æ±‚è§£æ–¹å¼ï¼Œå¯¹äºè§£å†³è¿™ç±»é—®é¢˜åº”è¯¥æ›´åŠ å®¹æ˜“å»ç†è§£ã€‚</p><p>å¯¹äºæœ‰å…³æœŸæœ›é—®é¢˜çš„æ±‚è§£ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨è¿™æ ·çš„å½¢å¼ï¼Œé¦–å…ˆå°†æ‰€æœ‰çš„çŠ¶æ€ç½®ä¸ºnan(memset double)ï¼Œå†é€’å½’è¿›è¡Œæ±‚è§£ã€‚</p><p>ä¸‹é¢ç»™å‡ºdpç®—æ³•çš„æ±‚è§£æ€è·¯ï¼š</p><p>è®¾äºŒç»´æ•°ç»„<code>f[i][j]</code>ï¼Œä¸€ç»´è¡¨ç¤º16ç§å¡ç‰Œçš„æ‹¥æœ‰æƒ…å†µï¼Œç¬¬äºŒç»´è¡¨ç¤ºç¡¬å¸æ•°ï¼ŒäºŒç»´æ•°ç»„çš„å€¼ä¸ºæœŸæœ›å€¼ã€‚å½“å½“å‰æ‹¥æœ‰çš„å¡ç‰Œç§ç±»æ•°è¾¾æ ‡ï¼Œæˆ–è€…åŠ ä¸Šç¡¬å¸çš„æ•°é‡è¾¾æ ‡ä¹‹åï¼Œå°±åº”è¯¥å¢åŠ æœŸæœ›å€¼ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n, k;</span><br><span class="line"><span class="type">double</span> p[<span class="number">17</span>];</span><br><span class="line"><span class="type">double</span> f[<span class="number">1</span>&lt;&lt;<span class="number">16</span>][<span class="number">81</span>];</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dp</span><span class="params">(<span class="type">int</span> card, <span class="type">int</span> coin_num, <span class="type">int</span> select_num, <span class="type">int</span> card_num)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[card][coin_num] &gt;= <span class="number">0</span>) <span class="keyword">return</span> f[card][coin_num];</span><br><span class="line">    <span class="keyword">if</span>(card_num + coin_num / k &gt;= n) <span class="keyword">return</span> select_num;</span><br><span class="line">    f[card][coin_num] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>((card &gt;&gt; (i<span class="number">-1</span>)) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            f[card][coin_num] += p[i] * <span class="built_in">dp</span>(card, coin_num + <span class="number">1</span>, select_num+<span class="number">1</span>, card_num);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            f[card][coin_num] += p[i] * <span class="built_in">dp</span>(card | (<span class="number">1</span> &lt;&lt; (i<span class="number">-1</span>)), coin_num, select_num+<span class="number">1</span>, card_num + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[card][coin_num];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;p[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.10lf&quot;</span>, <span class="built_in">dp</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äº<code>f[i][j]</code>çš„å®šä¹‰åº”è¯¥è¿›è¡Œè¿›ä¸€æ­¥è¯´æ˜ï¼Œå®ƒä»£è¡¨çš„æ˜¯å½“å‰å¡ç‰Œçš„æ‹¥æœ‰æƒ…å†µiä»¥åŠç¡¬å¸æ‹¥æœ‰æƒ…å†µæ•°jæƒ…å†µä¸‹æ‰€æœ‰æƒ…å†µçš„æœŸæœ›æŠ½å–ç»“æœï¼ˆå‡è®¾å½“å‰çš„æ¦‚ç‡ä¸º1ï¼‰ã€‚å½“å·²ç»æœ‰é›†é½æ‰€æœ‰å¡ç‰Œæ—¶ï¼Œæ˜¾ç„¶å…¶æœŸæœ›æ˜¯ä»æœ€åˆæŠ½å–å¡ç‰Œçš„æ¬¡æ•°ã€‚å¦‚æœè¿˜æ²¡èƒ½é›†é½æ‰€æœ‰å¡ç‰Œï¼Œé‚£ä¹ˆå°±éœ€è¦æ€è€ƒæ¯ç§å¡ç‰ŒæŠ½å–çš„æ¦‚ç‡ï¼Œå°†æ‰€æœ‰å­æœŸæœ›ç›¸åŠ ã€‚è¯¥åšæ³•ä¹Ÿæ˜¯åŸºäºåŸºç¡€çš„æœŸæœ›è¡¨è¾¾å¼ï¼š<br>$$<br>E(X)&#x3D;E(p_1X_1+p_2X_2+p_3X_3+â€¦)&#x3D;p_1E(X_1)+p_2E(X_2)+p_3E(X_3)<br>$$<br>åˆçœ‹çš„ç¡®æœ‰äº›éš¾ç†è§£ï¼Œå¸Œæœ›èƒ½é€šè¿‡è¿™é¢˜å¯¹æœŸæœ›çš„è®¡ç®—æœ‰æ›´æ·±åˆ»çš„è®¤è¯†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dp </tag>
            
            <tag> CSP </tag>
            
            <tag> æœŸæœ› </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
